if(!window.insightRUM) {var s247RUM ={"resources_config":[],"ip_enabled":false,"beaconType":0,"ajax_enabled":false,"staticURL":"https:\/\/static.site24x7rum.eu","version":null,"excluded_useragents":[""],"cx_ajax_enabled":false,"excluded_errors":{},"apedexThreshold":40000,"collectorURL":"\/\/col.site24x7rum.eu","excluded_domains":[""],"appKey":"a9248ce4f825ebe41eda73c08ef3faac","exclude_bots":true,"track_resources":false};
Array.isArray||(Array.isArray=function(arg){return"[object Array]"===Object.prototype.toString.call(arg)}),String.prototype.startsWith||Object.defineProperty(String.prototype,"startsWith",{value:function(search,rawPos){rawPos=0<rawPos?0|rawPos:0;return this.substring(rawPos,rawPos+search.length)===search}}),String.prototype.endsWith||(String.prototype.endsWith=function(search,this_len){return(void 0===this_len||this_len>this.length)&&(this_len=this.length),this.substring(this_len-search.length,this_len)===search});
var s247CommonModule=function(){var CONSTANTS={MAX_EVENTS_LENGTH:100,MAX_CLICK_INTERVAL:2e3,CLICK_THRESHOLD:3,CLICK_DISTANCE:50,MAX_SCROLL_INTERVAL:100,EXCESSIVE_SCROLL_THRESHOLD:100,OBFUSCATE_WEB_PAGES_REGEX:"//([^\\/$]*[0-9]+[^\\/$]*)/g",QUICK_BACK_TIME:5e3,DEADCLICK_WAIT_TIME:5e3,MAX_ERROR_PER_REQUEST:9,MAX_SELECTOR_LENGTH:1e4,MAX_XPATH_LENGTH:1e4,MAX_BUTTON_CLICK_TEXT_LENGTH:1e4,MAX_EVENTS_METRIC_LENGTH:1e4,MAX_EVENTS_META_INFO_LENGTH:1e4,MAX_EVENTS_CLICK_CUSTOMNAME_LENGTH:1e3,MAX_SESSION_TIME:9e5,TIMING_METRICS:["rdT","acT","dnsT","conT","beT","fbT","dlT","nwT","dpT","drT","feT","totalRT"],EVENT_LISTENERS:["onload","onpagehide","onkeypress","onscroll","onclick","visibilitychange"],INITIATOR_TYPES:["img","css","iframe","link","script","xmlhttprequest"],HOST_NAME_REGEX:/^(https|http)?:\/\/(?:www\.)?([^/:?#]+)(?:[/:?#]|$)/i,HOST_NAME_WITH_PORT_REGEX:/^(https|http)?:\/\/(?:www\.)?([^/:?#]+(:\d+)?)(?:[/:?#]|$)/i,URL_PATTERN:/^(?:https?:\/\/)?(?:[^@\/\n]+@)?(?:www\.)?([^:\/?\n]+)(?::[0-9]+)?([^?]+)?(?:\\?)?(.+)?$/i,STRING_LENGTH_RESTRICTED_RESOURCE_TYPES:["name","domain","res_type","domain_type","initiator","extension"],MAX_RESOURCES_STRING_LEN:100,MAX_RESOURCES_ALLOWED:1e3,SAMPLING_RATE:1,RESOURCES_SAMPLING_RATE:.05,RECORDING_SAMPLING_RATE:.1,RECORDING_ORDER:1,CAPTURE_RESOURCES:!1,IGNORED_RESOURCES:["site24x7"],DEFAULT_APDEX_THRESHOLD:2e3,DEFAULT_CDN_DOMAINS:["cdn.",".akamai.com",".akamai.net",".akamaized.net",".akamaiedge.net",".akamaihd.net",".edgesuite.net",".edgekey.net",".srip.net",".akamaitechnologies.com",".akamaitechnologies.fr",".tl88.net",".llnwd.net","edgecastcdn.net",".systemcdn.net",".transactcdn.net",".v1cdn.net",".v2cdn.net",".v3cdn.net",".v4cdn.net",".v5cdn.net","hwcdn.net",".simplecdn.net",".instacontent.net",".footprint.net",".fpbns.net",".ay1.b.yahoo.com",".yimg.",".yahooapis.com",".google.","googlesyndication.","youtube.",".googleusercontent.com","googlehosted.com",".gstatic.com",".doubleclick.net",".insnw.net",".inscname.net",".internapcdn.net",".cloudfront.net",".netdna-cdn.com",".netdna-ssl.com",".netdna.com",".kxcdn.com",".cotcdn.net",".cachefly.net","bo.lt",".cloudflare.com",".afxcdn.net",".lxdns.com",".wscdns.com",".wscloudcdn.com",".ourwebpic.com",".att-dsa.net",".vo.msecnd.net",".azureedge.net",".azure.microsoft.com",".voxcdn.net",".bluehatnetwork.com",".swiftcdn1.com",".swiftserve.com",".cdngc.net",".gccdn.net",".panthercdn.com",".fastly.net",".fastlylb.net",".nocookie.net",".gslb.taobao.com",".gslb.tbcache.com",".mirror-image.net",".yottaa.net",".cubecdn.net",".cdn77.net",".cdn77.org",".incapdns.net",".bitgravity.com",".r.worldcdn.net",".r.worldssl.net","tbcdn.cn",".taobaocdn.com",".ngenix.net",".pagerain.net",".ccgslb.com","cdn.sfr.net",".azioncdn.net",".azioncdn.com",".azion.net",".cdncloud.net.au",".rncdn1.com",".rncdn7.com",".cdnsun.net",".mncdn.com",".mncdn.net",".mncdn.org","cdn.jsdelivr.net",".nyiftw.net",".nyiftw.com",".resrc.it",".zenedge.net",".lswcdn.net",".lswcdn.eu",".revcn.net",".revdn.net",".caspowa.com",".twimg.com",".facebook.com",".facebook.net",".fbcdn.net",".cdninstagram.com",".rlcdn.com",".wp.com",".wordpress.com",".gravatar.com",".aads1.net",".aads-cn.net",".aads-cng.net",".squixa.net",".bisongrid.net",".cdn.gocache.net",".hiberniacdn.com",".cdntel.net",".raxcdn.com",".unicorncdn.net",".optimalcdn.com",".kinxcdn.com",".kinxcdn.net",".stackpathdns.com",".hosting4cdn.com",".netlify.com",".b-cdn.net",".pix-cdn.org",".roast.io",".cdnvideo.ru",".cdnvideo.net",".trbcdn.ru",".cedexis.net",".streamprovider.net",".singularcdn.net.br"],PAYLOAD_DISPATCHER_INTERVAL:1e4,MAX_RECORDING_SIZE:Math.floor(1572864),MAX_RESPONSE_PAYLOAD_CHARACTERS:15e4,EXCLUDED_HEADERS:["authorization","x-forwarded-for","cookie","set-cookie","x-api-key","x-real-ip","remote-addr","forwarded","proxy-authorization","x-csrf-token","x-csrftoken","x-xsrf-token"],INCLUDED_HEADERS:["Content-Type","Content-Length","Accept"],INACTIVITY_LIMIT:3e5};function truncateString(str,maxCharLimit,delimiter){let lastSlashIndex=-1,charCount=0;for(let i=0;i<str.length&&(str[i]===delimiter&&(lastSlashIndex=i),!(++charCount>maxCharLimit));i++);return-1!==lastSlashIndex&&charCount>maxCharLimit?str.substring(0,lastSlashIndex+1):str}return{getSelector:function(node){var sel="";try{for(;node&&9!==node.nodeType;){var part=node.id?"#"+node.id:node.nodeName.toLowerCase()+(node.className&&node.className.length?"."+Array.from(node.classList.values()).join("."):"");if(sel.length+part.length>CONSTANTS.MAX_SELECTOR_LENGTH-1)return sel&&((sel=sel.split(">")).pop(),sel=sel.join(">")),sel.substr(0,CONSTANTS.MAX_SELECTOR_LENGTH)||part.substr(0,CONSTANTS.MAX_SELECTOR_LENGTH);if(sel=sel?part+">"+sel:part,node.id)break;node=node.parentNode}}catch(err){}return sel.substr(0,CONSTANTS.MAX_SELECTOR_LENGTH)},getXPath:function(node){try{return truncateString(function getXPath(node){if(""!==node.id)return'id("'+node.id+'")';if(node===document.body)return node.tagName;for(var ix=0,siblings=node&&node.parentNode?node.parentNode.childNodes:[],i=0;i<siblings.length;i++){var sibling=siblings[i];if(sibling===node)return getXPath(node.parentNode)+"/"+node.tagName+"["+(ix+1)+"]";1===sibling.nodeType&&sibling.tagName===node.tagName&&ix++}}(node),CONSTANTS.MAX_XPATH_LENGTH,"/")}catch(e){}return"?"},truncateString:truncateString,getCurrentMillis:function(){return Date.now?Date.now():(new Date).getTime()},getAppKey:function(){return"undefined"!=typeof s247RUM&&s247RUM.appKey?s247RUM.appKey:rumMOKey},parseJsonWithLimit:function(text){try{let jsonObject=JSON.parse(text);if(JSON.stringify(jsonObject).length>CONSTANTS.MAX_RESPONSE_PAYLOAD_CHARACTERS){if(Array.isArray(jsonObject)){var limitedArray=[];let totalChars=0;for(let i=0;i<jsonObject.length;i++){var itemString=JSON.stringify(jsonObject[i]);if(!(totalChars+itemString.length<=CONSTANTS.MAX_RESPONSE_PAYLOAD_CHARACTERS))break;limitedArray.push(jsonObject[i]),totalChars+=itemString.length}jsonObject=limitedArray}else if("object"==typeof jsonObject){var key,limitedObject={};let totalChars=0;for(key in jsonObject){var keyString=JSON.stringify({[key]:jsonObject[key]});if(!(totalChars+keyString.length<=CONSTANTS.MAX_RESPONSE_PAYLOAD_CHARACTERS))break;limitedObject[key]=jsonObject[key],totalChars+=keyString.length}jsonObject=limitedObject}return jsonObject.s247_message="150k max char limit reached",JSON.stringify(jsonObject)}return text}catch(e){return text=text&&"string"==typeof text&&text.length>CONSTANTS.MAX_RESPONSE_PAYLOAD_CHARACTERS?text.substring(0,CONSTANTS.MAX_RESPONSE_PAYLOAD_CHARACTERS)+"...":text}},filterHeaders:function(headers,allowedHeaders){allowedHeaders=(allowedHeaders=allowedHeaders||[]).concat(CONSTANTS.INCLUDED_HEADERS);var filteredHeaders={};for(const key in headers)headers.hasOwnProperty(key)&&allowedHeaders.includes(key)&&(CONSTANTS.EXCLUDED_HEADERS.includes(key.toLowerCase())||(filteredHeaders[key]=headers[key]));return filteredHeaders},getClosestStartTime:function(similarEventsArray,start_time,source){if(0===similarEventsArray.length)return null;if(1===similarEventsArray.length&&similarEventsArray[0].source==source)return null;for(var nearestEvent=similarEventsArray[0],minDifference=Math.abs(similarEventsArray[0].st-start_time),nearestEventIndex=0,i=1;i<similarEventsArray.length;i++){var difference=Math.abs(similarEventsArray[i].st-start_time);difference<minDifference&&similarEventsArray[i].source!=source&&(nearestEvent=similarEventsArray[i],minDifference=difference,nearestEventIndex=i)}return minDifference<=5e3?(similarEventsArray.splice(nearestEventIndex,1),nearestEvent):null},deleteLongLastingEvents:function(eventIdObj){var currentTime=(new Date).getTime();for(const key in eventIdObj)Array.isArray(eventIdObj[key])&&(eventIdObj[key]=eventIdObj[key].filter(subObj=>currentTime-subObj.ct<=12e4),0===eventIdObj[key].length)&&delete eventIdObj[key];return eventIdObj},simpleHash:function(input){let hash=0;for(let i=0;i<input.length;i++){var charCode=input.charCodeAt(i);hash=(hash<<5)-hash+charCode,hash&=hash}return hash.toString(16)},SCROLL_EVENTS:{LAST_SCROLLED:0,COUNT:0,SCROLL_IDLE_TIMEOUT:2e3},CONSTANTS:CONSTANTS,eventIdObj:{}}}();
var s247ConfigModule=function(){let insightRUMInstance;const config={appKey:"",trackAjaxCalls:!1,trackCrossDomainAjaxCalls:!1,trackAllSpaAjaxCalls:!1,trackResources:!1,excludedDomains:[],excludedDomainsRegex:new RegExp,excludeUserAgents:[],excludeUserAgentsRegex:new RegExp,apdexThreshold:s247CommonModule.CONSTANTS.DEFAULT_APDEX_THRESHOLD,trackConsoleEvents:!1,excludedAjaxCalls:[],excludedAjaxCallsRegex:new RegExp,excludedWebTxns:[],excludeWebPages:[],excludedWebTxnsRegex:new RegExp,customWebPageGrouping:new RegExp,customFullWebPageGrouping:new RegExp,exemptKeywords:"",trackEvents:!1,trackAsynchronousCallbacks:!1,trackTransactionsWithQueryParams:!1,maxSessionDuration:s247CommonModule.CONSTANTS.MAX_SESSION_TIME,onBeforeSend:()=>{},flushMetrics:void 0,endCurrentSession:void 0,environment:"",endPoint:"",userType:"",release:"",userId:"",addBreadCrumbs:"",ignoreNetworkForSPA:!1,samplingRate:s247CommonModule.CONSTANTS.SAMPLING_RATE,captureAllWaterfalls:!1,waterfallsSamplingRate:s247CommonModule.CONSTANTS.RESOURCES_SAMPLING_RATE,recordingSamplingRate:s247CommonModule.CONSTANTS.RECORDING_SAMPLING_RATE,excludeResources:[],recordSession:!1,addEvent:"",captureException:{},maskAllText:!0,maskAllInput:!0,collectNetworkDetails:!1,allowedNetworkUrls:[],excludedNetworkUrls:[],allowedRequestHeaders:[],allowedResponseHeaders:[]},objectValueAllowedKeys=["recordSession"];function updateConfigRegex(value){return value&&Array.isArray(value)&&0<value.length?new RegExp(value.join("|"),"g"):value&&value instanceof RegExp?value:null}var configManager=(config,value)=>{setConfig(config,value)};const configSchema={excludedDomains:{type:["string","array"],dependencies:["excludedDomainsRegex"],onDependencyUpdate:updateConfigRegex},excludeUserAgents:{type:["string","array"],dependencies:["excludeUserAgentsRegex"],onDependencyUpdate:updateConfigRegex},excludedAjaxCalls:{type:["string","array"],dependencies:["excludedAjaxCallsRegex"],onDependencyUpdate:updateConfigRegex},excludeWebPages:{type:["string","array"],dependencies:["excludedWebTxns"],onDependencyUpdate:function(value){return value}},excludedWebTxns:{type:["string","array"],dependencies:["excludedWebTxnsRegex"],onDependencyUpdate:updateConfigRegex},excludeResources:{type:["string","array"],onUpdate:function(value){s247ResourcesModule.ignoreResources(value)}},userId:{onUpdate:function(value){value&&(insightRUMInstance.uid=value)}},addBreadCrumbs:{onUpdate:function(value){value&&(value=100<value.length?value.substring(0,100):value,insightRUMInstance.colHelpers.addUserTrace(insightRUMInstance,"custom",value))}},trackConsoleEvents:{onUpdate:function(value){value&&insightRUMInstance.eventHandlers.console()}},trackAllSpaAjaxCalls:{onUpdate:function(value){value&&(insightRUMInstance.trackSpaNonRouteAjax=!0)}},trackCrossDomainAjaxCalls:{onUpdate:function(value){insightRUMInstance.includeCrossDomainAjaxCalls=value}},trackTransactionsWithQueryParams:{onUpdate:function(value){value&&(insightRUMInstance.includeQueryParams=!0)}},trackAsynchronousCallbacks:{onUpdate:function(value){value&&"undefined"!=typeof TraceKit&&TraceKit.extendToAsynchronousCallbacks()}},trackEvents:{type:["object","boolean"]},recordSession:{dependencies:["trackEvents","captureAllWaterfalls","trackConsoleEvents"],onDependencyUpdate:function(value){return value},onUpdate:function(value){value&&(config.recordSession=!0,s247RecorderModule.init(insightRUMInstance))}},captureAllWaterfalls:{type:["object","boolean"],onUpdate:function(value){value&&(s247ResourcesModule.samplingRate(1),insightRUMInstance.captureAllWaterfallsResources=!0)}},waterfallsSamplingRate:{onUpdate:function(value){s247ResourcesModule.samplingRate(value)}},flushMetrics:{onUpdate:function(){insightRUMInstance.metricsDispatcher(insightRUMInstance,insightRUMInstance.initialSent?"regular":"initial")}},captureException:{onUpdate:function(value){value instanceof Error||value instanceof Event||"undefined"==typeof TraceKit||TraceKit.report(value)}},endCurrentSession:{onUpdate:function(){insightRUMInstance.metricsDispatcher(insightRUMInstance,insightRUMInstance.initialSent?"regular":"initial");var sesInfo=insightRUMInstance.colHelpers.getCookie(insightRUMInstance,"site24x7rumID"),ns=insightRUMInstance.isSPA?s247CommonModule.getCurrentMillis():performance.timing.navigationStart,sesInfo=sesInfo.guid+".0."+ns;insightRUMInstance.colHelpers.setCookie("site24x7rumID",sesInfo)}},exemptKeywords:{onUpdate:function(value){insightRUMInstance.exemptedKeywords=new RegExp(value.replace(/,/g,"|"))}},addEvent:{onUpdate:function(value){insightRUMInstance.colHelpers.addEvents(insightRUMInstance,void 0,"custom",value)}}},updateDependencies=function(keyOrObject,value){configSchema[keyOrObject].dependencies&&configSchema[keyOrObject].dependencies.forEach(dependencyKey=>{configSchema[keyOrObject].hasOwnProperty("onDependencyUpdate")&&setConfig(dependencyKey,configSchema[keyOrObject].onDependencyUpdate(value))})},setConfig=(keyOrObject,value)=>{var allowedTypes,valueType;"object"==typeof keyOrObject?Object.entries(keyOrObject).forEach(([key,value])=>setConfig(key,value)):"object"==typeof value&&objectValueAllowedKeys.includes(keyOrObject)?(Object.entries(value).forEach(([key,value])=>setConfig(key,value)),configSchema[keyOrObject]&&(configSchema[keyOrObject].onUpdate&&configSchema[keyOrObject].onUpdate(value),updateDependencies(keyOrObject,value))):"string"==typeof keyOrObject&&config.hasOwnProperty(keyOrObject)&&(allowedTypes=configSchema[keyOrObject]&&configSchema[keyOrObject].type?configSchema[keyOrObject].type:[],valueType=Array.isArray(value)?"array":typeof value,(Array.isArray(config[keyOrObject])?"array":typeof config[keyOrObject])==valueType||allowedTypes.includes(valueType))&&(insightRUMInstance[keyOrObject]=value,config[keyOrObject]=value,configSchema)&&configSchema[keyOrObject]&&(updateDependencies(keyOrObject,value),configSchema[keyOrObject].onUpdate)&&configSchema[keyOrObject].onUpdate(value)};return configManager.setConfig=setConfig,configManager.getConfig=key=>{if(config.hasOwnProperty(key))return config[key]},configManager.processQueue=(queue,insightRum)=>{insightRum&&(insightRUMInstance=insightRum),Array.isArray(queue)&&queue.forEach(([key,value])=>setConfig(key,value))},configManager}();
var globalTest=[],staticUrl="undefined"!=typeof s247RUM&&s247RUM.staticURL?s247RUM.staticURL:"https://static.site24x7rum.com";const workerCode=`
    try{
    //TODO: Host fflate in site24x7 collector CDN
    importScripts("${staticUrl}/session-replay/recorder/fflate@0.8.2/umd/index.js");
    self.onmessage = function(e) {
      const fflate = self.fflate;
      const gzip = new fflate.Gzip({
        level: 9
      });
      let eventsList=[];
      let data = e.data;
      for(let j = 0; j<data.length; j++){
        let event = data[j];
        const eventDataString = JSON.stringify(event.metric);
        var currentEventDataSize = eventDataString.length;
        const MAX_RECORDING_SIZE = Math.floor(1.5*1024*1024);
        let timeStampIncrementer=0; //For incrementing timestamp of each chunk. Used while fetching the recording segments.
        if(currentEventDataSize >= MAX_RECORDING_SIZE){// Approximate Size greater than 1.5Mb.
          for (let i = 0; i < eventDataString.length; i += MAX_RECORDING_SIZE) {
            let eventCopy = Object.assign({}, event)
            const chunk = eventDataString.slice(i, i + MAX_RECORDING_SIZE);
            eventCopy.metric = chunk;
            eventCopy.meta_info="chunk";//NO I18n
            eventCopy._zl_timestamp = Number(eventCopy._zl_timestamp)+(++timeStampIncrementer);
            eventsList.push(eventCopy);
          }
        }else{
          event.metric = eventDataString;
          // push event into the events array
          eventsList.push(event);
        }
      }
      data=eventsList;
      const uint8Array = new TextEncoder().encode(JSON.stringify(data));
      let compressedData = new Uint8Array();
      gzip.ondata = function(chunk, final) {
        const newCompressedData = new Uint8Array(compressedData.length + chunk.length);
        newCompressedData.set(compressedData);
        newCompressedData.set(chunk, compressedData.length);
        compressedData = newCompressedData;
        if (final) {
          // All data has been compressed
          self.postMessage(compressedData);
        }
      };
      gzip.push(uint8Array, true);
      }
      }catch(e){
        throw e;
      }
  `;var blob=new Blob([workerCode],{type:"application/javascript"}),s247WorkerUrl=URL.createObjectURL(blob);const s247worker=new Worker(s247WorkerUrl);var s247RecorderModule=function(){var events=[],recorder=function(){"use strict";var NodeType;function isShadowRoot(n){var host=null==n?void 0:n.host;return Boolean((null==host?void 0:host.shadowRoot)===n)}function isNativeShadowDom(shadowRoot){return"[object ShadowRoot]"===Object.prototype.toString.call(shadowRoot)}function getCssRulesString(s){try{var rules=s.rules||s.cssRules;return rules?cssText=(cssText=Array.from(rules).map(getCssRuleString).join("")).includes(" background-clip: text;")&&!cssText.includes(" -webkit-background-clip: text;")?cssText.replace(" background-clip: text;"," -webkit-background-clip: text; background-clip: text;"):cssText:null}catch(error){return null}var cssText}function getCssRuleString(rule){var cssStringified=rule.cssText;if("styleSheet"in rule)try{cssStringified=getCssRulesString(rule.styleSheet)||cssStringified}catch(_a){}return cssStringified}(NodeType2=NodeType=NodeType||{})[NodeType2.Document=0]="Document",NodeType2[NodeType2.DocumentType=1]="DocumentType",NodeType2[NodeType2.Element=2]="Element",NodeType2[NodeType2.Text=3]="Text",NodeType2[NodeType2.CDATA=4]="CDATA",NodeType2[NodeType2.Comment=5]="Comment";Mirror2.prototype.getId=function(n){return n&&null!=(n=null==(n=this.getMeta(n))?void 0:n.id)?n:-1},Mirror2.prototype.getNode=function(id){return this.idNodeMap.get(id)||null},Mirror2.prototype.getIds=function(){return Array.from(this.idNodeMap.keys())},Mirror2.prototype.getMeta=function(n){return this.nodeMetaMap.get(n)||null},Mirror2.prototype.removeNodeFromMap=function(n){var _this=this,id=this.getId(n);this.idNodeMap.delete(id),n.childNodes&&n.childNodes.forEach(function(childNode){return _this.removeNodeFromMap(childNode)})},Mirror2.prototype.has=function(id){return this.idNodeMap.has(id)},Mirror2.prototype.hasNode=function(node){return this.nodeMetaMap.has(node)},Mirror2.prototype.add=function(n,meta){var id=meta.id;this.idNodeMap.set(id,n),this.nodeMetaMap.set(n,meta)},Mirror2.prototype.replace=function(id,n){var oldNode=this.getNode(id);oldNode&&(oldNode=this.nodeMetaMap.get(oldNode))&&this.nodeMetaMap.set(n,oldNode),this.idNodeMap.set(id,n)},Mirror2.prototype.reset=function(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap};var Mirror=Mirror2;function Mirror2(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}function maskInputValue(_a){var maskInputOptions=_a.maskInputOptions,tagName=_a.tagName,type=_a.type,value=_a.value,_a=_a.maskInputFn,value=value||"";return value=maskInputOptions[tagName.toLowerCase()]||maskInputOptions[type]?_a?_a(value):"*".repeat(value.length):value}var ORIGINAL_ATTRIBUTE_NAME="__rrweb_original__";var canvasService,canvasCtx,_id=1,tagNameRegex=new RegExp("[^a-z0-9-_:]"),IGNORED_NODE=-2;function genId(){return _id++}var URL_IN_CSS_REF=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,RELATIVE_PATH=/^(?!www\.|(?:http|ftp)s?:\/\/|[A-Za-z]:\\|\/\/|#).*/,DATA_URI=/^(data:)([^,]*),(.*)/i;function absoluteToStylesheet(cssText,href){return(cssText||"").replace(URL_IN_CSS_REF,function(origin,quote1,path1,quote2,path2,path3){path1=path1||path2||path3,path2=quote1||quote2||"";if(!path1)return origin;if(!RELATIVE_PATH.test(path1))return"url(".concat(path2).concat(path1).concat(path2,")");if(DATA_URI.test(path1))return"url(".concat(path2).concat(path1).concat(path2,")");if("/"===path1[0])return"url(".concat(path2).concat((-1<(path3=href).indexOf("//")?path3.split("/").slice(0,3).join("/"):path3.split("/")[0]).split("?")[0]+path1).concat(path2,")");var stack=href.split("/"),quote1=path1.split("/");stack.pop();for(var _i=0,parts_1=quote1;_i<parts_1.length;_i++){var part=parts_1[_i];"."!==part&&(".."===part?stack.pop():stack.push(part))}return"url(".concat(path2).concat(stack.join("/")).concat(path2,")")})}var SRCSET_NOT_SPACES=/^[^ \t\n\r\u000c]+/,SRCSET_COMMAS_OR_SPACES=/^[, \t\n\r\u000c]+/;function absoluteToDoc(doc,attributeValue){return attributeValue&&""!==attributeValue.trim()?((doc=doc.createElement("a")).href=attributeValue,doc.href):attributeValue}function getHref(){var a=document.createElement("a");return a.href="",a.href}function transformAttribute(doc,tagName,name,value){return"src"!==name&&("href"!==name||!value||"use"===tagName&&"#"===value[0])&&!("xlink:href"===name&&value&&"#"!==value[0]||"background"===name&&value&&("table"===tagName||"td"===tagName||"th"===tagName))?"srcset"===name&&value?function(doc,attributeValue){if(""===attributeValue.trim())return attributeValue;var pos=0;function collectCharacters(regEx){var regEx=regEx.exec(attributeValue.substring(pos));return regEx?(regEx=regEx[0],pos+=regEx.length,regEx):""}for(var output=[];collectCharacters(SRCSET_COMMAS_OR_SPACES),!(pos>=attributeValue.length);)if(","===(url=collectCharacters(SRCSET_NOT_SPACES)).slice(-1))url=absoluteToDoc(doc,url.substring(0,url.length-1)),output.push(url);else for(var descriptorsStr="",url=absoluteToDoc(doc,url),inParens=!1;;){var c=attributeValue.charAt(pos);if(""===c){output.push((url+descriptorsStr).trim());break}if(inParens)")"===c&&(inParens=!1);else{if(","===c){pos+=1,output.push((url+descriptorsStr).trim());break}"("===c&&(inParens=!0)}descriptorsStr+=c,pos+=1}return output.join(", ")}(doc,value):"style"===name&&value?absoluteToStylesheet(value,getHref()):"object"===tagName&&"data"===name&&value?absoluteToDoc(doc,value):value:absoluteToDoc(doc,value)}function classMatchesRegex(node,regex,checkAncestors){if(!node)return!1;if(node.nodeType!==node.ELEMENT_NODE)return!!checkAncestors&&classMatchesRegex(node.parentNode,regex,checkAncestors);for(var eIndex=node.classList.length;eIndex--;){var className=node.classList[eIndex];if(regex.test(className))return!0}return!!checkAncestors&&classMatchesRegex(node.parentNode,regex,checkAncestors)}function needMaskingText(node,maskTextClass,maskTextSelector){node=node.nodeType===node.ELEMENT_NODE?node:node.parentElement;if(null!==node){if("string"==typeof maskTextClass){if(node.classList.contains(maskTextClass))return 1;if(node.closest(".".concat(maskTextClass)))return 1}else if(classMatchesRegex(node,maskTextClass,!0))return 1;if(maskTextSelector){if(node.matches(maskTextSelector))return 1;if(node.closest(maskTextSelector))return 1}}}function serializeNode(n,options){var doc=options.doc,mirror=options.mirror,blockClass=options.blockClass,blockSelector=options.blockSelector,maskTextClass=options.maskTextClass,maskTextSelector=options.maskTextSelector,inlineStylesheet=options.inlineStylesheet,_a=options.maskInputOptions,maskInputOptions=void 0===_a?{}:_a,maskTextFn=options.maskTextFn,maskInputFn=options.maskInputFn,_a=options.dataURLOptions,dataURLOptions=void 0===_a?{}:_a,inlineImages=options.inlineImages,recordCanvas=options.recordCanvas,keepIframeSrcFn=options.keepIframeSrcFn,_a=options.newlyAddedElement,newlyAddedElement=void 0!==_a&&_a,rootId=function(doc,mirror){return!mirror.hasNode(doc)||1===(mirror=mirror.getId(doc))?void 0:mirror}(doc,mirror);switch(n.nodeType){case n.DOCUMENT_NODE:return"CSS1Compat"!==n.compatMode?{type:NodeType.Document,childNodes:[],compatMode:n.compatMode}:{type:NodeType.Document,childNodes:[]};case n.DOCUMENT_TYPE_NODE:return{type:NodeType.DocumentType,name:n.name,publicId:n.publicId,systemId:n.systemId,rootId:rootId};case n.ELEMENT_NODE:return function(n,options){for(var doc=options.doc,blockClass=options.blockClass,blockSelector=options.blockSelector,inlineStylesheet=options.inlineStylesheet,_a=options.maskInputOptions,_a=void 0===_a?{}:_a,maskInputFn=options.maskInputFn,_b=options.dataURLOptions,dataURLOptions=void 0===_b?{}:_b,_b=options.inlineImages,recordCanvas=options.recordCanvas,keepIframeSrcFn=options.keepIframeSrcFn,_c=options.newlyAddedElement,_c=void 0!==_c&&_c,options=options.rootId,blockClass=function(element,blockClass,blockSelector){if("string"==typeof blockClass){if(element.classList.contains(blockClass))return!0}else for(var eIndex=element.classList.length;eIndex--;){var className=element.classList[eIndex];if(blockClass.test(className))return!0}return!!blockSelector&&element.matches(blockSelector)}(n,blockClass,blockSelector),tagName=function(element){return element instanceof HTMLFormElement?"form":(element=element.tagName.toLowerCase().trim(),tagNameRegex.test(element)?"div":element)}(n),attributes={},len=n.attributes.length,i=0;i<len;i++){var attr=n.attributes[i];attributes[attr.name]=transformAttribute(doc,tagName,attr.name,attr.value)}"link"===tagName&&inlineStylesheet&&(blockSelector=Array.from(doc.styleSheets).find(function(s){return s.href===n.href}),cssText=null,cssText=blockSelector?getCssRulesString(blockSelector):cssText)&&(delete attributes.rel,delete attributes.href,attributes._cssText=absoluteToStylesheet(cssText,blockSelector.href));"style"===tagName&&n.sheet&&!(n.innerText||n.textContent||"").trim().length&&(cssText=getCssRulesString(n.sheet))&&(attributes._cssText=absoluteToStylesheet(cssText,getHref()));"input"!==tagName&&"textarea"!==tagName&&"select"!==tagName||(inlineStylesheet=n.value,blockSelector=n.checked,"radio"!==attributes.type&&"checkbox"!==attributes.type&&"submit"!==attributes.type&&"button"!==attributes.type&&inlineStylesheet?attributes.value=maskInputValue({type:attributes.type,tagName:tagName,value:inlineStylesheet,maskInputOptions:_a,maskInputFn:maskInputFn}):blockSelector&&(attributes.checked=blockSelector));"option"===tagName&&(n.selected&&!_a.select?attributes.selected=!0:delete attributes.selected);{var cssText;"canvas"===tagName&&recordCanvas&&("2d"===n.__context?function(canvas){var ctx=canvas.getContext("2d");if(ctx)for(var x=0;x<canvas.width;x+=50)for(var y=0;y<canvas.height;y+=50){var getImageData=ctx.getImageData,getImageData=ORIGINAL_ATTRIBUTE_NAME in getImageData?getImageData[ORIGINAL_ATTRIBUTE_NAME]:getImageData;if(new Uint32Array(getImageData.call(ctx,x,y,Math.min(50,canvas.width-x),Math.min(50,canvas.height-y)).data.buffer).some(function(pixel){return 0!==pixel}))return}return 1}(n)||(attributes.rr_dataURL=n.toDataURL(dataURLOptions.type,dataURLOptions.quality)):"__context"in n||(cssText=n.toDataURL(dataURLOptions.type,dataURLOptions.quality),(inlineStylesheet=document.createElement("canvas")).width=n.width,inlineStylesheet.height=n.height,maskInputFn=inlineStylesheet.toDataURL(dataURLOptions.type,dataURLOptions.quality),cssText!==maskInputFn&&(attributes.rr_dataURL=cssText)))}{var image_1,oldValue_1;"img"===tagName&&_b&&(canvasService||(canvasService=doc.createElement("canvas"),canvasCtx=canvasService.getContext("2d")),oldValue_1=(image_1=n).crossOrigin,image_1.crossOrigin="anonymous",blockSelector=function(){try{canvasService.width=image_1.naturalWidth,canvasService.height=image_1.naturalHeight,canvasCtx.drawImage(image_1,0,0),attributes.rr_dataURL=canvasService.toDataURL(dataURLOptions.type,dataURLOptions.quality)}catch(err){console.warn("Cannot inline img src=".concat(image_1.currentSrc,"! Error: ").concat(err))}oldValue_1?attributes.crossOrigin=oldValue_1:image_1.removeAttribute("crossorigin")},image_1.complete&&0!==image_1.naturalWidth?blockSelector():image_1.onload=blockSelector)}"audio"!==tagName&&"video"!==tagName||(attributes.rr_mediaState=n.paused?"paused":"played",attributes.rr_mediaCurrentTime=n.currentTime);_c||(n.scrollLeft&&(attributes.rr_scrollLeft=n.scrollLeft),n.scrollTop&&(attributes.rr_scrollTop=n.scrollTop));blockClass&&(_a=n.getBoundingClientRect(),recordCanvas=_a.width,inlineStylesheet=_a.height,attributes={class:attributes.class,rr_width:"".concat(recordCanvas,"px"),rr_height:"".concat(inlineStylesheet,"px")});"iframe"!==tagName||keepIframeSrcFn(attributes.src)||(n.contentDocument||(attributes.rr_src=attributes.src),delete attributes.src);return{type:NodeType.Element,tagName:tagName,attributes:attributes,childNodes:[],isSVG:function(el){return Boolean("svg"===el.tagName||el.ownerSVGElement)}(n)||void 0,needBlock:blockClass,rootId:options}}(n,{doc:doc,blockClass:blockClass,blockSelector:blockSelector,inlineStylesheet:inlineStylesheet,maskInputOptions:maskInputOptions,maskInputFn:maskInputFn,dataURLOptions:dataURLOptions,inlineImages:inlineImages,recordCanvas:recordCanvas,keepIframeSrcFn:keepIframeSrcFn,newlyAddedElement:newlyAddedElement,rootId:rootId});case n.TEXT_NODE:return function(n,options){var _a,maskTextClass=options.maskTextClass,maskTextSelector=options.maskTextSelector,maskTextFn=options.maskTextFn,options=options.rootId,parentTagName=n.parentNode&&n.parentNode.tagName,textContent=n.textContent,isStyle="STYLE"===parentTagName||void 0,parentTagName="SCRIPT"===parentTagName||void 0;if(isStyle&&textContent){try{n.nextSibling||n.previousSibling||null!=(_a=n.parentNode.sheet)&&_a.cssRules&&(textContent=function(sheet){return sheet.cssRules?Array.from(sheet.cssRules).map(function(rule){return rule.cssText||""}).join(""):""}(n.parentNode.sheet))}catch(err){console.warn("Cannot get CSS styles from text's parentNode. Error: ".concat(err),n)}textContent=absoluteToStylesheet(textContent,getHref())}parentTagName&&(textContent="SCRIPT_PLACEHOLDER");!isStyle&&!parentTagName&&textContent&&needMaskingText(n,maskTextClass,maskTextSelector)&&(textContent=maskTextFn?maskTextFn(textContent):textContent.replace(/[\S]/g,"*"));return{type:NodeType.Text,textContent:textContent||"",isStyle:isStyle,rootId:options}}(n,{maskTextClass:maskTextClass,maskTextSelector:maskTextSelector,maskTextFn:maskTextFn,rootId:rootId});case n.CDATA_SECTION_NODE:return{type:NodeType.CDATA,textContent:"",rootId:rootId};case n.COMMENT_NODE:return{type:NodeType.Comment,textContent:n.textContent||"",rootId:rootId};default:return!1}}function lowerIfExists(maybeAttr){return void 0===maybeAttr?"":maybeAttr.toLowerCase()}function serializeNodeWithId(n,options){var doc=options.doc,mirror=options.mirror,blockClass=options.blockClass,blockSelector=options.blockSelector,maskTextClass=options.maskTextClass,maskTextSelector=options.maskTextSelector,_a=options.skipChild,_a=void 0!==_a&&_a,_b=options.inlineStylesheet,inlineStylesheet=void 0===_b||_b,_b=options.maskInputOptions,maskInputOptions=void 0===_b?{}:_b,maskTextFn=options.maskTextFn,maskInputFn=options.maskInputFn,slimDOMOptions=options.slimDOMOptions,_b=options.dataURLOptions,dataURLOptions=void 0===_b?{}:_b,_b=options.inlineImages,inlineImages=void 0!==_b&&_b,_b=options.recordCanvas,recordCanvas=void 0!==_b&&_b,onSerialize=options.onSerialize,onIframeLoad=options.onIframeLoad,_b=options.iframeLoadTimeout,iframeLoadTimeout=void 0===_b?5e3:_b,onStylesheetLoad=options.onStylesheetLoad,_b=options.stylesheetLoadTimeout,stylesheetLoadTimeout=void 0===_b?5e3:_b,_b=options.keepIframeSrcFn,keepIframeSrcFn=void 0===_b?function(){return!1}:_b,_b=options.newlyAddedElement,options=options.preserveWhiteSpace,preserveWhiteSpace=void 0===options||options,options=serializeNode(n,{doc:doc,mirror:mirror,blockClass:blockClass,blockSelector:blockSelector,maskTextClass:maskTextClass,maskTextSelector:maskTextSelector,inlineStylesheet:inlineStylesheet,maskInputOptions:maskInputOptions,maskTextFn:maskTextFn,maskInputFn:maskInputFn,dataURLOptions:dataURLOptions,inlineImages:inlineImages,recordCanvas:recordCanvas,keepIframeSrcFn:keepIframeSrcFn,newlyAddedElement:void 0!==_b&&_b});if(!options)return console.warn(n,"not serialized"),null;var _b=mirror.hasNode(n)?mirror.getId(n):!function(sn,slimDOMOptions){if(slimDOMOptions.comment&&sn.type===NodeType.Comment)return 1;if(sn.type===NodeType.Element){if(slimDOMOptions.script&&("script"===sn.tagName||"link"===sn.tagName&&"preload"===sn.attributes.rel&&"script"===sn.attributes.as||"link"===sn.tagName&&"prefetch"===sn.attributes.rel&&"string"==typeof sn.attributes.href&&sn.attributes.href.endsWith(".js")))return 1;if(slimDOMOptions.headFavicon&&("link"===sn.tagName&&"shortcut icon"===sn.attributes.rel||"meta"===sn.tagName&&(lowerIfExists(sn.attributes.name).match(/^msapplication-tile(image|color)$/)||"application-name"===lowerIfExists(sn.attributes.name)||"icon"===lowerIfExists(sn.attributes.rel)||"apple-touch-icon"===lowerIfExists(sn.attributes.rel)||"shortcut icon"===lowerIfExists(sn.attributes.rel))))return 1;if("meta"===sn.tagName){if(slimDOMOptions.headMetaDescKeywords&&lowerIfExists(sn.attributes.name).match(/^description|keywords$/))return 1;if(slimDOMOptions.headMetaSocial&&(lowerIfExists(sn.attributes.property).match(/^(og|twitter|fb):/)||lowerIfExists(sn.attributes.name).match(/^(og|twitter):/)||"pinterest"===lowerIfExists(sn.attributes.name)))return 1;if(slimDOMOptions.headMetaRobots&&("robots"===lowerIfExists(sn.attributes.name)||"googlebot"===lowerIfExists(sn.attributes.name)||"bingbot"===lowerIfExists(sn.attributes.name)))return 1;if(slimDOMOptions.headMetaHttpEquiv&&void 0!==sn.attributes["http-equiv"])return 1;if(slimDOMOptions.headMetaAuthorship&&("author"===lowerIfExists(sn.attributes.name)||"generator"===lowerIfExists(sn.attributes.name)||"framework"===lowerIfExists(sn.attributes.name)||"publisher"===lowerIfExists(sn.attributes.name)||"progid"===lowerIfExists(sn.attributes.name)||lowerIfExists(sn.attributes.property).match(/^article:/)||lowerIfExists(sn.attributes.property).match(/^product:/)))return 1;if(slimDOMOptions.headMetaVerification&&("google-site-verification"===lowerIfExists(sn.attributes.name)||"yandex-verification"===lowerIfExists(sn.attributes.name)||"csrf-token"===lowerIfExists(sn.attributes.name)||"p:domain_verify"===lowerIfExists(sn.attributes.name)||"verify-v1"===lowerIfExists(sn.attributes.name)||"verification"===lowerIfExists(sn.attributes.name)||"shopify-checkout-api-token"===lowerIfExists(sn.attributes.name)))return 1}}}(options,slimDOMOptions)&&(preserveWhiteSpace||options.type!==NodeType.Text||options.isStyle||options.textContent.replace(/^\s+|\s+$/gm,"").length)?_id++:IGNORED_NODE,serializedNode=Object.assign(options,{id:_b});if(mirror.add(n,serializedNode),_b===IGNORED_NODE)return null;onSerialize&&onSerialize(n);options=!_a;if(serializedNode.type===NodeType.Element&&(options=options&&!serializedNode.needBlock,delete serializedNode.needBlock,_b=n.shadowRoot)&&isNativeShadowDom(_b)&&(serializedNode.isShadowHost=!0),(serializedNode.type===NodeType.Document||serializedNode.type===NodeType.Element)&&options){slimDOMOptions.headWhitespace&&serializedNode.type===NodeType.Element&&"head"===serializedNode.tagName&&(preserveWhiteSpace=!1);for(var bypassOptions={doc:doc,mirror:mirror,blockClass:blockClass,blockSelector:blockSelector,maskTextClass:maskTextClass,maskTextSelector:maskTextSelector,skipChild:_a,inlineStylesheet:inlineStylesheet,maskInputOptions:maskInputOptions,maskTextFn:maskTextFn,maskInputFn:maskInputFn,slimDOMOptions:slimDOMOptions,dataURLOptions:dataURLOptions,inlineImages:inlineImages,recordCanvas:recordCanvas,preserveWhiteSpace:preserveWhiteSpace,onSerialize:onSerialize,onIframeLoad:onIframeLoad,iframeLoadTimeout:iframeLoadTimeout,onStylesheetLoad:onStylesheetLoad,stylesheetLoadTimeout:stylesheetLoadTimeout,keepIframeSrcFn:keepIframeSrcFn},_i=0,_m=Array.from(n.childNodes);_i<_m.length;_i++)(serializedChildNode=serializeNodeWithId(_m[_i],bypassOptions))&&serializedNode.childNodes.push(serializedChildNode);if(function(n){return n.nodeType===n.ELEMENT_NODE}(n)&&n.shadowRoot)for(var serializedChildNode,_o=0,_p=Array.from(n.shadowRoot.childNodes);_o<_p.length;_o++)(serializedChildNode=serializeNodeWithId(_p[_o],bypassOptions))&&(isNativeShadowDom(n.shadowRoot)&&(serializedChildNode.isShadow=!0),serializedNode.childNodes.push(serializedChildNode))}return n.parentNode&&isShadowRoot(n.parentNode)&&isNativeShadowDom(n.parentNode)&&(serializedNode.isShadow=!0),serializedNode.type===NodeType.Element&&"iframe"===serializedNode.tagName&&function(iframeEl,listener,iframeLoadTimeout){var win=iframeEl.contentWindow;if(win){var readyState,timer_1,fired=!1;try{readyState=win.document.readyState}catch(error){return}if("complete"===readyState)return"about:blank"!==win.location.href||"about:blank"===iframeEl.src||""===iframeEl.src?(setTimeout(listener,0),iframeEl.addEventListener("load",listener)):iframeEl.addEventListener("load",listener);timer_1=setTimeout(function(){fired||(listener(),fired=!0)},iframeLoadTimeout),iframeEl.addEventListener("load",function(){clearTimeout(timer_1),fired=!0,listener()})}}(n,function(){var iframeDoc=n.contentDocument;iframeDoc&&onIframeLoad&&(iframeDoc=serializeNodeWithId(iframeDoc,{doc:iframeDoc,mirror:mirror,blockClass:blockClass,blockSelector:blockSelector,maskTextClass:maskTextClass,maskTextSelector:maskTextSelector,skipChild:!1,inlineStylesheet:inlineStylesheet,maskInputOptions:maskInputOptions,maskTextFn:maskTextFn,maskInputFn:maskInputFn,slimDOMOptions:slimDOMOptions,dataURLOptions:dataURLOptions,inlineImages:inlineImages,recordCanvas:recordCanvas,preserveWhiteSpace:preserveWhiteSpace,onSerialize:onSerialize,onIframeLoad:onIframeLoad,iframeLoadTimeout:iframeLoadTimeout,onStylesheetLoad:onStylesheetLoad,stylesheetLoadTimeout:stylesheetLoadTimeout,keepIframeSrcFn:keepIframeSrcFn}))&&onIframeLoad(n,iframeDoc)},iframeLoadTimeout),serializedNode.type===NodeType.Element&&"link"===serializedNode.tagName&&"stylesheet"===serializedNode.attributes.rel&&function(link,listener,styleSheetLoadTimeout){var styleSheetLoaded,timer,fired=!1;try{styleSheetLoaded=link.sheet}catch(error){return}styleSheetLoaded||(timer=setTimeout(function(){fired||(listener(),fired=!0)},styleSheetLoadTimeout),link.addEventListener("load",function(){clearTimeout(timer),fired=!0,listener()}))}(n,function(){var serializedLinkNode;onStylesheetLoad&&(serializedLinkNode=serializeNodeWithId(n,{doc:doc,mirror:mirror,blockClass:blockClass,blockSelector:blockSelector,maskTextClass:maskTextClass,maskTextSelector:maskTextSelector,skipChild:!1,inlineStylesheet:inlineStylesheet,maskInputOptions:maskInputOptions,maskTextFn:maskTextFn,maskInputFn:maskInputFn,slimDOMOptions:slimDOMOptions,dataURLOptions:dataURLOptions,inlineImages:inlineImages,recordCanvas:recordCanvas,preserveWhiteSpace:preserveWhiteSpace,onSerialize:onSerialize,onIframeLoad:onIframeLoad,iframeLoadTimeout:iframeLoadTimeout,onStylesheetLoad:onStylesheetLoad,stylesheetLoadTimeout:stylesheetLoadTimeout,keepIframeSrcFn:keepIframeSrcFn}))&&onStylesheetLoad(n,serializedLinkNode)},stylesheetLoadTimeout),serializedNode}function on(type,fn,target=document){const options={capture:!0,passive:!0};return target.addEventListener(type,fn,options),()=>target.removeEventListener(type,fn,options)}const DEPARTED_MIRROR_ACCESS_WARNING="Please stop import mirror directly. Instead of that,\r\nnow you can use replayer.getMirror() to access the mirror instance of a replayer,\r\nor you can use record.mirror to access the mirror instance during recording.";var NodeType2={map:{},getId(){return console.error(DEPARTED_MIRROR_ACCESS_WARNING),-1},getNode(){return console.error(DEPARTED_MIRROR_ACCESS_WARNING),null},removeNodeFromMap(){console.error(DEPARTED_MIRROR_ACCESS_WARNING)},has(){return console.error(DEPARTED_MIRROR_ACCESS_WARNING),!1},reset(){console.error(DEPARTED_MIRROR_ACCESS_WARNING)}};function throttle(func,wait,options={}){let timeout=null,previous=0;return function(...args){var now=Date.now(),remaining=(previous||!1!==options.leading||(previous=now),wait-(now-previous));const context=this;remaining<=0||wait<remaining?(timeout&&(clearTimeout(timeout),timeout=null),previous=now,func.apply(context,args)):timeout||!1===options.trailing||(timeout=setTimeout(()=>{previous=!1===options.leading?0:Date.now(),timeout=null,func.apply(context,args)},remaining))}}function hookSetter(target,key,d,isRevoked,win=window){const original=win.Object.getOwnPropertyDescriptor(target,key);return win.Object.defineProperty(target,key,isRevoked?d:{set(value){setTimeout(()=>{d.set.call(this,value)},0),original&&original.set&&original.set.call(this,value)}}),()=>hookSetter(target,key,original||{},!0)}function patch(source,name,replacement){try{if(!(name in source))return()=>{};const original=source[name];var wrapped=replacement(original);return"function"==typeof wrapped&&(wrapped.prototype=wrapped.prototype||{},Object.defineProperties(wrapped,{__rrweb_original__:{enumerable:!1,value:original}})),source[name]=wrapped,()=>{source[name]=original}}catch(e){return()=>{}}}function getWindowHeight(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function getWindowWidth(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}function isBlocked(node,blockClass,blockSelector,checkAncestors){if(node){var el=node.nodeType===node.ELEMENT_NODE?node:node.parentElement;if(el){if("string"==typeof blockClass){if(el.classList.contains(blockClass))return!0;if(checkAncestors&&null!==el.closest("."+blockClass))return!0}else if(classMatchesRegex(el,blockClass,checkAncestors))return!0;if(blockSelector){if(node.matches(blockSelector))return!0;if(checkAncestors&&null!==el.closest(blockSelector))return!0}}}return!1}function isIgnored(n,mirror){return mirror.getId(n)===IGNORED_NODE}function isTouchEvent(event){return Boolean(event.changedTouches)}function isSerializedIframe(n,mirror){return Boolean("IFRAME"===n.nodeName&&mirror.getMeta(n))}function isSerializedStylesheet(n,mirror){return Boolean("LINK"===n.nodeName&&n.nodeType===n.ELEMENT_NODE&&n.getAttribute&&"stylesheet"===n.getAttribute("rel")&&mirror.getMeta(n))}function hasShadowRoot(n){return Boolean(null==n?void 0:n.shadowRoot)}"undefined"!=typeof window&&window.Proxy&&window.Reflect&&new Proxy(NodeType2,{get(target,prop,receiver){return"map"===prop&&console.error(DEPARTED_MIRROR_ACCESS_WARNING),Reflect.get(target,prop,receiver)}});class StyleSheetMirror{constructor(){this.id=1,this.styleIDMap=new WeakMap,this.idStyleMap=new Map}getId(stylesheet){return null!=(stylesheet=this.styleIDMap.get(stylesheet))?stylesheet:-1}has(stylesheet){return this.styleIDMap.has(stylesheet)}add(stylesheet,id){if(this.has(stylesheet))return this.getId(stylesheet);let newId;return newId=void 0===id?this.id++:id,this.styleIDMap.set(stylesheet,newId),this.idStyleMap.set(newId,stylesheet),newId}getStyle(id){return this.idStyleMap.get(id)||null}reset(){this.styleIDMap=new WeakMap,this.idStyleMap=new Map,this.id=1}generateId(){return this.id++}}var EventType=(EventType2=>(EventType2[EventType2.DomContentLoaded=0]="DomContentLoaded",EventType2[EventType2.Load=1]="Load",EventType2[EventType2.FullSnapshot=2]="FullSnapshot",EventType2[EventType2.IncrementalSnapshot=3]="IncrementalSnapshot",EventType2[EventType2.Meta=4]="Meta",EventType2[EventType2.Custom=5]="Custom",EventType2[EventType2.Plugin=6]="Plugin",EventType2))({}),IncrementalSource=(IncrementalSource2=>(IncrementalSource2[IncrementalSource2.Mutation=0]="Mutation",IncrementalSource2[IncrementalSource2.MouseMove=1]="MouseMove",IncrementalSource2[IncrementalSource2.MouseInteraction=2]="MouseInteraction",IncrementalSource2[IncrementalSource2.Scroll=3]="Scroll",IncrementalSource2[IncrementalSource2.ViewportResize=4]="ViewportResize",IncrementalSource2[IncrementalSource2.Input=5]="Input",IncrementalSource2[IncrementalSource2.TouchMove=6]="TouchMove",IncrementalSource2[IncrementalSource2.MediaInteraction=7]="MediaInteraction",IncrementalSource2[IncrementalSource2.StyleSheetRule=8]="StyleSheetRule",IncrementalSource2[IncrementalSource2.CanvasMutation=9]="CanvasMutation",IncrementalSource2[IncrementalSource2.Font=10]="Font",IncrementalSource2[IncrementalSource2.Log=11]="Log",IncrementalSource2[IncrementalSource2.Drag=12]="Drag",IncrementalSource2[IncrementalSource2.StyleDeclaration=13]="StyleDeclaration",IncrementalSource2[IncrementalSource2.Selection=14]="Selection",IncrementalSource2[IncrementalSource2.AdoptedStyleSheet=15]="AdoptedStyleSheet",IncrementalSource2))(IncrementalSource||{}),MouseInteractions=(MouseInteractions2=>(MouseInteractions2[MouseInteractions2.MouseUp=0]="MouseUp",MouseInteractions2[MouseInteractions2.MouseDown=1]="MouseDown",MouseInteractions2[MouseInteractions2.Click=2]="Click",MouseInteractions2[MouseInteractions2.ContextMenu=3]="ContextMenu",MouseInteractions2[MouseInteractions2.DblClick=4]="DblClick",MouseInteractions2[MouseInteractions2.Focus=5]="Focus",MouseInteractions2[MouseInteractions2.Blur=6]="Blur",MouseInteractions2[MouseInteractions2.TouchStart=7]="TouchStart",MouseInteractions2[MouseInteractions2.TouchMove_Departed=8]="TouchMove_Departed",MouseInteractions2[MouseInteractions2.TouchEnd=9]="TouchEnd",MouseInteractions2[MouseInteractions2.TouchCancel=10]="TouchCancel",MouseInteractions2))(MouseInteractions||{}),CanvasContext=(CanvasContext2=>(CanvasContext2[CanvasContext2["2D"]=0]="2D",CanvasContext2[CanvasContext2.WebGL=1]="WebGL",CanvasContext2[CanvasContext2.WebGL2=2]="WebGL2",CanvasContext2))({}),MediaInteractions=(MediaInteractions2=>(MediaInteractions2[MediaInteractions2.Play=0]="Play",MediaInteractions2[MediaInteractions2.Pause=1]="Pause",MediaInteractions2[MediaInteractions2.Seeked=2]="Seeked",MediaInteractions2[MediaInteractions2.VolumeChange=3]="VolumeChange",MediaInteractions2[MediaInteractions2.RateChange=4]="RateChange",MediaInteractions2))(MediaInteractions||{});class DoubleLinkedList{constructor(){this.length=0,this.head=null}get(position){if(position>=this.length)throw new Error("Position outside of list range");let current=this.head;for(let index=0;index<position;index++)current=(null==current?void 0:current.next)||null;return current}addNode(n){var node={value:n,previous:null,next:null};if(n.__ln=node,n.previousSibling&&"__ln"in n.previousSibling){var current=n.previousSibling.__ln.next;node.next=current,node.previous=n.previousSibling.__ln,n.previousSibling.__ln.next=node,current&&(current.previous=node)}else if(n.nextSibling&&"__ln"in n.nextSibling&&n.nextSibling.__ln.previous){const current=n.nextSibling.__ln.previous;node.previous=current,node.next=n.nextSibling.__ln,n.nextSibling.__ln.previous=node,current&&(current.next=node)}else this.head&&(this.head.previous=node),node.next=this.head,this.head=node;this.length++}removeNode(n){var current=n.__ln;this.head&&(current.previous?(current.previous.next=current.next,current.next&&(current.next.previous=current.previous)):(this.head=current.next,this.head&&(this.head.previous=null)),n.__ln&&delete n.__ln,this.length--)}}class MutationBuffer{constructor(){this.frozen=!1,this.locked=!1,this.texts=[],this.attributes=[],this.removes=[],this.mapRemoves=[],this.movedMap={},this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.processMutations=mutations=>{mutations.forEach(this.processMutation),this.emit()},this.emit=()=>{if(!this.frozen&&!this.locked){const adds=[],addList=new DoubleLinkedList,getNextId=n=>{let ns=n,nextId=IGNORED_NODE;for(;nextId===IGNORED_NODE;)ns=ns&&ns.nextSibling,nextId=ns&&this.mirror.getId(ns);return nextId};for(var parentId,nextId,pushAdd=n=>{var _c;let shadowHost=null,rootShadowHost=shadowHost=(null==(_a=null==(_a=n.getRootNode)?void 0:_a.call(n))?void 0:_a.nodeType)===Node.DOCUMENT_FRAGMENT_NODE&&n.getRootNode().host?n.getRootNode().host:shadowHost;for(;(null==(_c=null==(_c=null==rootShadowHost?void 0:rootShadowHost.getRootNode)?void 0:_c.call(rootShadowHost))?void 0:_c.nodeType)===Node.DOCUMENT_FRAGMENT_NODE&&rootShadowHost.getRootNode().host;)rootShadowHost=rootShadowHost.getRootNode().host;var nextId,sn,_a=!(this.doc.contains(n)||rootShadowHost&&this.doc.contains(rootShadowHost));if(n.parentNode&&!_a)return _a=isShadowRoot(n.parentNode)?this.mirror.getId(shadowHost):this.mirror.getId(n.parentNode),nextId=getNextId(n),-1===_a||-1===nextId?addList.addNode(n):void((sn=serializeNodeWithId(n,{doc:this.doc,mirror:this.mirror,blockClass:this.blockClass,blockSelector:this.blockSelector,maskTextClass:this.maskTextClass,maskTextSelector:this.maskTextSelector,skipChild:!0,newlyAddedElement:!0,inlineStylesheet:this.inlineStylesheet,maskInputOptions:this.maskInputOptions,maskTextFn:this.maskTextFn,maskInputFn:this.maskInputFn,slimDOMOptions:this.slimDOMOptions,dataURLOptions:this.dataURLOptions,recordCanvas:this.recordCanvas,inlineImages:this.inlineImages,onSerialize:currentN=>{isSerializedIframe(currentN,this.mirror)&&this.iframeManager.addIframe(currentN),isSerializedStylesheet(currentN,this.mirror)&&this.stylesheetManager.trackLinkElement(currentN),hasShadowRoot(n)&&this.shadowDomManager.addShadowRoot(n.shadowRoot,this.doc)},onIframeLoad:(iframe,childSn)=>{this.iframeManager.attachIframe(iframe,childSn),this.shadowDomManager.observeAttachShadow(iframe)},onStylesheetLoad:(link,childSn)=>{this.stylesheetManager.attachLinkElement(link,childSn)}}))&&adds.push({parentId:_a,nextId:nextId,node:sn}))};this.mapRemoves.length;)this.mirror.removeNodeFromMap(this.mapRemoves.shift());for(const n of Array.from(this.movedSet.values()))isParentRemoved(this.removes,n,this.mirror)&&!this.movedSet.has(n.parentNode)||pushAdd(n);for(const n of Array.from(this.addedSet.values()))!isAncestorInSet(this.droppedSet,n)&&!isParentRemoved(this.removes,n,this.mirror)||isAncestorInSet(this.movedSet,n)?pushAdd(n):this.droppedSet.add(n);let candidate=null;for(;addList.length;){let node=null;if(!(node=candidate&&(parentId=this.mirror.getId(candidate.value.parentNode),nextId=getNextId(candidate.value),-1!==parentId)&&-1!==nextId?candidate:node))for(let index=addList.length-1;0<=index;index--){var _node=addList.get(index);if(_node){const parentId=this.mirror.getId(_node.value.parentNode),nextId=getNextId(_node.value);if(-1!==nextId){if(-1!==parentId){node=_node;break}var unhandledNode=_node.value;if(unhandledNode.parentNode&&unhandledNode.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE){unhandledNode=unhandledNode.parentNode.host;if(-1!==this.mirror.getId(unhandledNode)){node=_node;break}}}}}if(!node){for(;addList.head;)addList.removeNode(addList.head.value);break}candidate=node.previous,addList.removeNode(node.value),pushAdd(node.value)}var payload={texts:this.texts.map(text=>({id:this.mirror.getId(text.node),value:text.value})).filter(text=>this.mirror.has(text.id)),attributes:this.attributes.map(attribute=>({id:this.mirror.getId(attribute.node),attributes:attribute.attributes})).filter(attribute=>this.mirror.has(attribute.id)),removes:this.removes,adds:adds};(payload.texts.length||payload.attributes.length||payload.removes.length||payload.adds.length)&&(this.texts=[],this.attributes=[],this.removes=[],this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.movedMap={},this.mutationCb(payload))}},this.processMutation=m=>{if(!isIgnored(m.target,this.mirror))switch(m.type){case"characterData":var value=m.target.textContent;isBlocked(m.target,this.blockClass,this.blockSelector,!1)||value===m.oldValue||this.texts.push({value:needMaskingText(m.target,this.maskTextClass,this.maskTextSelector)&&value?this.maskTextFn?this.maskTextFn(value):value.replace(/[\S]/g,"*"):value,node:m.target});break;case"attributes":{var target=m.target;let value=m.target.getAttribute(m.attributeName);if("value"===m.attributeName&&(value=maskInputValue({maskInputOptions:this.maskInputOptions,tagName:m.target.tagName,type:m.target.getAttribute("type"),value:value,maskInputFn:this.maskInputFn})),isBlocked(m.target,this.blockClass,this.blockSelector,!1)||value===m.oldValue)return;let item=this.attributes.find(a=>a.node===m.target);if("IFRAME"===target.tagName&&"src"===m.attributeName&&!this.keepIframeSrcFn(value)){if(target.contentDocument)return;m.attributeName="rr_src"}if(item||(item={node:m.target,attributes:{}},this.attributes.push(item)),"style"===m.attributeName){var old=this.doc.createElement("span"),styleObj=(m.oldValue&&old.setAttribute("style",m.oldValue),void 0!==item.attributes.style&&null!==item.attributes.style||(item.attributes.style={}),item.attributes.style);for(const pname of Array.from(target.style)){var newValue=target.style.getPropertyValue(pname),newPriority=target.style.getPropertyPriority(pname);newValue===old.style.getPropertyValue(pname)&&newPriority===old.style.getPropertyPriority(pname)||(styleObj[pname]=""===newPriority?newValue:[newValue,newPriority])}for(const pname of Array.from(old.style))""===target.style.getPropertyValue(pname)&&(styleObj[pname]=!1)}else item.attributes[m.attributeName]=transformAttribute(this.doc,target.tagName,m.attributeName,value);break}case"childList":isBlocked(m.target,this.blockClass,this.blockSelector,!0)||(m.addedNodes.forEach(n=>this.genAdds(n,m.target)),m.removedNodes.forEach(n=>{var nodeId=this.mirror.getId(n),parentId=isShadowRoot(m.target)?this.mirror.getId(m.target.host):this.mirror.getId(m.target);isBlocked(m.target,this.blockClass,this.blockSelector,!1)||isIgnored(n,this.mirror)||!function(n,mirror){return-1!==mirror.getId(n)}(n,this.mirror)||(this.addedSet.has(n)?(deepDelete(this.addedSet,n),this.droppedSet.add(n)):this.addedSet.has(m.target)&&-1===nodeId||function isAncestorRemoved(target,mirror){var id;return!isShadowRoot(target)&&(id=mirror.getId(target),!mirror.has(id)||(!target.parentNode||target.parentNode.nodeType!==target.DOCUMENT_NODE)&&(!target.parentNode||isAncestorRemoved(target.parentNode,mirror)))}(m.target,this.mirror)||(this.movedSet.has(n)&&this.movedMap[nodeId+"@"+parentId]?deepDelete(this.movedSet,n):this.removes.push({parentId:parentId,id:nodeId,isShadow:!(!isShadowRoot(m.target)||!isNativeShadowDom(m.target))||void 0})),this.mapRemoves.push(n))}))}},this.genAdds=(n,target)=>{if(this.mirror.hasNode(n)){if(isIgnored(n,this.mirror))return;this.movedSet.add(n);let targetId=null;(targetId=target&&this.mirror.hasNode(target)?this.mirror.getId(target):targetId)&&-1!==targetId&&(this.movedMap[this.mirror.getId(n)+"@"+targetId]=!0)}else this.addedSet.add(n),this.droppedSet.delete(n);isBlocked(n,this.blockClass,this.blockSelector,!1)||n.childNodes.forEach(childN=>this.genAdds(childN))}}init(options){["mutationCb","blockClass","blockSelector","maskTextClass","maskTextSelector","inlineStylesheet","maskInputOptions","maskTextFn","maskInputFn","keepIframeSrcFn","recordCanvas","inlineImages","slimDOMOptions","dataURLOptions","doc","mirror","iframeManager","stylesheetManager","shadowDomManager","canvasManager"].forEach(key=>{this[key]=options[key]})}freeze(){this.frozen=!0,this.canvasManager.freeze()}unfreeze(){this.frozen=!1,this.canvasManager.unfreeze(),this.emit()}isFrozen(){return this.frozen}lock(){this.locked=!0,this.canvasManager.lock()}unlock(){this.locked=!1,this.canvasManager.unlock(),this.emit()}reset(){this.shadowDomManager.reset(),this.canvasManager.reset()}}function deepDelete(addsSet,n){addsSet.delete(n),n.childNodes.forEach(childN=>deepDelete(addsSet,childN))}function isParentRemoved(removes,n,mirror){return 0!==removes.length&&function _isParentRemoved(removes,n,mirror){const parentNode=n["parentNode"];if(!parentNode)return!1;const parentId=mirror.getId(parentNode);if(removes.some(r=>r.id===parentId))return!0;return _isParentRemoved(removes,parentNode,mirror)}(removes,n,mirror)}function isAncestorInSet(set,n){return 0!==set.size&&function _isAncestorInSet(set,n){const parentNode=n["parentNode"];if(!parentNode)return!1;if(set.has(parentNode))return!0;return _isAncestorInSet(set,parentNode)}(set,n)}var __defProp$2=Object.defineProperty,__defProps$2=Object.defineProperties,__getOwnPropDescs$2=Object.getOwnPropertyDescriptors,__getOwnPropSymbols$3=Object.getOwnPropertySymbols,__hasOwnProp$3=Object.prototype.hasOwnProperty,__propIsEnum$3=Object.prototype.propertyIsEnumerable,__defNormalProp$2=(obj,key,value)=>key in obj?__defProp$2(obj,key,{enumerable:!0,configurable:!0,writable:!0,value:value}):obj[key]=value,__spreadValues$2=(a,b)=>{for(var prop in b=b||{})__hasOwnProp$3.call(b,prop)&&__defNormalProp$2(a,prop,b[prop]);if(__getOwnPropSymbols$3)for(var prop of __getOwnPropSymbols$3(b))__propIsEnum$3.call(b,prop)&&__defNormalProp$2(a,prop,b[prop]);return a},__spreadProps$2=(a,b)=>__defProps$2(a,__getOwnPropDescs$2(b));const mutationBuffers=[],isCSSGroupingRuleSupported="undefined"!=typeof CSSGroupingRule,isCSSMediaRuleSupported="undefined"!=typeof CSSMediaRule,isCSSSupportsRuleSupported="undefined"!=typeof CSSSupportsRule,isCSSConditionRuleSupported="undefined"!=typeof CSSConditionRule;function getEventTarget(event){try{if("composedPath"in event){var path=event.composedPath();if(path.length)return path[0]}else if("path"in event&&event.path.length)return event.path[0];return event.target}catch(e){return event.target}}function initMutationObserver(options,rootEl){var mutationBuffer=new MutationBuffer;mutationBuffers.push(mutationBuffer),mutationBuffer.init(options);let mutationObserverCtor=window.MutationObserver||window.__rrMutationObserver;var _b=null==(_b=null==(options=null==window?void 0:window.Zone)?void 0:options.__symbol__)?void 0:_b.call(options,"MutationObserver"),options=new(mutationObserverCtor=_b&&window[_b]?window[_b]:mutationObserverCtor)(mutationBuffer.processMutations.bind(mutationBuffer));return options.observe(rootEl,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),options}function initMouseInteractionObserver({mouseInteractionCb,doc,mirror,blockClass,blockSelector,sampling}){if(!1===sampling.mouseInteraction)return()=>{};const disableMap=!0===sampling.mouseInteraction||void 0===sampling.mouseInteraction?{}:sampling.mouseInteraction,handlers=[];return Object.keys(MouseInteractions).filter(key=>Number.isNaN(Number(key))&&!key.endsWith("_Departed")&&!1!==disableMap[key]).forEach(eventKey=>{var eventName=eventKey.toLowerCase(),eventKey=(eventKey=>event=>{var clientY,target=getEventTarget(event);isBlocked(target,blockClass,blockSelector,!0)||(event=isTouchEvent(event)?event.changedTouches[0]:event)&&(target=mirror.getId(target),{clientX:event,clientY}=event,mouseInteractionCb({type:MouseInteractions[eventKey],id:target,x:event,y:clientY}))})(eventKey);handlers.push(on(eventName,eventKey,doc))}),()=>{handlers.forEach(h=>h())}}function initScrollObserver({scrollCb,doc,mirror,blockClass,blockSelector,sampling}){return on("scroll",throttle(evt=>{var id,scrollEl,evt=getEventTarget(evt);evt&&!isBlocked(evt,blockClass,blockSelector,!0)&&(id=mirror.getId(evt),evt===doc?(scrollEl=doc.scrollingElement||doc.documentElement,scrollCb({id:id,x:scrollEl.scrollLeft,y:scrollEl.scrollTop})):scrollCb({id:id,x:evt.scrollLeft,y:evt.scrollTop}))},sampling.scroll||100),doc)}function wrapEventWithUserTriggeredFlag(v,enable){v=__spreadValues$2({},v);return enable||delete v.userTriggered,v}const INPUT_TAGS=["INPUT","TEXTAREA","SELECT"],lastInputValueMap=new WeakMap;function getNestedCSSRulePositions(rule){var pos=[];if(isCSSGroupingRuleSupported&&rule.parentRule instanceof CSSGroupingRule||isCSSMediaRuleSupported&&rule.parentRule instanceof CSSMediaRule||isCSSSupportsRuleSupported&&rule.parentRule instanceof CSSSupportsRule||isCSSConditionRuleSupported&&rule.parentRule instanceof CSSConditionRule){var index=Array.from(rule.parentRule.cssRules).indexOf(rule);pos.unshift(index)}else if(rule.parentStyleSheet){const rules=Array.from(rule.parentStyleSheet.cssRules),index=rules.indexOf(rule);pos.unshift(index)}return pos}function getIdAndStyleId(sheet,mirror,styleMirror){let id,styleId;return sheet?(sheet.ownerNode?id=mirror.getId(sheet.ownerNode):styleId=styleMirror.getId(sheet),{styleId:styleId,id:id}):{}}function initAdoptedStyleSheetObserver({mirror,stylesheetManager},host){let hostId=null;hostId="#document"===host.nodeName?mirror.getId(host):mirror.getId(host.host);mirror="#document"===host.nodeName?null==(mirror=host.defaultView)?void 0:mirror.Document:null==(mirror=null==(mirror=host.ownerDocument)?void 0:mirror.defaultView)?void 0:mirror.ShadowRoot;const originalPropertyDescriptor=Object.getOwnPropertyDescriptor(null==mirror?void 0:mirror.prototype,"adoptedStyleSheets");return null!==hostId&&-1!==hostId&&mirror&&originalPropertyDescriptor?(Object.defineProperty(host,"adoptedStyleSheets",{configurable:originalPropertyDescriptor.configurable,enumerable:originalPropertyDescriptor.enumerable,get(){var _a2;return null==(_a2=originalPropertyDescriptor.get)?void 0:_a2.call(this)},set(sheets){var _a2=null==(_a2=originalPropertyDescriptor.set)?void 0:_a2.call(this,sheets);if(null!==hostId&&-1!==hostId)try{stylesheetManager.adoptStyleSheets(sheets,hostId)}catch(e){}return _a2}}),()=>{Object.defineProperty(host,"adoptedStyleSheets",{configurable:originalPropertyDescriptor.configurable,enumerable:originalPropertyDescriptor.enumerable,get:originalPropertyDescriptor.get,set:originalPropertyDescriptor.set})}):()=>{}}function initObservers(o,hooks={}){var currentWindow=o.doc.defaultView;if(!currentWindow)return()=>{};!function(o,hooks){const{mutationCb,mousemoveCb,mouseInteractionCb,scrollCb,viewportResizeCb,inputCb,mediaInteractionCb,styleSheetRuleCb,styleDeclarationCb,canvasMutationCb,fontCb,selectionCb}=o;o.mutationCb=(...p)=>{hooks.mutation&&hooks.mutation(...p),mutationCb(...p)},o.mousemoveCb=(...p)=>{hooks.mousemove&&hooks.mousemove(...p),mousemoveCb(...p)},o.mouseInteractionCb=(...p)=>{hooks.mouseInteraction&&hooks.mouseInteraction(...p),mouseInteractionCb(...p)},o.scrollCb=(...p)=>{hooks.scroll&&hooks.scroll(...p),scrollCb(...p)},o.viewportResizeCb=(...p)=>{hooks.viewportResize&&hooks.viewportResize(...p),viewportResizeCb(...p)},o.inputCb=(...p)=>{hooks.input&&hooks.input(...p),inputCb(...p)},o.mediaInteractionCb=(...p)=>{hooks.mediaInteaction&&hooks.mediaInteaction(...p),mediaInteractionCb(...p)},o.styleSheetRuleCb=(...p)=>{hooks.styleSheetRule&&hooks.styleSheetRule(...p),styleSheetRuleCb(...p)},o.styleDeclarationCb=(...p)=>{hooks.styleDeclaration&&hooks.styleDeclaration(...p),styleDeclarationCb(...p)},o.canvasMutationCb=(...p)=>{hooks.canvasMutation&&hooks.canvasMutation(...p),canvasMutationCb(...p)},o.fontCb=(...p)=>{hooks.font&&hooks.font(...p),fontCb(...p)},o.selectionCb=(...p)=>{hooks.selection&&hooks.selection(...p),selectionCb(...p)}}(o,hooks);const mutationObserver=initMutationObserver(o,o.doc),mousemoveHandler=function({mousemoveCb,sampling,doc,mirror}){if(!1===sampling.mousemove)return()=>{};var threshold="number"==typeof sampling.mousemove?sampling.mousemove:50,sampling="number"==typeof sampling.mousemoveCallback?sampling.mousemoveCallback:500;let positions=[],timeBaseline;const wrappedCb=throttle(source=>{const totalOffset=Date.now()-timeBaseline;mousemoveCb(positions.map(p=>(p.timeOffset-=totalOffset,p)),source),positions=[],timeBaseline=null},sampling),handlers=[on("mousemove",sampling=throttle(evt=>{var target=getEventTarget(evt),{clientX,clientY}=isTouchEvent(evt)?evt.changedTouches[0]:evt;timeBaseline=timeBaseline||Date.now(),positions.push({x:clientX,y:clientY,id:mirror.getId(target),timeOffset:Date.now()-timeBaseline}),wrappedCb("undefined"!=typeof DragEvent&&evt instanceof DragEvent?IncrementalSource.Drag:evt instanceof MouseEvent?IncrementalSource.MouseMove:IncrementalSource.TouchMove)},threshold,{trailing:!1}),doc),on("touchmove",sampling,doc),on("drag",sampling,doc)];return()=>{handlers.forEach(h=>h())}}(o),mouseInteractionHandler=initMouseInteractionObserver(o),scrollHandler=initScrollObserver(o),viewportResizeHandler=function({viewportResizeCb}){let lastH=-1,lastW=-1;return on("resize",throttle(()=>{var height=getWindowHeight(),width=getWindowWidth();lastH===height&&lastW===width||(viewportResizeCb({width:Number(width),height:Number(height)}),lastH=height,lastW=width)},200),window)}(o),inputHandler=function({inputCb,doc,mirror,blockClass,blockSelector,ignoreClass,maskInputOptions,maskInputFn,sampling,userTriggeredOnInput}){function eventHandler(event){let target=getEventTarget(event);event=event.isTrusted;if((target=target&&"OPTION"===target.tagName?target.parentElement:target)&&target.tagName&&!(INPUT_TAGS.indexOf(target.tagName)<0)&&!isBlocked(target,blockClass,blockSelector,!0)){var type=target.type;if(!target.classList.contains(ignoreClass)){let text=target.value,isChecked=!1;"radio"===type||"checkbox"===type?isChecked=target.checked:(maskInputOptions[target.tagName.toLowerCase()]||maskInputOptions[type])&&(text=maskInputValue({maskInputOptions:maskInputOptions,tagName:target.tagName,type:type,value:text,maskInputFn:maskInputFn})),cbWithDedup(target,wrapEventWithUserTriggeredFlag({text:text,isChecked:isChecked,userTriggered:event},userTriggeredOnInput));event=target.name;"radio"===type&&event&&isChecked&&doc.querySelectorAll(`input[type="radio"][name="${event}"]`).forEach(el=>{el!==target&&cbWithDedup(el,wrapEventWithUserTriggeredFlag({text:el.value,isChecked:!isChecked,userTriggered:!1},userTriggeredOnInput))})}}}function cbWithDedup(target,v){var lastInputValue=lastInputValueMap.get(target);lastInputValue&&lastInputValue.text===v.text&&lastInputValue.isChecked===v.isChecked||(lastInputValueMap.set(target,v),lastInputValue=mirror.getId(target),inputCb(__spreadProps$2(__spreadValues$2({},v),{id:lastInputValue})))}var hookProperties;const handlers=("last"===sampling.input?["change"]:["input","change"]).map(eventName=>on(eventName,eventHandler,doc)),currentWindow=doc.defaultView;return currentWindow?(sampling=currentWindow.Object.getOwnPropertyDescriptor(currentWindow.HTMLInputElement.prototype,"value"),hookProperties=[[currentWindow.HTMLInputElement.prototype,"value"],[currentWindow.HTMLInputElement.prototype,"checked"],[currentWindow.HTMLSelectElement.prototype,"value"],[currentWindow.HTMLTextAreaElement.prototype,"value"],[currentWindow.HTMLSelectElement.prototype,"selectedIndex"],[currentWindow.HTMLOptionElement.prototype,"selected"]],sampling&&sampling.set&&handlers.push(...hookProperties.map(p=>hookSetter(p[0],p[1],{set(){eventHandler({target:this})}},!1,currentWindow))),()=>{handlers.forEach(h=>h())}):()=>{handlers.forEach(h=>h())}}(o),mediaInteractionHandler=function({mediaInteractionCb,blockClass,blockSelector,mirror,sampling}){var handler=type=>throttle(event=>{var currentTime,volume,muted,playbackRate,event=getEventTarget(event);event&&!isBlocked(event,blockClass,blockSelector,!0)&&({currentTime,volume,muted,playbackRate}=event,mediaInteractionCb({type:type,id:mirror.getId(event),currentTime:currentTime,volume:volume,muted:muted,playbackRate:playbackRate}))},sampling.media||500);const handlers=[on("play",handler(MediaInteractions.Play)),on("pause",handler(MediaInteractions.Pause)),on("seeked",handler(MediaInteractions.Seeked)),on("volumechange",handler(MediaInteractions.VolumeChange)),on("ratechange",handler(MediaInteractions.RateChange))];return()=>{handlers.forEach(h=>h())}}(o),styleSheetObserver=function({styleSheetRuleCb,mirror,stylesheetManager},{win}){const insertRule=win.CSSStyleSheet.prototype.insertRule,deleteRule=(win.CSSStyleSheet.prototype.insertRule=function(rule,index){var{id,styleId}=getIdAndStyleId(this,mirror,stylesheetManager.styleMirror);return(id&&-1!==id||styleId&&-1!==styleId)&&styleSheetRuleCb({id:id,styleId:styleId,adds:[{rule:rule,index:index}]}),insertRule.apply(this,[rule,index])},win.CSSStyleSheet.prototype.deleteRule);win.CSSStyleSheet.prototype.deleteRule=function(index){var{id,styleId}=getIdAndStyleId(this,mirror,stylesheetManager.styleMirror);return(id&&-1!==id||styleId&&-1!==styleId)&&styleSheetRuleCb({id:id,styleId:styleId,removes:[{index:index}]}),deleteRule.apply(this,[index])};let replace;win.CSSStyleSheet.prototype.replace&&(replace=win.CSSStyleSheet.prototype.replace,win.CSSStyleSheet.prototype.replace=function(text){var{id,styleId}=getIdAndStyleId(this,mirror,stylesheetManager.styleMirror);return(id&&-1!==id||styleId&&-1!==styleId)&&styleSheetRuleCb({id:id,styleId:styleId,replace:text}),replace.apply(this,[text])});let replaceSync;win.CSSStyleSheet.prototype.replaceSync&&(replaceSync=win.CSSStyleSheet.prototype.replaceSync,win.CSSStyleSheet.prototype.replaceSync=function(text){var{id,styleId}=getIdAndStyleId(this,mirror,stylesheetManager.styleMirror);return(id&&-1!==id||styleId&&-1!==styleId)&&styleSheetRuleCb({id:id,styleId:styleId,replaceSync:text}),replaceSync.apply(this,[text])});const supportedNestedCSSRuleTypes={},unmodifiedFunctions=(isCSSGroupingRuleSupported?supportedNestedCSSRuleTypes.CSSGroupingRule=win.CSSGroupingRule:(isCSSMediaRuleSupported&&(supportedNestedCSSRuleTypes.CSSMediaRule=win.CSSMediaRule),isCSSConditionRuleSupported&&(supportedNestedCSSRuleTypes.CSSConditionRule=win.CSSConditionRule),isCSSSupportsRuleSupported&&(supportedNestedCSSRuleTypes.CSSSupportsRule=win.CSSSupportsRule)),{});return Object.entries(supportedNestedCSSRuleTypes).forEach(([typeKey,type])=>{unmodifiedFunctions[typeKey]={insertRule:type.prototype.insertRule,deleteRule:type.prototype.deleteRule},type.prototype.insertRule=function(rule,index){var{id,styleId}=getIdAndStyleId(this.parentStyleSheet,mirror,stylesheetManager.styleMirror);return(id&&-1!==id||styleId&&-1!==styleId)&&styleSheetRuleCb({id:id,styleId:styleId,adds:[{rule:rule,index:[...getNestedCSSRulePositions(this),index||0]}]}),unmodifiedFunctions[typeKey].insertRule.apply(this,[rule,index])},type.prototype.deleteRule=function(index){var{id,styleId}=getIdAndStyleId(this.parentStyleSheet,mirror,stylesheetManager.styleMirror);return(id&&-1!==id||styleId&&-1!==styleId)&&styleSheetRuleCb({id:id,styleId:styleId,removes:[{index:[...getNestedCSSRulePositions(this),index]}]}),unmodifiedFunctions[typeKey].deleteRule.apply(this,[index])}}),()=>{win.CSSStyleSheet.prototype.insertRule=insertRule,win.CSSStyleSheet.prototype.deleteRule=deleteRule,replace&&(win.CSSStyleSheet.prototype.replace=replace),replaceSync&&(win.CSSStyleSheet.prototype.replaceSync=replaceSync),Object.entries(supportedNestedCSSRuleTypes).forEach(([typeKey,type])=>{type.prototype.insertRule=unmodifiedFunctions[typeKey].insertRule,type.prototype.deleteRule=unmodifiedFunctions[typeKey].deleteRule})}}(o,{win:currentWindow}),adoptedStyleSheetObserver=initAdoptedStyleSheetObserver(o,o.doc),styleDeclarationObserver=function({styleDeclarationCb,mirror,ignoreCSSAttributes,stylesheetManager},{win}){const setProperty=win.CSSStyleDeclaration.prototype.setProperty,removeProperty=(win.CSSStyleDeclaration.prototype.setProperty=function(property,value,priority){var _a,styleId;return!ignoreCSSAttributes.has(property)&&({id:_a,styleId}=getIdAndStyleId(null==(_a=this.parentRule)?void 0:_a.parentStyleSheet,mirror,stylesheetManager.styleMirror),_a&&-1!==_a||styleId&&-1!==styleId)&&styleDeclarationCb({id:_a,styleId:styleId,set:{property:property,value:value,priority:priority},index:getNestedCSSRulePositions(this.parentRule)}),setProperty.apply(this,[property,value,priority])},win.CSSStyleDeclaration.prototype.removeProperty);return win.CSSStyleDeclaration.prototype.removeProperty=function(property){var _a,styleId;return!ignoreCSSAttributes.has(property)&&({id:_a,styleId}=getIdAndStyleId(null==(_a=this.parentRule)?void 0:_a.parentStyleSheet,mirror,stylesheetManager.styleMirror),_a&&-1!==_a||styleId&&-1!==styleId)&&styleDeclarationCb({id:_a,styleId:styleId,remove:{property:property},index:getNestedCSSRulePositions(this.parentRule)}),removeProperty.apply(this,[property])},()=>{win.CSSStyleDeclaration.prototype.setProperty=setProperty,win.CSSStyleDeclaration.prototype.removeProperty=removeProperty}}(o,{win:currentWindow}),fontObserver=o.collectFonts?function({fontCb,doc}){const win=doc.defaultView;if(!win)return()=>{};const handlers=[],fontMap=new WeakMap,originalFontFace=win.FontFace;return win.FontFace=function(family,source,descriptors){var fontFace=new originalFontFace(family,source,descriptors);return fontMap.set(fontFace,{family:family,buffer:"string"!=typeof source,descriptors:descriptors,fontSource:"string"==typeof source?source:JSON.stringify(Array.from(new Uint8Array(source)))}),fontFace},doc=patch(doc.fonts,"add",function(original){return function(fontFace){return setTimeout(()=>{var p=fontMap.get(fontFace);p&&(fontCb(p),fontMap.delete(fontFace))},0),original.apply(this,[fontFace])}}),handlers.push(()=>{win.FontFace=originalFontFace}),handlers.push(doc),()=>{handlers.forEach(h=>h())}}(o):()=>{},selectionObserver=function(param){const{doc,mirror,blockClass,blockSelector,selectionCb}=param;let collapsed=!0;return(param=()=>{var selection=doc.getSelection();if(!(!selection||collapsed&&null!=selection&&selection.isCollapsed)){collapsed=selection.isCollapsed||!1;var ranges=[],count=selection.rangeCount||0;for(let i=0;i<count;i++){var{startContainer,startOffset,endContainer,endOffset}=selection.getRangeAt(i);isBlocked(startContainer,blockClass,blockSelector,!0)||isBlocked(endContainer,blockClass,blockSelector,!0)||ranges.push({start:mirror.getId(startContainer),startOffset:startOffset,end:mirror.getId(endContainer),endOffset:endOffset})}selectionCb({ranges:ranges})}})(),on("selectionchange",param)}(o),pluginHandlers=[];for(const plugin of o.plugins)pluginHandlers.push(plugin.observer(plugin.callback,currentWindow,plugin.options));return()=>{mutationBuffers.forEach(b=>b.reset()),mutationObserver.disconnect(),mousemoveHandler(),mouseInteractionHandler(),scrollHandler(),viewportResizeHandler(),inputHandler(),mediaInteractionHandler(),styleSheetObserver(),adoptedStyleSheetObserver(),styleDeclarationObserver(),fontObserver(),selectionObserver(),pluginHandlers.forEach(h=>h())}}class CrossOriginIframeMirror{constructor(generateIdFn){this.generateIdFn=generateIdFn,this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap}getId(iframe,remoteId,idToRemoteMap,remoteToIdMap){idToRemoteMap=idToRemoteMap||this.getIdToRemoteIdMap(iframe),remoteToIdMap=remoteToIdMap||this.getRemoteIdToIdMap(iframe);let id=idToRemoteMap.get(remoteId);return id||(id=this.generateIdFn(),idToRemoteMap.set(remoteId,id),remoteToIdMap.set(id,remoteId)),id}getIds(iframe,remoteId){const idToRemoteIdMap=this.getIdToRemoteIdMap(iframe),remoteIdToIdMap=this.getRemoteIdToIdMap(iframe);return remoteId.map(id=>this.getId(iframe,id,idToRemoteIdMap,remoteIdToIdMap))}getRemoteId(iframe,id,map){map=map||this.getRemoteIdToIdMap(iframe);return"number"!=typeof id?id:map.get(id)||-1}getRemoteIds(iframe,ids){const remoteIdToIdMap=this.getRemoteIdToIdMap(iframe);return ids.map(id=>this.getRemoteId(iframe,id,remoteIdToIdMap))}reset(iframe){iframe?(this.iframeIdToRemoteIdMap.delete(iframe),this.iframeRemoteIdToIdMap.delete(iframe)):(this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap)}getIdToRemoteIdMap(iframe){let idToRemoteIdMap=this.iframeIdToRemoteIdMap.get(iframe);return idToRemoteIdMap||(idToRemoteIdMap=new Map,this.iframeIdToRemoteIdMap.set(iframe,idToRemoteIdMap)),idToRemoteIdMap}getRemoteIdToIdMap(iframe){let remoteIdToIdMap=this.iframeRemoteIdToIdMap.get(iframe);return remoteIdToIdMap||(remoteIdToIdMap=new Map,this.iframeRemoteIdToIdMap.set(iframe,remoteIdToIdMap)),remoteIdToIdMap}}class IframeManager{constructor(options){this.iframes=new WeakMap,this.crossOriginIframeMap=new WeakMap,this.crossOriginIframeMirror=new CrossOriginIframeMirror(genId),this.mutationCb=options.mutationCb,this.wrappedEmit=options.wrappedEmit,this.stylesheetManager=options.stylesheetManager,this.recordCrossOriginIframes=options.recordCrossOriginIframes,this.crossOriginIframeStyleMirror=new CrossOriginIframeMirror(this.stylesheetManager.styleMirror.generateId.bind(this.stylesheetManager.styleMirror)),this.mirror=options.mirror,this.recordCrossOriginIframes&&window.addEventListener("message",this.handleMessage.bind(this))}addIframe(iframeEl){this.iframes.set(iframeEl,!0),iframeEl.contentWindow&&this.crossOriginIframeMap.set(iframeEl.contentWindow,iframeEl)}addLoadListener(cb){this.loadListener=cb}attachIframe(iframeEl,childSn){this.mutationCb({adds:[{parentId:this.mirror.getId(iframeEl),nextId:null,node:childSn}],removes:[],texts:[],attributes:[],isAttachIframe:!0}),null!=(childSn=this.loadListener)&&childSn.call(this,iframeEl),iframeEl.contentDocument&&iframeEl.contentDocument.adoptedStyleSheets&&0<iframeEl.contentDocument.adoptedStyleSheets.length&&this.stylesheetManager.adoptStyleSheets(iframeEl.contentDocument.adoptedStyleSheets,this.mirror.getId(iframeEl.contentDocument))}handleMessage(message){var iframeEl;"rrweb"===message.data.type&&message.source&&(iframeEl=this.crossOriginIframeMap.get(message.source))&&(iframeEl=this.transformCrossOriginEvent(iframeEl,message.data.event))&&this.wrappedEmit(iframeEl,message.data.isCheckout)}transformCrossOriginEvent(iframeEl,e){var _a;switch(e.type){case EventType.FullSnapshot:return this.crossOriginIframeMirror.reset(iframeEl),this.crossOriginIframeStyleMirror.reset(iframeEl),this.replaceIdOnNode(e.data.node,iframeEl),{timestamp:e.timestamp,type:EventType.IncrementalSnapshot,data:{source:IncrementalSource.Mutation,adds:[{parentId:this.mirror.getId(iframeEl),nextId:null,node:e.data.node}],removes:[],texts:[],attributes:[],isAttachIframe:!0}};case EventType.Meta:case EventType.Load:case EventType.DomContentLoaded:return!1;case EventType.Plugin:return e;case EventType.Custom:return this.replaceIds(e.data.payload,iframeEl,["id","parentId","previousId","nextId"]),e;case EventType.IncrementalSnapshot:switch(e.data.source){case IncrementalSource.Mutation:return e.data.adds.forEach(n=>{this.replaceIds(n,iframeEl,["parentId","nextId","previousId"]),this.replaceIdOnNode(n.node,iframeEl)}),e.data.removes.forEach(n=>{this.replaceIds(n,iframeEl,["parentId","id"])}),e.data.attributes.forEach(n=>{this.replaceIds(n,iframeEl,["id"])}),e.data.texts.forEach(n=>{this.replaceIds(n,iframeEl,["id"])}),e;case IncrementalSource.Drag:case IncrementalSource.TouchMove:case IncrementalSource.MouseMove:return e.data.positions.forEach(p=>{this.replaceIds(p,iframeEl,["id"])}),e;case IncrementalSource.ViewportResize:return!1;case IncrementalSource.MediaInteraction:case IncrementalSource.MouseInteraction:case IncrementalSource.Scroll:case IncrementalSource.CanvasMutation:case IncrementalSource.Input:return this.replaceIds(e.data,iframeEl,["id"]),e;case IncrementalSource.StyleSheetRule:case IncrementalSource.StyleDeclaration:return this.replaceIds(e.data,iframeEl,["id"]),this.replaceStyleIds(e.data,iframeEl,["styleId"]),e;case IncrementalSource.Font:return e;case IncrementalSource.Selection:return e.data.ranges.forEach(range=>{this.replaceIds(range,iframeEl,["start","end"])}),e;case IncrementalSource.AdoptedStyleSheet:return this.replaceIds(e.data,iframeEl,["id"]),this.replaceStyleIds(e.data,iframeEl,["styleIds"]),null!=(_a=e.data.styles)&&_a.forEach(style=>{this.replaceStyleIds(style,iframeEl,["styleId"])}),e}}}replace(iframeMirror,obj,iframeEl,keys){for(const key of keys)!Array.isArray(obj[key])&&"number"!=typeof obj[key]||(Array.isArray(obj[key])?obj[key]=iframeMirror.getIds(iframeEl,obj[key]):obj[key]=iframeMirror.getId(iframeEl,obj[key]));return obj}replaceIds(obj,iframeEl,keys){return this.replace(this.crossOriginIframeMirror,obj,iframeEl,keys)}replaceStyleIds(obj,iframeEl,keys){return this.replace(this.crossOriginIframeStyleMirror,obj,iframeEl,keys)}replaceIdOnNode(node,iframeEl){this.replaceIds(node,iframeEl,["id"]),"childNodes"in node&&node.childNodes.forEach(child=>{this.replaceIdOnNode(child,iframeEl)})}}var __defProp$1=Object.defineProperty,__defProps$1=Object.defineProperties,__getOwnPropDescs$1=Object.getOwnPropertyDescriptors,__getOwnPropSymbols$2=Object.getOwnPropertySymbols,__hasOwnProp$2=Object.prototype.hasOwnProperty,__propIsEnum$2=Object.prototype.propertyIsEnumerable,__defNormalProp$1=(obj,key,value)=>key in obj?__defProp$1(obj,key,{enumerable:!0,configurable:!0,writable:!0,value:value}):obj[key]=value,__spreadValues$1=(a,b)=>{for(var prop in b=b||{})__hasOwnProp$2.call(b,prop)&&__defNormalProp$1(a,prop,b[prop]);if(__getOwnPropSymbols$2)for(var prop of __getOwnPropSymbols$2(b))__propIsEnum$2.call(b,prop)&&__defNormalProp$1(a,prop,b[prop]);return a},__spreadProps$1=(a,b)=>__defProps$1(a,__getOwnPropDescs$1(b));class ShadowDomManager{constructor(options){this.shadowDoms=new WeakSet,this.restorePatches=[],this.mutationCb=options.mutationCb,this.scrollCb=options.scrollCb,this.bypassOptions=options.bypassOptions,this.mirror=options.mirror;const manager=this;this.restorePatches.push(patch(Element.prototype,"attachShadow",function(original){return function(option){option=original.call(this,option);return this.shadowRoot&&manager.addShadowRoot(this.shadowRoot,this.ownerDocument),option}}))}addShadowRoot(shadowRoot,doc){!isNativeShadowDom(shadowRoot)||this.shadowDoms.has(shadowRoot)||(this.shadowDoms.add(shadowRoot),initMutationObserver(__spreadProps$1(__spreadValues$1({},this.bypassOptions),{doc:doc,mutationCb:this.mutationCb,mirror:this.mirror,shadowDomManager:this}),shadowRoot),initScrollObserver(__spreadProps$1(__spreadValues$1({},this.bypassOptions),{scrollCb:this.scrollCb,doc:shadowRoot,mirror:this.mirror})),setTimeout(()=>{shadowRoot.adoptedStyleSheets&&0<shadowRoot.adoptedStyleSheets.length&&this.bypassOptions.stylesheetManager.adoptStyleSheets(shadowRoot.adoptedStyleSheets,this.mirror.getId(shadowRoot.host)),initAdoptedStyleSheetObserver({mirror:this.mirror,stylesheetManager:this.bypassOptions.stylesheetManager},shadowRoot)},0))}observeAttachShadow(iframeElement){if(iframeElement.contentWindow){const manager=this;this.restorePatches.push(patch(iframeElement.contentWindow.HTMLElement.prototype,"attachShadow",function(original){return function(option){option=original.call(this,option);return this.shadowRoot&&manager.addShadowRoot(this.shadowRoot,iframeElement.contentDocument),option}}))}}reset(){this.restorePatches.forEach(restorePatch=>restorePatch()),this.shadowDoms=new WeakSet}}for(var chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",lookup="undefined"==typeof Uint8Array?[]:new Uint8Array(256),i=0;i<chars.length;i++)lookup[chars.charCodeAt(i)]=i;function encode(arraybuffer){for(var bytes=new Uint8Array(arraybuffer),len=bytes.length,base64="",i=0;i<len;i+=3)base64=(base64=(base64=(base64+=chars[bytes[i]>>2])+chars[(3&bytes[i])<<4|bytes[i+1]>>4])+chars[(15&bytes[i+1])<<2|bytes[i+2]>>6])+chars[63&bytes[i+2]];return len%3==2?base64=base64.substring(0,base64.length-1)+"=":len%3==1&&(base64=base64.substring(0,base64.length-2)+"=="),base64}const canvasVarMap=new Map;const saveWebGLVar=(value,win,ctx)=>{if(value&&(isInstanceOfWebGLObject(value,win)||"object"==typeof value)){win=function(ctx,ctor){let contextMap=canvasVarMap.get(ctx);return contextMap||(contextMap=new Map,canvasVarMap.set(ctx,contextMap)),contextMap.has(ctor)||contextMap.set(ctor,[]),contextMap.get(ctor)}(ctx,value.constructor.name);let index=win.indexOf(value);return-1===index&&(index=win.length,win.push(value)),index}};const serializeArgs=(args,win,ctx)=>[...args].map(arg=>function serializeArg(value,win,ctx){if(value instanceof Array)return value.map(arg=>serializeArg(arg,win,ctx));if(null!==value){if(value instanceof Float32Array||value instanceof Float64Array||value instanceof Int32Array||value instanceof Uint32Array||value instanceof Uint8Array||value instanceof Uint16Array||value instanceof Int16Array||value instanceof Int8Array||value instanceof Uint8ClampedArray)return{rr_type:value.constructor.name,args:[Object.values(value)]};if(value instanceof ArrayBuffer){const name=value.constructor.name;return{rr_type:name,base64:encode(value)}}if(value instanceof DataView){const name=value.constructor.name;return{rr_type:name,args:[serializeArg(value.buffer,win,ctx),value.byteOffset,value.byteLength]}}if(value instanceof HTMLImageElement){const name=value.constructor.name;var src=value.src;return{rr_type:name,src:src}}if(value instanceof HTMLCanvasElement){const name="HTMLImageElement",src=value.toDataURL();return{rr_type:"HTMLImageElement",src:src}}if(value instanceof ImageData){const name=value.constructor.name;return{rr_type:name,args:[serializeArg(value.data,win,ctx),value.width,value.height]}}if(isInstanceOfWebGLObject(value,win)||"object"==typeof value){const name=value.constructor.name;return{rr_type:name,index:saveWebGLVar(value,win,ctx)}}}return value}(arg,win,ctx)),isInstanceOfWebGLObject=(value,win)=>{var supportedWebGLConstructorNames=["WebGLActiveInfo","WebGLBuffer","WebGLFramebuffer","WebGLProgram","WebGLRenderbuffer","WebGLShader","WebGLShaderPrecisionFormat","WebGLTexture","WebGLUniformLocation","WebGLVertexArrayObject","WebGLVertexArrayObjectOES"].filter(name=>"function"==typeof win[name]);return Boolean(supportedWebGLConstructorNames.find(name=>value instanceof win[name]))};function initCanvasContextObserver(win,blockClass,blockSelector){const handlers=[];try{var restoreHandler=patch(win.HTMLCanvasElement.prototype,"getContext",function(original){return function(contextType,...args){return isBlocked(this,blockClass,blockSelector,!0)||"__context"in this||(this.__context=contextType),original.apply(this,[contextType,...args])}});handlers.push(restoreHandler)}catch(e){console.error("failed to patch HTMLCanvasElement.prototype.getContext")}return()=>{handlers.forEach(h=>h())}}function patchGLPrototype(prototype,type,cb,blockClass2,blockSelector,mirror,win){var restoreHandler,handlers=[];for(const prop of Object.getOwnPropertyNames(prototype))if(!["isContextLost","canvas","drawingBufferWidth","drawingBufferHeight"].includes(prop))try{"function"==typeof prototype[prop]&&(restoreHandler=patch(prototype,prop,function(original){return function(...args){var result=original.apply(this,args);return saveWebGLVar(result,win,this),isBlocked(this.canvas,blockClass2,blockSelector,!0)||(args=serializeArgs([...args],win,this),args={type:type,property:prop,args:args},cb(this.canvas,args)),result}}),handlers.push(restoreHandler))}catch(e){var hookHandler=hookSetter(prototype,prop,{set(v){cb(this.canvas,{type:type,property:prop,args:[v],setter:!0})}});handlers.push(hookHandler)}return handlers}function createURL(base64,sourcemapArg,enableUnicodeArg){sourcemapArg=void 0===sourcemapArg?null:sourcemapArg,base64=function(base64,enableUnicode){var binaryString=atob(base64);if(enableUnicode){for(var binaryView=new Uint8Array(binaryString.length),i=0,n=binaryString.length;i<n;++i)binaryView[i]=binaryString.charCodeAt(i);return String.fromCharCode.apply(null,new Uint16Array(binaryView.buffer))}return binaryString}(base64,void 0!==enableUnicodeArg&&enableUnicodeArg),enableUnicodeArg=base64.indexOf("\n",10)+1,base64=base64.substring(enableUnicodeArg)+(sourcemapArg?"//# sourceMappingURL="+sourcemapArg:""),enableUnicodeArg=new Blob([base64],{type:"application/javascript"});return URL.createObjectURL(enableUnicodeArg)}sourcemapArg=null,enableUnicodeArg=!(base64="Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwooZnVuY3Rpb24gKCkgewogICAgJ3VzZSBzdHJpY3QnOwoKICAgIC8qCiAgICAgKiBiYXNlNjQtYXJyYXlidWZmZXIgMS4wLjEgPGh0dHBzOi8vZ2l0aHViLmNvbS9uaWtsYXN2aC9iYXNlNjQtYXJyYXlidWZmZXI+CiAgICAgKiBDb3B5cmlnaHQgKGMpIDIwMjEgTmlrbGFzIHZvbiBIZXJ0emVuIDxodHRwczovL2hlcnR6ZW4uY29tPgogICAgICogUmVsZWFzZWQgdW5kZXIgTUlUIExpY2Vuc2UKICAgICAqLwogICAgdmFyIGNoYXJzID0gJ0FCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5Ky8nOwogICAgLy8gVXNlIGEgbG9va3VwIHRhYmxlIHRvIGZpbmQgdGhlIGluZGV4LgogICAgdmFyIGxvb2t1cCA9IHR5cGVvZiBVaW50OEFycmF5ID09PSAndW5kZWZpbmVkJyA/IFtdIDogbmV3IFVpbnQ4QXJyYXkoMjU2KTsKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2hhcnMubGVuZ3RoOyBpKyspIHsKICAgICAgICBsb29rdXBbY2hhcnMuY2hhckNvZGVBdChpKV0gPSBpOwogICAgfQogICAgdmFyIGVuY29kZSA9IGZ1bmN0aW9uIChhcnJheWJ1ZmZlcikgewogICAgICAgIHZhciBieXRlcyA9IG5ldyBVaW50OEFycmF5KGFycmF5YnVmZmVyKSwgaSwgbGVuID0gYnl0ZXMubGVuZ3RoLCBiYXNlNjQgPSAnJzsKICAgICAgICBmb3IgKGkgPSAwOyBpIDwgbGVuOyBpICs9IDMpIHsKICAgICAgICAgICAgYmFzZTY0ICs9IGNoYXJzW2J5dGVzW2ldID4+IDJdOwogICAgICAgICAgICBiYXNlNjQgKz0gY2hhcnNbKChieXRlc1tpXSAmIDMpIDw8IDQpIHwgKGJ5dGVzW2kgKyAxXSA+PiA0KV07CiAgICAgICAgICAgIGJhc2U2NCArPSBjaGFyc1soKGJ5dGVzW2kgKyAxXSAmIDE1KSA8PCAyKSB8IChieXRlc1tpICsgMl0gPj4gNildOwogICAgICAgICAgICBiYXNlNjQgKz0gY2hhcnNbYnl0ZXNbaSArIDJdICYgNjNdOwogICAgICAgIH0KICAgICAgICBpZiAobGVuICUgMyA9PT0gMikgewogICAgICAgICAgICBiYXNlNjQgPSBiYXNlNjQuc3Vic3RyaW5nKDAsIGJhc2U2NC5sZW5ndGggLSAxKSArICc9JzsKICAgICAgICB9CiAgICAgICAgZWxzZSBpZiAobGVuICUgMyA9PT0gMSkgewogICAgICAgICAgICBiYXNlNjQgPSBiYXNlNjQuc3Vic3RyaW5nKDAsIGJhc2U2NC5sZW5ndGggLSAyKSArICc9PSc7CiAgICAgICAgfQogICAgICAgIHJldHVybiBiYXNlNjQ7CiAgICB9OwoKICAgIGNvbnN0IGxhc3RCbG9iTWFwID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTsKICAgIGNvbnN0IHRyYW5zcGFyZW50QmxvYk1hcCA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7CiAgICBhc3luYyBmdW5jdGlvbiBnZXRUcmFuc3BhcmVudEJsb2JGb3Iod2lkdGgsIGhlaWdodCwgZGF0YVVSTE9wdGlvbnMpIHsKICAgICAgY29uc3QgaWQgPSBgJHt3aWR0aH0tJHtoZWlnaHR9YDsKICAgICAgaWYgKCJPZmZzY3JlZW5DYW52YXMiIGluIGdsb2JhbFRoaXMpIHsKICAgICAgICBpZiAodHJhbnNwYXJlbnRCbG9iTWFwLmhhcyhpZCkpCiAgICAgICAgICByZXR1cm4gdHJhbnNwYXJlbnRCbG9iTWFwLmdldChpZCk7CiAgICAgICAgY29uc3Qgb2Zmc2NyZWVuID0gbmV3IE9mZnNjcmVlbkNhbnZhcyh3aWR0aCwgaGVpZ2h0KTsKICAgICAgICBvZmZzY3JlZW4uZ2V0Q29udGV4dCgiMmQiKTsKICAgICAgICBjb25zdCBibG9iID0gYXdhaXQgb2Zmc2NyZWVuLmNvbnZlcnRUb0Jsb2IoZGF0YVVSTE9wdGlvbnMpOwogICAgICAgIGNvbnN0IGFycmF5QnVmZmVyID0gYXdhaXQgYmxvYi5hcnJheUJ1ZmZlcigpOwogICAgICAgIGNvbnN0IGJhc2U2NCA9IGVuY29kZShhcnJheUJ1ZmZlcik7CiAgICAgICAgdHJhbnNwYXJlbnRCbG9iTWFwLnNldChpZCwgYmFzZTY0KTsKICAgICAgICByZXR1cm4gYmFzZTY0OwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiAiIjsKICAgICAgfQogICAgfQogICAgY29uc3Qgd29ya2VyID0gc2VsZjsKICAgIHdvcmtlci5vbm1lc3NhZ2UgPSBhc3luYyBmdW5jdGlvbihlKSB7CiAgICAgIGlmICgiT2Zmc2NyZWVuQ2FudmFzIiBpbiBnbG9iYWxUaGlzKSB7CiAgICAgICAgY29uc3QgeyBpZCwgYml0bWFwLCB3aWR0aCwgaGVpZ2h0LCBkYXRhVVJMT3B0aW9ucyB9ID0gZS5kYXRhOwogICAgICAgIGNvbnN0IHRyYW5zcGFyZW50QmFzZTY0ID0gZ2V0VHJhbnNwYXJlbnRCbG9iRm9yKHdpZHRoLCBoZWlnaHQsIGRhdGFVUkxPcHRpb25zKTsKICAgICAgICBjb25zdCBvZmZzY3JlZW4gPSBuZXcgT2Zmc2NyZWVuQ2FudmFzKHdpZHRoLCBoZWlnaHQpOwogICAgICAgIGNvbnN0IGN0eCA9IG9mZnNjcmVlbi5nZXRDb250ZXh0KCIyZCIpOwogICAgICAgIGN0eC5kcmF3SW1hZ2UoYml0bWFwLCAwLCAwKTsKICAgICAgICBiaXRtYXAuY2xvc2UoKTsKICAgICAgICBjb25zdCBibG9iID0gYXdhaXQgb2Zmc2NyZWVuLmNvbnZlcnRUb0Jsb2IoZGF0YVVSTE9wdGlvbnMpOwogICAgICAgIGNvbnN0IHR5cGUgPSBibG9iLnR5cGU7CiAgICAgICAgY29uc3QgYXJyYXlCdWZmZXIgPSBhd2FpdCBibG9iLmFycmF5QnVmZmVyKCk7CiAgICAgICAgY29uc3QgYmFzZTY0ID0gZW5jb2RlKGFycmF5QnVmZmVyKTsKICAgICAgICBpZiAoIWxhc3RCbG9iTWFwLmhhcyhpZCkgJiYgYXdhaXQgdHJhbnNwYXJlbnRCYXNlNjQgPT09IGJhc2U2NCkgewogICAgICAgICAgbGFzdEJsb2JNYXAuc2V0KGlkLCBiYXNlNjQpOwogICAgICAgICAgcmV0dXJuIHdvcmtlci5wb3N0TWVzc2FnZSh7IGlkIH0pOwogICAgICAgIH0KICAgICAgICBpZiAobGFzdEJsb2JNYXAuZ2V0KGlkKSA9PT0gYmFzZTY0KQogICAgICAgICAgcmV0dXJuIHdvcmtlci5wb3N0TWVzc2FnZSh7IGlkIH0pOwogICAgICAgIHdvcmtlci5wb3N0TWVzc2FnZSh7CiAgICAgICAgICBpZCwKICAgICAgICAgIHR5cGUsCiAgICAgICAgICBiYXNlNjQsCiAgICAgICAgICB3aWR0aCwKICAgICAgICAgIGhlaWdodAogICAgICAgIH0pOwogICAgICAgIGxhc3RCbG9iTWFwLnNldChpZCwgYmFzZTY0KTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gd29ya2VyLnBvc3RNZXNzYWdlKHsgaWQ6IGUuZGF0YS5pZCB9KTsKICAgICAgfQogICAgfTsKCn0pKCk7Cgo=");var base64,sourcemapArg,enableUnicodeArg,url,WorkerFactory=function(options){return url=url||createURL(base64,sourcemapArg,enableUnicodeArg),new Worker(url,options)},__getOwnPropSymbols$1=Object.getOwnPropertySymbols,__hasOwnProp$1=Object.prototype.hasOwnProperty,__propIsEnum$1=Object.prototype.propertyIsEnumerable;class CanvasManager{constructor(options){this.pendingCanvasMutations=new Map,this.rafStamps={latestId:0,invokeId:null},this.frozen=!1,this.locked=!1,this.processMutation=(target,mutation)=>{(this.rafStamps.invokeId&&this.rafStamps.latestId!==this.rafStamps.invokeId||!this.rafStamps.invokeId)&&(this.rafStamps.invokeId=this.rafStamps.latestId),this.pendingCanvasMutations.has(target)||this.pendingCanvasMutations.set(target,[]),this.pendingCanvasMutations.get(target).push(mutation)};var{sampling="all",win,blockClass,blockSelector,recordCanvas,dataURLOptions}=options;this.mutationCb=options.mutationCb,this.mirror=options.mirror,recordCanvas&&"all"===sampling&&this.initCanvasMutationObserver(win,blockClass,blockSelector),recordCanvas&&"number"==typeof sampling&&this.initCanvasFPSObserver(sampling,win,blockClass,blockSelector,{dataURLOptions:dataURLOptions})}reset(){this.pendingCanvasMutations.clear(),this.resetObservers&&this.resetObservers()}freeze(){this.frozen=!0}unfreeze(){this.frozen=!1}lock(){this.locked=!0}unlock(){this.locked=!1}initCanvasFPSObserver(fps,win,blockClass,blockSelector,options){const canvasContextReset=initCanvasContextObserver(win,blockClass,blockSelector),snapshotInProgressMap=new Map,worker=new WorkerFactory,timeBetweenSnapshots=(worker.onmessage=e=>{var type,width,height,id=e.data["id"];snapshotInProgressMap.set(id,!1),"base64"in e.data&&({base64:e,type,width,height}=e.data,this.mutationCb({id:id,type:CanvasContext["2D"],commands:[{property:"clearRect",args:[0,0,width,height]},{property:"drawImage",args:[{rr_type:"ImageBitmap",args:[{rr_type:"Blob",data:[{rr_type:"ArrayBuffer",base64:e}],type:type}]},0,0]}]}))},1e3/fps);let lastSnapshotTime=0,rafId;const getCanvas=()=>{const matchedCanvas=[];return win.document.querySelectorAll("canvas").forEach(canvas=>{isBlocked(canvas,blockClass,blockSelector,!0)||matchedCanvas.push(canvas)}),matchedCanvas},takeCanvasSnapshots=timestamp=>{rafId=(lastSnapshotTime&&timestamp-lastSnapshotTime<timeBetweenSnapshots||(lastSnapshotTime=timestamp,getCanvas().forEach(canvas=>{return __this=this,__arguments=null,generator=function*(){var context,_a,id=this.mirror.getId(canvas);snapshotInProgressMap.get(id)||(snapshotInProgressMap.set(id,!0),["webgl","webgl2"].includes(canvas.__context)&&!1===(null==(_a=null==(context=canvas.getContext(canvas.__context))?void 0:context.getContextAttributes())?void 0:_a.preserveDrawingBuffer)&&null!=context&&context.clear(context.COLOR_BUFFER_BIT),_a=yield createImageBitmap(canvas),worker.postMessage({id:id,bitmap:_a,width:canvas.width,height:canvas.height,dataURLOptions:options.dataURLOptions},[_a]))},new Promise((resolve,reject)=>{var fulfilled=value=>{try{step(generator.next(value))}catch(e){reject(e)}},rejected=value=>{try{step(generator.throw(value))}catch(e){reject(e)}},step=x=>x.done?resolve(x.value):Promise.resolve(x.value).then(fulfilled,rejected);step((generator=generator.apply(__this,__arguments)).next())});var __this,__arguments,generator})),requestAnimationFrame(takeCanvasSnapshots))};rafId=requestAnimationFrame(takeCanvasSnapshots),this.resetObservers=()=>{canvasContextReset(),cancelAnimationFrame(rafId)}}initCanvasMutationObserver(win,blockClass,blockSelector){this.startRAFTimestamping(),this.startPendingCanvasMutationFlusher();const canvasContextReset=initCanvasContextObserver(win,blockClass,blockSelector),canvas2DReset=function(cb,win,blockClass2,blockSelector){const handlers=[];var restoreHandler;for(const prop of Object.getOwnPropertyNames(win.CanvasRenderingContext2D.prototype))try{"function"==typeof win.CanvasRenderingContext2D.prototype[prop]&&(restoreHandler=patch(win.CanvasRenderingContext2D.prototype,prop,function(original){return function(...args){return isBlocked(this.canvas,blockClass2,blockSelector,!0)||setTimeout(()=>{var recordArgs=serializeArgs([...args],win,this);cb(this.canvas,{type:CanvasContext["2D"],property:prop,args:recordArgs})},0),original.apply(this,args)}}),handlers.push(restoreHandler))}catch(e){var hookHandler=hookSetter(win.CanvasRenderingContext2D.prototype,prop,{set(v){cb(this.canvas,{type:CanvasContext["2D"],property:prop,args:[v],setter:!0})}});handlers.push(hookHandler)}return()=>{handlers.forEach(h=>h())}}(this.processMutation.bind(this),win,blockClass,blockSelector),canvasWebGL1and2Reset=function(cb,win,blockClass2,blockSelector){const handlers=[];return handlers.push(...patchGLPrototype(win.WebGLRenderingContext.prototype,CanvasContext.WebGL,cb,blockClass2,blockSelector,0,win)),void 0!==win.WebGL2RenderingContext&&handlers.push(...patchGLPrototype(win.WebGL2RenderingContext.prototype,CanvasContext.WebGL2,cb,blockClass2,blockSelector,0,win)),()=>{handlers.forEach(h=>h())}}(this.processMutation.bind(this),win,blockClass,blockSelector,this.mirror);this.resetObservers=()=>{canvasContextReset(),canvas2DReset(),canvasWebGL1and2Reset()}}startPendingCanvasMutationFlusher(){requestAnimationFrame(()=>this.flushPendingCanvasMutations())}startRAFTimestamping(){const setLatestRAFTimestamp=timestamp=>{this.rafStamps.latestId=timestamp,requestAnimationFrame(setLatestRAFTimestamp)};requestAnimationFrame(setLatestRAFTimestamp)}flushPendingCanvasMutations(){this.pendingCanvasMutations.forEach((values,canvas)=>{var id=this.mirror.getId(canvas);this.flushPendingCanvasMutationFor(canvas,id)}),requestAnimationFrame(()=>this.flushPendingCanvasMutations())}flushPendingCanvasMutationFor(canvas,id){var values,valuesWithType;this.frozen||this.locked||(valuesWithType=this.pendingCanvasMutations.get(canvas))&&-1!==id&&(values=valuesWithType.map(value=>{var source=value,exclude=["type"],target={};for(prop in source)__hasOwnProp$1.call(source,prop)&&exclude.indexOf(prop)<0&&(target[prop]=source[prop]);if(null!=source&&__getOwnPropSymbols$1)for(var prop of __getOwnPropSymbols$1(source))exclude.indexOf(prop)<0&&__propIsEnum$1.call(source,prop)&&(target[prop]=source[prop]);return target}),valuesWithType=valuesWithType[0]["type"],this.mutationCb({id:id,type:valuesWithType,commands:values}),this.pendingCanvasMutations.delete(canvas))}}class StylesheetManager{constructor(options){this.trackedLinkElements=new WeakSet,this.styleMirror=new StyleSheetMirror,this.mutationCb=options.mutationCb,this.adoptedStyleSheetCb=options.adoptedStyleSheetCb}attachLinkElement(linkEl,childSn){"_cssText"in childSn.attributes&&this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:childSn.id,attributes:childSn.attributes}]}),this.trackLinkElement(linkEl)}trackLinkElement(linkEl){this.trackedLinkElements.has(linkEl)||(this.trackedLinkElements.add(linkEl),this.trackStylesheetInLinkElement(linkEl))}adoptStyleSheets(sheets,hostId){if(0!==sheets.length){var rules,adoptedStyleSheetData={id:hostId,styleIds:[]},styles=[];for(const sheet of sheets){let styleId;this.styleMirror.has(sheet)?styleId=this.styleMirror.getId(sheet):(styleId=this.styleMirror.add(sheet),rules=Array.from(sheet.rules||CSSRule),styles.push({styleId:styleId,rules:rules.map((r,index)=>({rule:getCssRuleString(r),index:index}))})),adoptedStyleSheetData.styleIds.push(styleId)}0<styles.length&&(adoptedStyleSheetData.styles=styles),this.adoptedStyleSheetCb(adoptedStyleSheetData)}}reset(){this.styleMirror.reset(),this.trackedLinkElements=new WeakSet}trackStylesheetInLinkElement(linkEl){}}var __defProp=Object.defineProperty,__defProps=Object.defineProperties,__getOwnPropDescs=Object.getOwnPropertyDescriptors,__getOwnPropSymbols=Object.getOwnPropertySymbols,__hasOwnProp=Object.prototype.hasOwnProperty,__propIsEnum=Object.prototype.propertyIsEnumerable,__defNormalProp=(obj,key,value)=>key in obj?__defProp(obj,key,{enumerable:!0,configurable:!0,writable:!0,value:value}):obj[key]=value,__spreadValues=(a,b)=>{for(var prop in b=b||{})__hasOwnProp.call(b,prop)&&__defNormalProp(a,prop,b[prop]);if(__getOwnPropSymbols)for(var prop of __getOwnPropSymbols(b))__propIsEnum.call(b,prop)&&__defNormalProp(a,prop,b[prop]);return a},__spreadProps=(a,b)=>__defProps(a,__getOwnPropDescs(b));function wrapEvent(e){return __spreadProps(__spreadValues({},e),{timestamp:Date.now()})}let wrappedEmit,takeFullSnapshot,canvasManager,recording=!1;const mirror=new Mirror;function record(options={}){const{emit,checkoutEveryNms,checkoutEveryNth,blockClass="rr-block",blockSelector=null,ignoreClass="rr-ignore",maskTextClass="rr-mask",maskTextSelector=null,inlineStylesheet=!0,maskAllInputs,maskInputOptions:_maskInputOptions,slimDOMOptions:_slimDOMOptions,maskInputFn,maskTextFn,hooks,packFn,sampling={},dataURLOptions={},mousemoveWait,recordCanvas=!1,recordCrossOriginIframes=!1,userTriggeredOnInput=!1,collectFonts=!1,inlineImages=!1,plugins,keepIframeSrcFn=()=>!1,ignoreCSSAttributes=new Set([])}=options,inEmittingFrame=!recordCrossOriginIframes||window.parent===window;let passEmitsToParent=!1;if(!inEmittingFrame)try{window.parent.document,passEmitsToParent=!1}catch(e){passEmitsToParent=!0}if(inEmittingFrame&&!emit)throw new Error("emit function is required");void 0!==mousemoveWait&&void 0===sampling.mousemove&&(sampling.mousemove=mousemoveWait),mirror.reset();const maskInputOptions=!0===maskAllInputs?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,password:!0}:void 0!==_maskInputOptions?_maskInputOptions:{password:!0},slimDOMOptions=!0===_slimDOMOptions||"all"===_slimDOMOptions?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:"all"===_slimDOMOptions,headMetaDescKeywords:"all"===_slimDOMOptions}:_slimDOMOptions||{};!function(win=window){"NodeList"in win&&!win.NodeList.prototype.forEach&&(win.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in win&&!win.DOMTokenList.prototype.forEach&&(win.DOMTokenList.prototype.forEach=Array.prototype.forEach),Node.prototype.contains||(Node.prototype.contains=(...args)=>{let node=args[0];if(!(0 in args))throw new TypeError("1 argument is required");do{if(this===node)return!0}while(node=node&&node.parentNode);return!1})}();let lastFullSnapshotEvent,incrementalSnapshotCount=0;const eventProcessor=e=>{for(const plugin of plugins||[])plugin.eventProcessor&&(e=plugin.eventProcessor(e));return e=packFn?packFn(e):e},wrappedMutationEmit=(wrappedEmit=(e,isCheckout)=>{var _a;null==(_a=mutationBuffers[0])||!_a.isFrozen()||e.type===EventType.FullSnapshot||e.type===EventType.IncrementalSnapshot&&e.data.source===IncrementalSource.Mutation||mutationBuffers.forEach(buf=>buf.unfreeze()),inEmittingFrame?null!=emit&&emit(eventProcessor(e),isCheckout):passEmitsToParent&&(_a={type:"rrweb",event:eventProcessor(e),isCheckout:isCheckout},window.parent.postMessage(_a,"*")),e.type===EventType.FullSnapshot?(lastFullSnapshotEvent=e,incrementalSnapshotCount=0):e.type!==EventType.IncrementalSnapshot||e.data.source===IncrementalSource.Mutation&&e.data.isAttachIframe||(incrementalSnapshotCount++,isCheckout=checkoutEveryNth&&incrementalSnapshotCount>=checkoutEveryNth,_a=checkoutEveryNms&&e.timestamp-lastFullSnapshotEvent.timestamp>checkoutEveryNms,(isCheckout||_a)&&takeFullSnapshot(!0))},m=>{wrappedEmit(wrapEvent({type:EventType.IncrementalSnapshot,data:__spreadValues({source:IncrementalSource.Mutation},m)}))}),wrappedScrollEmit=p=>wrappedEmit(wrapEvent({type:EventType.IncrementalSnapshot,data:__spreadValues({source:IncrementalSource.Scroll},p)})),wrappedCanvasMutationEmit=p=>wrappedEmit(wrapEvent({type:EventType.IncrementalSnapshot,data:__spreadValues({source:IncrementalSource.CanvasMutation},p)}));const stylesheetManager=new StylesheetManager({mutationCb:wrappedMutationEmit,adoptedStyleSheetCb:a=>wrappedEmit(wrapEvent({type:EventType.IncrementalSnapshot,data:__spreadValues({source:IncrementalSource.AdoptedStyleSheet},a)}))}),iframeManager=new IframeManager({mirror:mirror,mutationCb:wrappedMutationEmit,stylesheetManager:stylesheetManager,recordCrossOriginIframes:recordCrossOriginIframes,wrappedEmit:wrappedEmit});for(const plugin of plugins||[])plugin.getMirror&&plugin.getMirror({nodeMirror:mirror,crossOriginIframeMirror:iframeManager.crossOriginIframeMirror,crossOriginIframeStyleMirror:iframeManager.crossOriginIframeStyleMirror});canvasManager=new CanvasManager({recordCanvas:recordCanvas,mutationCb:wrappedCanvasMutationEmit,win:window,blockClass:blockClass,blockSelector:blockSelector,mirror:mirror,sampling:sampling.canvas,dataURLOptions:dataURLOptions});const shadowDomManager=new ShadowDomManager({mutationCb:wrappedMutationEmit,scrollCb:wrappedScrollEmit,bypassOptions:{blockClass:blockClass,blockSelector:blockSelector,maskTextClass:maskTextClass,maskTextSelector:maskTextSelector,inlineStylesheet:inlineStylesheet,maskInputOptions:maskInputOptions,dataURLOptions:dataURLOptions,maskTextFn:maskTextFn,maskInputFn:maskInputFn,recordCanvas:recordCanvas,inlineImages:inlineImages,sampling:sampling,slimDOMOptions:slimDOMOptions,iframeManager:iframeManager,stylesheetManager:stylesheetManager,canvasManager:canvasManager,keepIframeSrcFn:keepIframeSrcFn},mirror:mirror});takeFullSnapshot=(isCheckout=!1)=>{wrappedEmit(wrapEvent({type:EventType.Meta,data:{href:window.location.href,width:getWindowWidth(),height:getWindowHeight()}}),isCheckout),stylesheetManager.reset(),mutationBuffers.forEach(buf=>buf.lock());var isCheckout=function(n,options){var _b=void 0===(_b=(options=options||{}).mirror)?new Mirror:_b,_c=options.blockClass,_d=options.blockSelector,_e=options.maskTextClass,_f=options.maskTextSelector,_g=options.inlineStylesheet,_h=options.inlineImages,_j=options.recordCanvas,_k=void 0!==(_k=options.maskAllInputs)&&_k,maskTextFn=options.maskTextFn,maskInputFn=options.maskInputFn,_l=void 0!==(_l=options.slimDOM)&&_l,dataURLOptions=options.dataURLOptions,preserveWhiteSpace=options.preserveWhiteSpace,onSerialize=options.onSerialize,onIframeLoad=options.onIframeLoad,iframeLoadTimeout=options.iframeLoadTimeout,onStylesheetLoad=options.onStylesheetLoad,stylesheetLoadTimeout=options.stylesheetLoadTimeout,options=options.keepIframeSrcFn;return serializeNodeWithId(n,{doc:n,mirror:_b,blockClass:void 0===_c?"rr-block":_c,blockSelector:void 0===_d?null:_d,maskTextClass:void 0===_e?"rr-mask":_e,maskTextSelector:void 0===_f?null:_f,skipChild:!1,inlineStylesheet:void 0===_g||_g,maskInputOptions:!0===_k?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,password:!0}:!1===_k?{password:!0}:_k,maskTextFn:maskTextFn,maskInputFn:maskInputFn,slimDOMOptions:!0===_l||"all"===_l?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:"all"===_l,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:!1===_l?{}:_l,dataURLOptions:dataURLOptions,inlineImages:void 0!==_h&&_h,recordCanvas:void 0!==_j&&_j,preserveWhiteSpace:preserveWhiteSpace,onSerialize:onSerialize,onIframeLoad:onIframeLoad,iframeLoadTimeout:iframeLoadTimeout,onStylesheetLoad:onStylesheetLoad,stylesheetLoadTimeout:stylesheetLoadTimeout,keepIframeSrcFn:void 0===options?function(){return!1}:options,newlyAddedElement:!1})}(document,{mirror:mirror,blockClass:blockClass,blockSelector:blockSelector,maskTextClass:maskTextClass,maskTextSelector:maskTextSelector,inlineStylesheet:inlineStylesheet,maskAllInputs:maskInputOptions,maskTextFn:maskTextFn,slimDOM:slimDOMOptions,dataURLOptions:dataURLOptions,recordCanvas:recordCanvas,inlineImages:inlineImages,onSerialize:n=>{isSerializedIframe(n,mirror)&&iframeManager.addIframe(n),isSerializedStylesheet(n,mirror)&&stylesheetManager.trackLinkElement(n),hasShadowRoot(n)&&shadowDomManager.addShadowRoot(n.shadowRoot,document)},onIframeLoad:(iframe,childSn)=>{iframeManager.attachIframe(iframe,childSn),shadowDomManager.observeAttachShadow(iframe)},onStylesheetLoad:(linkEl,childSn)=>{stylesheetManager.attachLinkElement(linkEl,childSn)},keepIframeSrcFn:keepIframeSrcFn});if(!isCheckout)return console.warn("Failed to snapshot the document");wrappedEmit(wrapEvent({type:EventType.FullSnapshot,data:{node:isCheckout,initialOffset:{left:void 0!==window.pageXOffset?window.pageXOffset:(null==document?void 0:document.documentElement.scrollLeft)||(null==(isCheckout=null==(isCheckout=null==document?void 0:document.body)?void 0:isCheckout.parentElement)?void 0:isCheckout.scrollLeft)||(null==(isCheckout=null==document?void 0:document.body)?void 0:isCheckout.scrollLeft)||0,top:void 0!==window.pageYOffset?window.pageYOffset:(null==document?void 0:document.documentElement.scrollTop)||(null==(isCheckout=null==(isCheckout=null==document?void 0:document.body)?void 0:isCheckout.parentElement)?void 0:isCheckout.scrollTop)||(null==(isCheckout=null==document?void 0:document.body)?void 0:isCheckout.scrollTop)||0}}})),mutationBuffers.forEach(buf=>buf.unlock()),document.adoptedStyleSheets&&0<document.adoptedStyleSheets.length&&stylesheetManager.adoptStyleSheets(document.adoptedStyleSheets,mirror.getId(document))};try{const handlers=[],observe=(handlers.push(on("DOMContentLoaded",()=>{wrappedEmit(wrapEvent({type:EventType.DomContentLoaded,data:{}}))})),doc=>{return initObservers({mutationCb:wrappedMutationEmit,mousemoveCb:(positions,source)=>wrappedEmit(wrapEvent({type:EventType.IncrementalSnapshot,data:{source:source,positions:positions}})),mouseInteractionCb:d=>wrappedEmit(wrapEvent({type:EventType.IncrementalSnapshot,data:__spreadValues({source:IncrementalSource.MouseInteraction},d)})),scrollCb:wrappedScrollEmit,viewportResizeCb:d=>wrappedEmit(wrapEvent({type:EventType.IncrementalSnapshot,data:__spreadValues({source:IncrementalSource.ViewportResize},d)})),inputCb:v=>wrappedEmit(wrapEvent({type:EventType.IncrementalSnapshot,data:__spreadValues({source:IncrementalSource.Input},v)})),mediaInteractionCb:p=>wrappedEmit(wrapEvent({type:EventType.IncrementalSnapshot,data:__spreadValues({source:IncrementalSource.MediaInteraction},p)})),styleSheetRuleCb:r=>wrappedEmit(wrapEvent({type:EventType.IncrementalSnapshot,data:__spreadValues({source:IncrementalSource.StyleSheetRule},r)})),styleDeclarationCb:r=>wrappedEmit(wrapEvent({type:EventType.IncrementalSnapshot,data:__spreadValues({source:IncrementalSource.StyleDeclaration},r)})),canvasMutationCb:wrappedCanvasMutationEmit,fontCb:p=>wrappedEmit(wrapEvent({type:EventType.IncrementalSnapshot,data:__spreadValues({source:IncrementalSource.Font},p)})),selectionCb:p=>{wrappedEmit(wrapEvent({type:EventType.IncrementalSnapshot,data:__spreadValues({source:IncrementalSource.Selection},p)}))},blockClass:blockClass,ignoreClass:ignoreClass,maskTextClass:maskTextClass,maskTextSelector:maskTextSelector,maskInputOptions:maskInputOptions,inlineStylesheet:inlineStylesheet,sampling:sampling,recordCanvas:recordCanvas,inlineImages:inlineImages,userTriggeredOnInput:userTriggeredOnInput,collectFonts:collectFonts,doc:doc,maskInputFn:maskInputFn,maskTextFn:maskTextFn,keepIframeSrcFn:keepIframeSrcFn,blockSelector:blockSelector,slimDOMOptions:slimDOMOptions,dataURLOptions:dataURLOptions,mirror:mirror,iframeManager:iframeManager,stylesheetManager:stylesheetManager,shadowDomManager:shadowDomManager,canvasManager:canvasManager,ignoreCSSAttributes:ignoreCSSAttributes,plugins:(null==(doc=null==plugins?void 0:plugins.filter(p=>p.observer))?void 0:doc.map(p=>({observer:p.observer,options:p.options,callback:payload=>wrappedEmit(wrapEvent({type:EventType.Plugin,data:{plugin:p.name,payload:payload}}))})))||[]},hooks)}),init=(iframeManager.addLoadListener(iframeEl=>{handlers.push(observe(iframeEl.contentDocument))}),()=>{takeFullSnapshot(),handlers.push(observe(document)),recording=!0});return"interactive"===document.readyState||"complete"===document.readyState?init():handlers.push(on("load",()=>{wrappedEmit(wrapEvent({type:EventType.Load,data:{}})),init()},window)),()=>{handlers.forEach(h=>h()),recording=!1}}catch(error){console.warn(error)}}return record.addCustomEvent=(tag,payload)=>{if(!recording)throw new Error("please add custom event after start recording");wrappedEmit(wrapEvent({type:EventType.Custom,data:{tag:tag,payload:payload}}))},record.freezePage=()=>{mutationBuffers.forEach(buf=>buf.freeze())},record.takeFullSnapshot=isCheckout=>{if(!recording)throw new Error("please take full snapshot after start recording");takeFullSnapshot(isCheckout)},record.mirror=mirror,record}();return{init:function(insightRumInstance){var options={emit(event){globalTest.push(event);var currentMillis=s247CommonModule.getCurrentMillis(),currentEventData={},event=(currentEventData.metric=event,insightRumInstance.metricsCollector.sessionInfo(insightRumInstance));currentEventData.session_id=event.sstime+"."+event.usrInfo.guid,currentEventData.appkey=s247CommonModule.getAppKey(),currentEventData._zl_timestamp=currentMillis,currentEventData.order=Math.floor(1e6*performance.now()),currentEventData.type="replay",currentEventData.uid=event.usrInfo.uid,events.push(currentEventData)},sampling:{scroll:150,media:800},maskAllInputs:insightRumInstance.maskAllInput||!1};insightRumInstance.maskAllText&&(options.maskTextSelector="*"),recorder(options)},collect:function(){var eventsCopy=events.slice();return events=[],totalSizeInMB=0,eventsCopy},getSize:function(currentEvent){return currentEvent=JSON.stringify(currentEvent),(new TextEncoder).encode(currentEvent).length/1048576}}}();
var s247WebvitalsModule=function(){function initHiddenTime(){return"hidden"!==document.visibilityState||document.prerendering?1/0:0}function addChangeListeners(){addEventListener("visibilitychange",onVisibilityUpdate,!0),addEventListener("prerenderingchange",onVisibilityUpdate,!0)}function removeChangeListeners(){removeEventListener("visibilitychange",onVisibilityUpdate,!0),removeEventListener("prerenderingchange",onVisibilityUpdate,!0)}function onCLS(onReport,opts){opts=opts||{},onFCP(runOnce(function(){function handleEntries(entries){entries.forEach(function(entry){var firstSessionEntry,lastSessionEntry;entry.hadRecentInput||(firstSessionEntry=sessionEntries[0],lastSessionEntry=sessionEntries[sessionEntries.length-1],sessionValue&&entry.startTime-lastSessionEntry.startTime<1e3&&entry.startTime-firstSessionEntry.startTime<5e3?(sessionValue+=entry.value,sessionEntries.push(entry)):(sessionValue=entry.value,sessionEntries=[entry]))}),sessionValue>metric.value&&(metric.value=sessionValue,metric.entries=sessionEntries,report())}var report,metric=initMetric("CLS",0),sessionValue=0,sessionEntries=[],po=observe("layout-shift",handleEntries);po&&(report=bindReporter(onReport,metric,CLSThresholds,opts.reportAllChanges),onHidden(function(){handleEntries(po.takeRecords()),report(!0)}),onBFCacheRestore(function(){metric=initMetric("CLS",sessionValue=0),report=bindReporter(onReport,metric,CLSThresholds,opts.reportAllChanges),doubleRAF(function(){return report()})}),setTimeout(report,0))}))}function recordFirstInputDelay(delay,event){firstInputEvent||(firstInputEvent=event,firstInputDelay=delay,firstInputTimeStamp=new Date,eachEventType(removeEventListener),reportFirstInputDelayIfRecordedAndValid())}function reportFirstInputDelayIfRecordedAndValid(){var entry;0<=firstInputDelay&&firstInputDelay<firstInputTimeStamp-startTimeStamp&&(entry={entryType:"first-input",name:firstInputEvent.type,target:firstInputEvent.target,cancelable:firstInputEvent.cancelable,startTime:firstInputEvent.timeStamp,processingStart:firstInputEvent.timeStamp+firstInputDelay},callbacks.forEach(function(callback){callback(entry)}),callbacks=[])}function eachEventType(callback){["mousedown","keydown","touchstart","pointerdown"].forEach(function(type){return callback(type,onInput,listenerOpts)})}function onFID(onReport,opts){opts=opts||{},whenActivated(function(){function handleEntries(entries){entries.forEach(handleEntry)}var visibilityWatcher=getVisibilityWatcher(),metric=initMetric("FID"),handleEntry=function(entry){entry.startTime<visibilityWatcher.firstHiddenTime&&(metric.value=entry.processingStart-entry.startTime,metric.entries.push(entry),report(!0))},po=observe("first-input",handleEntries),report=bindReporter(onReport,metric,FIDThresholds,opts.reportAllChanges);po&&onHidden(runOnce(function(){handleEntries(po.takeRecords()),po.disconnect()})),po&&onBFCacheRestore(function(){metric=initMetric("FID"),report=bindReporter(onReport,metric,FIDThresholds,opts.reportAllChanges),resetFirstInputPolyfill(),firstInputPolyfill(handleEntry)})})}function updateEstimate(entries){entries.forEach(function(e){e.interactionId&&(minKnownInteractionId=Math.min(minKnownInteractionId,e.interactionId),maxKnownInteractionId=Math.max(maxKnownInteractionId,e.interactionId),interactionCountEstimate=maxKnownInteractionId?(maxKnownInteractionId-minKnownInteractionId)/7+1:0)})}function onINP(onReport,opts){opts=opts||{},whenActivated(function(){initInteractionCountPolyfill();function handleEntries(entries){entries.forEach(function(entry){entry.interactionId&&processEntry(entry),"first-input"!==entry.entryType||longestInteractionList.some(function(interaction){return interaction.entries.some(function(prevEntry){return entry.duration===prevEntry.duration&&entry.startTime===prevEntry.startTime})})||processEntry(entry)}),(entries=estimateP98LongestInteraction())&&entries.latency!==metric.value&&(metric.value=entries.latency,metric.entries=entries.entries,report())}var metric=initMetric("INP"),po=observe("event",handleEntries,{durationThreshold:opts.durationThreshold||40}),report=bindReporter(onReport,metric,INPThresholds,opts.reportAllChanges);po&&("interactionId"in PerformanceEventTiming.prototype&&po.observe({type:"first-input",buffered:!0}),onHidden(function(){handleEntries(po.takeRecords()),metric.value<0&&0<getInteractionCountForNavigation()&&(metric.value=0,metric.entries=[]),report(!0)}),onBFCacheRestore(function(){longestInteractionList=[],prevInteractionCount=getInteractionCount(),metric=initMetric("INP"),report=bindReporter(onReport,metric,INPThresholds,opts.reportAllChanges)}))})}function onLCP(onReport,opts){opts=opts||{},whenActivated(function(){function handleEntries(entries){(entries=entries[entries.length-1])&&entries.startTime<visibilityWatcher.firstHiddenTime&&(metric.value=Math.max(entries.startTime-getActivationStart(),0),metric.entries=[entries],report())}var report,stopListening,visibilityWatcher=getVisibilityWatcher(),metric=initMetric("LCP"),po=observe("largest-contentful-paint",handleEntries);po&&(report=bindReporter(onReport,metric,LCPThresholds,opts.reportAllChanges),stopListening=runOnce(function(){reportedMetricIDs[metric.id]||(handleEntries(po.takeRecords()),po.disconnect(),reportedMetricIDs[metric.id]=!0,report(!0))}),["keydown","click"].forEach(function(type){addEventListener(type,stopListening,!0)}),onHidden(stopListening),onBFCacheRestore(function(event){metric=initMetric("LCP"),report=bindReporter(onReport,metric,LCPThresholds,opts.reportAllChanges),doubleRAF(function(){metric.value=performance.now()-event.timeStamp,reportedMetricIDs[metric.id]=!0,report(!0)})}))})}function addToWcvDataObject(metric){var largestEntry,largestSource;metric.entries.length&&(wcvDataObject[metric.name]={},wcvDataObject[metric.name].value=metric.value,"CLS"===metric.name?(largestEntry=getLargestLayoutShiftEntry(metric.entries))&&largestEntry.sources&&largestEntry.sources.length&&(largestSource=getLargestLayoutShiftSource(largestEntry.sources))&&(wcvDataObject[metric.name].element=s247CommonModule.getSelector(largestSource.node),wcvDataObject[metric.name].event_time=largestEntry.startTime):"LCP"===metric.name?(largestSource=getLCPDebugTarget(metric.entries),wcvDataObject[metric.name].element=largestSource.debug_target,wcvDataObject[metric.name].event_time=largestSource.event_time):"FID"===metric.name?(largestEntry=metric.entries[0],wcvDataObject[metric.name].element=s247CommonModule.getSelector(largestEntry.target),wcvDataObject[metric.name].event=largestEntry.name,wcvDataObject[metric.name].event_time=largestEntry.startTime):"INP"===metric.name&&(largestSource=getLongestEntryINP(metric.entries),wcvDataObject[metric.name].element=s247CommonModule.getSelector(largestSource.target),wcvDataObject[metric.name].event_time=largestSource.startTime))}var firstInputEvent,firstInputDelay,firstInputTimeStamp,callbacks,po,wcvDataObject,bfcacheRestoreTime=-1,onBFCacheRestore=function(cb){addEventListener("pageshow",function(event){event.persisted&&(bfcacheRestoreTime=event.timeStamp,cb(event))},!0)},getNavigationEntry=function(){return window.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0]},getActivationStart=function(){var navEntry=getNavigationEntry();return navEntry&&navEntry.activationStart||0},initMetric=function(name,value){var navEntry=getNavigationEntry(),navigationType="navigate";0<=bfcacheRestoreTime?navigationType="back-forward-cache":navEntry&&(document.prerendering||0<getActivationStart()?navigationType="prerender":document.wasDiscarded?navigationType="restore":navEntry.type&&(navigationType=navEntry.type.replace(/_/g,"-")));return{name:name,value:void 0===value?-1:value,rating:"good",delta:0,entries:[],id:"v3-".concat(Date.now(),"-").concat(Math.floor(Math.random()*(9e12-1))+1e12),navigationType:navigationType}},observe=function(type,callback,opts){try{var po;if(PerformanceObserver.supportedEntryTypes.includes(type))return(po=new PerformanceObserver(function(list){Promise.resolve().then(function(){callback(list.getEntries())})})).observe(Object.assign({type:type,buffered:!0},opts||{})),po}catch(e){}},bindReporter=function(callback,metric,thresholds,reportAllChanges){var prevValue,delta;return function(forceReport){0<=metric.value&&(!forceReport&&!reportAllChanges||!(delta=metric.value-(prevValue||0))&&void 0!==prevValue||(prevValue=metric.value,metric.delta=delta,metric.rating=function(value,thresholds){return value>thresholds[1]?"poor":value>thresholds[0]?"needs-improvement":"good"}(metric.value,thresholds),callback(metric)))}},doubleRAF=function(cb){requestAnimationFrame(function(){return requestAnimationFrame(function(){return cb()})})},onHidden=function(cb){function onHiddenOrPageHide(event){"pagehide"!==event.type&&"hidden"!==document.visibilityState||cb(event)}addEventListener("visibilitychange",onHiddenOrPageHide,!0),addEventListener("pagehide",onHiddenOrPageHide,!0)},runOnce=function(cb){var called=!1;return function(arg){called||(cb(arg),called=!0)}},firstHiddenTime=-1,onVisibilityUpdate=function(event){"hidden"===document.visibilityState&&-1<firstHiddenTime&&(firstHiddenTime="visibilitychange"===event.type?event.timeStamp:0,removeChangeListeners())},getVisibilityWatcher=function(){return firstHiddenTime<0&&(firstHiddenTime=initHiddenTime(),addChangeListeners(),onBFCacheRestore(function(){setTimeout(function(){firstHiddenTime=initHiddenTime(),addChangeListeners()},0)})),{get firstHiddenTime(){return firstHiddenTime}}},whenActivated=function(callback){document.prerendering?addEventListener("prerenderingchange",function(){return callback()},!0):callback()},FCPThresholds=[1800,3e3],onFCP=function(onReport,opts){opts=opts||{},whenActivated(function(){var report,visibilityWatcher=getVisibilityWatcher(),metric=initMetric("FCP"),po=observe("paint",function(entries){entries.forEach(function(entry){"first-contentful-paint"===entry.name&&(po.disconnect(),entry.startTime<visibilityWatcher.firstHiddenTime)&&(metric.value=Math.max(entry.startTime-getActivationStart(),0),metric.entries.push(entry),report(!0))})});po&&(report=bindReporter(onReport,metric,FCPThresholds,opts.reportAllChanges),onBFCacheRestore(function(event){metric=initMetric("FCP"),report=bindReporter(onReport,metric,FCPThresholds,opts.reportAllChanges),doubleRAF(function(){metric.value=performance.now()-event.timeStamp,report(!0)})}))})},CLSThresholds=[.1,.25],listenerOpts={passive:!0,capture:!0},startTimeStamp=new Date,firstInputPolyfill=function(onFirstInput){callbacks.push(onFirstInput),reportFirstInputDelayIfRecordedAndValid()},resetFirstInputPolyfill=function(){callbacks=[],firstInputDelay=-1,firstInputEvent=null,eachEventType(addEventListener)},onInput=function(event){var delay;event.cancelable&&(delay=(1e12<event.timeStamp?new Date:performance.now())-event.timeStamp,("pointerdown"==event.type?function(delay,event){function removePointerEventListeners(){removeEventListener("pointerup",onPointerUp,listenerOpts),removeEventListener("pointercancel",onPointerCancel,listenerOpts)}var onPointerUp=function(){recordFirstInputDelay(delay,event),removePointerEventListeners()},onPointerCancel=function(){removePointerEventListeners()};addEventListener("pointerup",onPointerUp,listenerOpts),addEventListener("pointercancel",onPointerCancel,listenerOpts)}:recordFirstInputDelay)(delay,event))},FIDThresholds=[100,300],interactionCountEstimate=0,minKnownInteractionId=1/0,maxKnownInteractionId=0,getInteractionCount=function(){return po?interactionCountEstimate:performance.interactionCount||0},initInteractionCountPolyfill=function(){"interactionCount"in performance||(po=po||observe("event",updateEstimate,{type:"event",buffered:!0,durationThreshold:0}))},INPThresholds=[200,500],prevInteractionCount=0,getInteractionCountForNavigation=function(){return getInteractionCount()-prevInteractionCount},longestInteractionList=[],longestInteractionMap={},processEntry=function(entry){var minLongestInteraction=longestInteractionList[longestInteractionList.length-1],existingInteraction=longestInteractionMap[entry.interactionId];(existingInteraction||longestInteractionList.length<10||entry.duration>minLongestInteraction.latency)&&(existingInteraction?(existingInteraction.entries.push(entry),existingInteraction.latency=Math.max(existingInteraction.latency,entry.duration)):(minLongestInteraction={id:entry.interactionId,latency:entry.duration,entries:[entry]},longestInteractionMap[minLongestInteraction.id]=minLongestInteraction,longestInteractionList.push(minLongestInteraction)),longestInteractionList.sort(function(a,b){return b.latency-a.latency}),longestInteractionList.splice(10).forEach(function(i){delete longestInteractionMap[i.id]}))},estimateP98LongestInteraction=function(){var candidateInteractionIndex=Math.min(longestInteractionList.length-1,Math.floor(getInteractionCountForNavigation()/50));return longestInteractionList[candidateInteractionIndex]},LCPThresholds=[2500,4e3],reportedMetricIDs={},TTFBThresholds=[800,1800],whenReady=function whenReady(callback){document.prerendering?whenActivated(function(){return whenReady(callback)}):"complete"!==document.readyState?addEventListener("load",function(){return whenReady(callback)},!0):setTimeout(callback,0)},getLCPDebugTarget=function(entries){entries=entries[entries.length-1];return{debug_target:s247CommonModule.getSelector(entries.element),event_time:entries.startTime}},getLargestLayoutShiftEntry=function(entries){return entries.reduce(function(a,b){return a&&a.value>b.value?a:b})},getLargestLayoutShiftSource=function(sources){return sources.reduce(function(a,b){return a.node&&a.previousRect.width*a.previousRect.height>b.previousRect.width*b.previousRect.height?a:b})},getLongestEntryINP=function(entries){return entries.sort(function(a,b){return b.duration-a.duration||b.processingEnd-b.processingStart-(a.processingEnd-a.processingStart)})[0]},currentUrl=""!=window.location.hash?window.location.hash.replace("#",""):window.location.pathname;return{init:function(){var onReport,opts,metric,report;wcvDataObject={txnName:insightRUM.colHelpers.getFormatedTxnName(insightRUM,currentUrl)},onCLS(addToWcvDataObject),onFID(addToWcvDataObject),onLCP(addToWcvDataObject),onFCP(addToWcvDataObject),onReport=addToWcvDataObject,opts=opts||{},metric=initMetric("TTFB"),report=bindReporter(onReport,metric,TTFBThresholds,opts.reportAllChanges),whenReady(function(){var responseStart,navEntry=getNavigationEntry();!navEntry||(responseStart=navEntry.responseStart)<=0||responseStart>performance.now()||(metric.value=Math.max(responseStart-getActivationStart(),0),metric.entries=[navEntry],report(!0),onBFCacheRestore(function(){metric=initMetric("TTFB",0),(report=bindReporter(onReport,metric,TTFBThresholds,opts.reportAllChanges))(!0)}))}),onINP(addToWcvDataObject)},flushWcvData:function(insightRUM){try{var txn,metrics;0<Object.keys(wcvDataObject).length&&(wcvDataObject.txnName?(txn=wcvDataObject.txnName,delete wcvDataObject.txnName):txn=insightRUM.colHelpers.getTxn(insightRUM,document.location.pathname),metrics={wcvList:wcvDataObject,sessionInfo:insightRUM.metricsCollector.sessionInfo(insightRUM),configInfo:insightRUM.metricsCollector.configInfo(insightRUM),fullName:insightRUM.colHelpers.getFormatedTxnName(insightRUM,insightRUM.colHelpers.getTxn(insightRUM),!1),txnName:txn,domain:window.location.origin||"-"},insightRUM.dispatchMetrics(insightRUM,insightRUM.collector+"/rum/wcv",JSON.stringify(metrics)))}catch(e){}finally{wcvDataObject={}}}}}();
var s247ResourcesModule=function(){var CAPTURE_RESOURCES,currentDomain,lastCapturedResourcesIndex,STRING_LENGTH_RESTRICTED_KEYS=["name","domain","res_type","domain_type","initiator","extension"],MAX_STRING_LEN=100,MAX_RESOURCES_ALLOWED=1e3,SAMPLING_RATE=.05,IGNORED_RESOURCES=["site24x7"];function isCacheHit(resource){return!(0<resource.transferSize)&&(0<resource.decodedBodySize||resource.duration<30)}return{collect:function(sessionId,type){if("initial"==type&&(CAPTURE_RESOURCES=Math.random()<SAMPLING_RATE),void 0!==window.performance.setResourceTimingBufferSize&&CAPTURE_RESOURCES&&MAX_RESOURCES_ALLOWED)return window.performance.setResourceTimingBufferSize(500),function(sessionId){var processeddata=[];try{var data=window.performance.getEntriesByType("resource"),resourcesToBeTracked=data.slice(lastCapturedResourcesIndex,data.length);lastCapturedResourcesIndex=data.length,resourcesToBeTracked.forEach(function(eachRes){if(-1==eachRes.name.indexOf(insightRUM.collector)){var urlFragments,isRequest=0===eachRes.name.indexOf("http");if(resourceName=eachRes.name,!IGNORED_RESOURCES.some(function(ignoredRegex){return resourceName.match(ignoredRegex)})){var isRequest=isRequest?(isRequest=(urlFragments=eachRes.name.match(/:\/\/(.[^/]+)([^?]*)\??(.*)/))[2].split("/").pop()).substr((Math.max(0,isRequest.lastIndexOf("."))||1/0)+1):(urlFragments=["",location.host],eachRes.name.split(":")[0]),eachProcessedRes={name:function(name,domain){domain=name.substring(name.indexOf(domain)+domain.length,name.length);domain.length>MAX_STRING_LEN&&(name=(domain=domain.substring(domain.length-MAX_STRING_LEN,domain.length)).indexOf("/"),domain=domain.substring(name,domain.length));return domain}(eachRes.name,urlFragments[1]),domain:urlFragments[1],session_id:sessionId,ct:(new Date).getTime(),initiator:eachRes.initiatorType||isRequest||"SourceMap or Not Defined",extension:isRequest||"XHR or Not Defined",duration:eachRes.duration,res_type:function(fileExtension,initiatorType){if(fileExtension)switch(fileExtension){case"jpg":case"jpeg":case"png":case"gif":case"webp":case"svg":case"ico":return"image";case"mp3":case"wav":case"aac":case"flac":return"audio";case"mp4":case"avi":case"mov":case"mkv":case"flv":case"wmv":case"webm":return"video";case"js":return"js";case"css":return"css";case"html":return"html";case"woff":case"woff2":case"ttf":case"eot":case"otf":return"font";case"swf":return"flash";case"map":return"source-map"}if(initiatorType)switch(initiatorType){case"xmlhttprequest":return"ajax";case"fetch":return"fetch";case"beacon":return"beacon";case"img":case"image":return"image";case"script":return"js";case"internal":case"iframe":return"html";default:return"other"}return initiatorType}(isRequest,eachRes.initiatorType),domain_type:function(name){currentDomain||!function(){var currentUrlMatches=window.location.href.match(s247CommonModule.CONSTANTS.HOST_NAME_REGEX);currentUrlMatches&&currentUrlMatches[2]&&(currentDomain=currentUrlMatches[2])}();var name=name.match(s247CommonModule.CONSTANTS.HOST_NAME_REGEX),type="first";{var domain;name&&name[2]&&(domain=name[2],type=domain===currentDomain?"first":s247CommonModule.CONSTANTS.DEFAULT_CDN_DOMAINS.some(cdnDomain=>domain.includes(cdnDomain))||domain.includes("cdn")?"cdn":"third")}return type}(eachRes.name),fullname:eachRes.name.substring(0,s247CommonModule.CONSTANTS.MAX_EVENTS_METRIC_LENGTH),start_time:eachRes.startTime,cross_domain:urlFragments[1]!==location.host,status:function(entry){if(entry&&entry.responseStatus)return entry.responseStatus;if(entry){if(function(resource){return 0<resource.transferSize&&resource.transferSize<1e3&&0===resource.decodedBodySize}(entry))return 304;if(isCacheHit(entry))return 200}return 0}(eachRes),cached:isCacheHit(eachRes),size:eachRes.encodedBodySize,ratio:eachRes.decodedBodySize/eachRes.encodedBodySize};eachRes.requestStart&&(eachProcessedRes.blocked=function(resource){var blockingTime=0;resource.connectEnd&&resource.connectEnd===resource.fetchStart?blockingTime=resource.requestStart-resource.connectEnd:resource.domainLookupStart&&(blockingTime=resource.domainLookupStart-resource.fetchStart);return blockingTime}(eachRes),eachProcessedRes.dnsT=eachRes.domainLookupEnd-eachRes.domainLookupStart,eachProcessedRes.conT=eachRes.connectEnd-eachRes.connectStart,eachProcessedRes.fbT=eachRes.responseStart-eachRes.requestStart,eachProcessedRes.dlT=eachRes.responseEnd-eachRes.responseStart,eachProcessedRes.totalRT=eachRes.responseEnd-eachRes.requestStart),eachRes.secureConnectionStart&&(eachProcessedRes.sslT=eachRes.connectEnd-eachRes.secureConnectionStart),"XHR or Not Defined"==eachProcessedRes.extension?(s247CommonModule.eventIdObj[eachProcessedRes.fullname]?null==(isRequest=s247CommonModule.getClosestStartTime(s247CommonModule.eventIdObj[eachProcessedRes.fullname],eachProcessedRes.start_time,"resource"))?(eachProcessedRes.link=s247CommonModule.simpleHash(eachProcessedRes.fullname)+"_"+Math.round(eachProcessedRes.start_time),s247CommonModule.eventIdObj[eachProcessedRes.fullname].push({txnName:eachProcessedRes.fullname,st:Math.round(eachProcessedRes.start_time),ct:(new Date).getTime(),source:"resource"})):eachProcessedRes.link=s247CommonModule.simpleHash(isRequest.txnName)+"_"+Math.round(isRequest.st):(eachProcessedRes.link=s247CommonModule.simpleHash(eachProcessedRes.fullname)+"_"+Math.round(eachProcessedRes.start_time),s247CommonModule.eventIdObj[eachProcessedRes.fullname]=[{txnName:eachProcessedRes.fullname,st:Math.round(eachProcessedRes.start_time),ct:(new Date).getTime(),source:"resource"}]),s247CommonModule.eventIdObj=s247CommonModule.deleteLongLastingEvents(s247CommonModule.eventIdObj)):eachProcessedRes.link=s247CommonModule.simpleHash(eachProcessedRes.fullname)+"_"+Math.round(eachProcessedRes.start_time);for(var i=0;i<STRING_LENGTH_RESTRICTED_KEYS.length;i++)eachProcessedRes[STRING_LENGTH_RESTRICTED_KEYS[i]]&&eachProcessedRes[STRING_LENGTH_RESTRICTED_KEYS[i]].length>MAX_STRING_LEN&&(eachProcessedRes[STRING_LENGTH_RESTRICTED_KEYS[i]]=eachProcessedRes[STRING_LENGTH_RESTRICTED_KEYS[i]].substr(0,MAX_STRING_LEN));processeddata.push(eachProcessedRes),MAX_RESOURCES_ALLOWED--}}var resourceName})}catch(e){}return processeddata}(sessionId)},samplingRate:function(samplingRate){SAMPLING_RATE=samplingRate||SAMPLING_RATE},ignoreResources:function(resources){IGNORED_RESOURCES=IGNORED_RESOURCES.concat(resources)}}}();
function site24x7RumObjectEquals(x,y){if(x!==y){if(!(x instanceof Object&&y instanceof Object))return!1;if(x.constructor!==y.constructor)return!1;for(var p in x)if(x.hasOwnProperty(p)){if(!y.hasOwnProperty(p))return!1;if(x[p]!==y[p]){if("object"!=typeof x[p])return!1;if(!site24x7RumObjectEquals(x[p],y[p]))return!1}}for(p in y)if(y.hasOwnProperty(p)&&!x.hasOwnProperty(p))return!1}return!0}function site24x7RumError(config){var lastPercentIndex;"string"==typeof(config=config||{}).name&&(this.type=config.name),"string"==typeof config.message&&(config.message=encodeURIComponent(config.message),this.msg=500<config.message.length?config.message.substring(0,500):config.message,197<(lastPercentIndex=this.msg.lastIndexOf("%")))&&(this.msg=this.msg.substring(0,lastPercentIndex)),"string"==typeof config.fname&&(this.fname=100<config.fname.length?config.fname.substring(0,100):config.fname),"number"!=typeof config.lineNumber&&"string"!=typeof config.lineNumber||(this.lno=parseInt(config.lineNumber,10)),"number"!=typeof config.columnNumber&&"string"!=typeof config.columnNumber||(this.cno=parseInt(config.columnNumber,10)),void 0!==config.stack?this.trace=19<config.stack.length?config.stack.splice(0,19):config.stack:this.trace=[],void 0!==config.usertrace?this.usertrace=config.usertrace:this.usertrace=insightRUM.userTrace,void 0!==config.page&&(this.page=config.page),void 0!==config.fullpage&&(this.fullpage=150<config.fullpage.length?config.fullpage.substring(0,150):config.fullpage),void 0!==config.colTime&&(this.ct=config.colTime),void 0!==config.url?this.url=150<config.url.length?config.url.substring(0,149):config.url:this.url=document.location.pathname}!function(window){var TraceKit,_oldTraceKit,_slice,ERROR_TYPES_RE,_oldOnerrorHandler,_onErrorHandlerInstalled,_oldOnunhandledrejectionHandler,_onUnhandledRejectionHandlerInstalled,handlers,lastException,lastExceptionStack,debug,sourceCache;function _has(object,key){return Object.prototype.hasOwnProperty.call(object,key)}function notifyHandlers(stack,isWindowError,error){var exception=null;if(!isWindowError||TraceKit.collectWindowErrors){for(var i in handlers)if(_has(handlers,i))try{handlers[i](stack,isWindowError,error)}catch(inner){exception=inner}if(exception)throw exception}}function traceKitWindowOnError(message,url,lineNo,columnNo,errorObj){var location,name,msg,groups;return lastExceptionStack?(TraceKit.computeStackTrace.augmentStackTraceWithInitialElement(lastExceptionStack,url,lineNo,message),processLastException()):errorObj?notifyHandlers(TraceKit.computeStackTrace(errorObj),!0,errorObj):(location={url:url,line:lineNo,column:columnNo},"[object String]"==={}.toString.call(msg=message)&&(groups=message.match(ERROR_TYPES_RE))&&(name=groups[1],msg=groups[2]),location.func=TraceKit.computeStackTrace.guessFunctionName(location.url,location.line),location.context=TraceKit.computeStackTrace.gatherContext(location.url,location.line),notifyHandlers({name:name,message:msg,mode:"onerror",stack:[location]},!0,null)),!!_oldOnerrorHandler&&_oldOnerrorHandler.apply(this,arguments)}function traceKitWindowOnUnhandledRejection(e){notifyHandlers(TraceKit.computeStackTrace(e.reason),!0,e.reason)}function processLastException(){var _lastExceptionStack=lastExceptionStack,_lastException=lastException;lastException=lastExceptionStack=null,notifyHandlers(_lastExceptionStack,!1,_lastException)}function report(ex){if(lastExceptionStack){if(lastException===ex)return;processLastException()}var stack=TraceKit.computeStackTrace(ex);throw lastExceptionStack=stack,lastException=ex,setTimeout(function(){lastException===ex&&processLastException()},stack.incomplete?2e3:0),ex}function getSource(url){if("string"!=typeof url)return[];if(!_has(sourceCache,url)){var source="",domain="";try{domain=window.document.domain}catch(e){}var match=/(.*):\/\/([^:/]+)([:\d]*)\/{0,1}([\s\S]*)/.exec(url);match&&match[2]===domain&&(source="string"!=typeof url?[]:""),sourceCache[url]=source?source.split("\n"):[]}return sourceCache[url]}function guessFunctionName(url,lineNo){var m,reFunctionArgNames=/function ([^(]*)\(([^)]*)\)/,reGuessFunction=/['"]?([0-9A-Za-z$_]+)['"]?\s*[:=]\s*(function|eval|new Function)/,line="",source=getSource(url);if(source.length)for(var i=0;i<10;++i)if(void 0!==(line=source[lineNo-i]+line)){if(m=reGuessFunction.exec(line))return m[1];if(m=reFunctionArgNames.exec(line))return m[1]}return"?"}function gatherContext(url,line){var source=getSource(url);if(!source.length)return null;var context=[],url=Math.floor(TraceKit.linesOfContext/2),linesAfter=url+TraceKit.linesOfContext%2,url=Math.max(0,line-url-1),end=Math.min(source.length,line+linesAfter-1);--line;for(var i=url;i<end;++i)void 0!==source[i]&&context.push(source[i]);return 0<context.length?context:null}function escapeRegExp(text){return text.replace(/[-[\]{}()*+?.,\\^$|#]/g,"\\$&")}function escapeCodeAsRegExpForMatchingInsideHTML(body){return escapeRegExp(body).replace("<","(?:<|&lt;)").replace(">","(?:>|&gt;)").replace("&","(?:&|&amp;)").replace('"','(?:"|&quot;)').replace(/\s+/g,"\\s+")}function findSourceInUrls(re,urls){for(var source,m,i=0,j=urls.length;i<j;++i)if((source=getSource(urls[i])).length&&(source=source.join("\n"),m=re.exec(source)))return{url:urls[i],line:source.substring(0,m.index).split("\n").length,column:m.index-source.lastIndexOf("\n",m.index)-1};return null}function findSourceInLine(fragment,url,line){var url=getSource(url),fragment=new RegExp("\\b"+escapeRegExp(fragment)+"\\b");return--line,url&&url.length>line&&(fragment=fragment.exec(url[line]))?fragment.index:null}function computeStackTraceFromStackProp(ex){if(!ex.stack)return null;for(var submatch,parts,chrome=/^\s*at (.*?) ?\(((?:file|https?|blob|chrome-extension|native|eval|webpack|<anonymous>|\/).*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,gecko=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)((?:file|https?|blob|chrome|webpack|resource|\[native).*?|[^@]*bundle)(?::(\d+))?(?::(\d+))?\s*$/i,winjs=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i,geckoEval=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,chromeEval=/\((\S*)(?::(\d+))(?::(\d+))\)/,lines=ex.stack.split("\n"),stack=[],reference=/^(.*) is undefined$/.exec(ex.message),i=0,j=lines.length;i<j;++i){if(parts=chrome.exec(lines[i])){var isNative=parts[2]&&0===parts[2].indexOf("native");parts[2]&&0===parts[2].indexOf("eval")&&(submatch=chromeEval.exec(parts[2]))&&(parts[2]=submatch[1],parts[3]=submatch[2],parts[4]=submatch[3]),isNative={url:isNative?null:parts[2],func:parts[1]||"?",args:isNative?[parts[2]]:[],line:parts[3]?+parts[3]:null,column:parts[4]?+parts[4]:null}}else if(parts=winjs.exec(lines[i]))isNative={url:parts[2],func:parts[1]||"?",args:[],line:+parts[3],column:parts[4]?+parts[4]:null};else{if(!(parts=gecko.exec(lines[i])))continue;parts[3]&&-1<parts[3].indexOf(" > eval")&&(submatch=geckoEval.exec(parts[3]))?(parts[3]=submatch[1],parts[4]=submatch[2],parts[5]=null):0!==i||parts[5]||void 0===ex.columnNumber||(stack[0].column=ex.columnNumber+1),isNative={url:parts[3],func:parts[1]||"?",args:parts[2]?parts[2].split(","):[],line:parts[4]?+parts[4]:null,column:parts[5]?+parts[5]:null}}!isNative.func&&isNative.line&&(isNative.func=guessFunctionName(isNative.url,isNative.line)),isNative.context=isNative.line?gatherContext(isNative.url,isNative.line):null,stack.push(isNative)}return stack.length?(stack[0]&&stack[0].line&&!stack[0].column&&reference&&(stack[0].column=findSourceInLine(reference[1],stack[0].url,stack[0].line)),{mode:"stack",name:ex.name,message:ex.message,stack:stack}):null}function augmentStackTraceWithInitialElement(stackInfo,url,lineNo,message){url={url:url,line:lineNo};if(url.url&&url.line){stackInfo.incomplete=!1,url.func||(url.func=guessFunctionName(url.url,url.line)),url.context||(url.context=gatherContext(url.url,url.line));lineNo=/ '([^']+)' /.exec(message);if(lineNo&&(url.column=findSourceInLine(lineNo[1],url.url,url.line)),0<stackInfo.stack.length&&stackInfo.stack[0].url===url.url){if(stackInfo.stack[0].line===url.line)return!1;if(!stackInfo.stack[0].line&&stackInfo.stack[0].func===url.func)return stackInfo.stack[0].line=url.line,stackInfo.stack[0].context=url.context,!1}return stackInfo.stack.unshift(url),stackInfo.partial=!0}return!(stackInfo.incomplete=!0)}function computeStackTraceByWalkingCallerChain(ex,depth){for(var parts,item,source,reference,functionName=/function\s+([_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*)?\s*\(/i,stack=[],funcs={},recursion=!1,curr=computeStackTraceByWalkingCallerChain.caller;curr&&!recursion;curr=curr.caller)if(curr!==computeStackTrace&&curr!==TraceKit.report){if(item={url:null,func:"?",args:[],line:null,column:null},curr.name?item.func=curr.name:(parts=functionName.exec(curr.toString()))&&(item.func=parts[1]),void 0===item.func)try{item.func=parts.input.substring(0,parts.input.indexOf("{"))}catch(e){}(source=function(func){if(void 0!==(window&&window.document)){for(var parts,name,body,urls=[window.location.href],scripts=window.document.getElementsByTagName("script"),func=""+func,i=0;i<scripts.length;++i){var script=scripts[i];script.src&&urls.push(script.src)}if(name=findSourceInUrls((parts=/^function(?:\s+([\w$]+))?\s*\(([\w\s,]*)\)\s*\{\s*(\S[\s\S]*\S)\s*\}\s*$/.exec(func))?(name=parts[1]?"\\s+"+parts[1]:"",args=parts[2].split(",").join("\\s*,\\s*"),body=escapeRegExp(parts[3]).replace(/;$/,";?"),new RegExp("function"+name+"\\s*\\(\\s*"+args+"\\s*\\)\\s*{\\s*"+body+"\\s*}")):new RegExp(escapeRegExp(func).replace(/\s+/g,"\\s+")),urls))return name;if(parts=/^function on([\w$]+)\s*\(event\)\s*\{\s*(\S[\s\S]*\S)\s*\}\s*$/.exec(func)){var args=parts[1];if(body=escapeCodeAsRegExpForMatchingInsideHTML(parts[2]),name=findSourceInUrls(new RegExp("on"+args+"=[\\'\"]\\s*"+body+"\\s*[\\'\"]","i"),urls[0]))return name;if(name=findSourceInUrls(new RegExp(body),urls))return name}return null}}(curr))&&(item.url=source.url,item.line=source.line,"?"===item.func&&(item.func=guessFunctionName(item.url,item.line)),reference=/ '([^']+)' /.exec(ex.message||ex.description))&&(item.column=findSourceInLine(reference[1],source.url,source.line)),funcs[""+curr]?recursion=!0:funcs[""+curr]=!0,stack.push(item)}depth&&stack.splice(0,depth);depth={mode:"callers",name:ex.name,message:ex.message,stack:stack};return augmentStackTraceWithInitialElement(depth,ex.sourceURL||ex.fileName,ex.line||ex.lineNumber,ex.message||ex.description),depth}function computeStackTrace(ex,depth){var stack=null;depth=null==depth?0:+depth;try{if(stack=function(ex){var stacktrace=ex.stacktrace;if(stacktrace){for(var parts,opera10Regex=/ line (\d+).*script (?:in )?(\S+)(?:: in function (\S+))?$/i,opera11Regex=/ line (\d+), column (\d+)\s*(?:in (?:<anonymous function: ([^>]+)>|([^)]+))\((.*)\))? in (.*):\s*$/i,lines=stacktrace.split("\n"),stack=[],line=0;line<lines.length;line+=2){var element=null;if((parts=opera10Regex.exec(lines[line]))?element={url:parts[2],line:+parts[1],column:null,func:parts[3],args:[]}:(parts=opera11Regex.exec(lines[line]))&&(element={url:parts[6],line:+parts[1],column:+parts[2],func:parts[3]||parts[4],args:parts[5]?parts[5].split(","):[]}),element){if(!element.func&&element.line&&(element.func=guessFunctionName(element.url,element.line)),element.line)try{element.context=gatherContext(element.url,element.line)}catch(exc){}element.context||(element.context=[lines[line+1]]),stack.push(element)}}return stack.length?{mode:"stacktrace",name:ex.name,message:ex.message,stack:stack}:null}}(ex))return stack}catch(e){if(debug)throw e}try{if(stack=computeStackTraceFromStackProp(ex))return stack}catch(e){if(debug)throw e}try{if(stack=function(ex){var lines=ex.message.split("\n");if(lines.length<4)return null;var s,lineRE1=/^\s*Line (\d+) of linked script ((?:file|https?|blob)\S+)(?:: in function (\S+))?\s*$/i,lineRE2=/^\s*Line (\d+) of inline#(\d+) script in ((?:file|https?|blob)\S+)(?:: in function (\S+))?\s*$/i,lineRE3=/^\s*Line (\d+) of function script\s*$/i,stack=[],scripts=window&&window.document&&window.document.getElementsByTagName("script"),inlineScriptBlocks=[];for(s in scripts)_has(scripts,s)&&!scripts[s].src&&inlineScriptBlocks.push(scripts[s]);for(var line=2;line<lines.length;line+=2){var relativeLine,source,script,parts,item=null;(parts=lineRE1.exec(lines[line]))?item={url:parts[2],func:parts[3],args:[],line:+parts[1],column:null}:(parts=lineRE2.exec(lines[line]))?(item={url:parts[3],func:parts[4],args:[],line:+parts[1],column:null},relativeLine=+parts[1],(script=inlineScriptBlocks[parts[2]-1])&&(source=getSource(item.url))&&0<=(script=(source=source.join("\n")).indexOf(script.innerText))&&(item.line=relativeLine+source.substring(0,script).split("\n").length)):(parts=lineRE3.exec(lines[line]))&&(item={url:relativeLine=window.location.href.replace(/#.*$/,""),func:"",args:[],line:(source=findSourceInUrls(new RegExp(escapeCodeAsRegExpForMatchingInsideHTML(lines[line+1])),[relativeLine]))?source.line:parts[1],column:null}),item&&(item.func||(item.func=guessFunctionName(item.url,item.line)),parts=(script=gatherContext(item.url,item.line))?script[Math.floor(script.length/2)]:null,script&&parts.replace(/^\s*/,"")===lines[line+1].replace(/^\s*/,"")?item.context=script:item.context=[lines[line+1]],stack.push(item))}return stack.length?{mode:"multiline",name:ex.name,message:lines[0],stack:stack}:null}(ex))return stack}catch(e){if(debug)throw e}try{if(stack=computeStackTraceByWalkingCallerChain(ex,depth+1))return stack}catch(e){if(debug)throw e}return{name:ex.name,message:ex.message,mode:"failed"}}window&&(TraceKit={},_oldTraceKit=window.TraceKit,_slice=[].slice,ERROR_TYPES_RE=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/,TraceKit.noConflict=function(){return window.TraceKit=_oldTraceKit,TraceKit},TraceKit.wrap=function(func){return function(){try{return func.apply(this,arguments)}catch(e){throw TraceKit.report(e),e}}},TraceKit.report=(handlers=[],lastExceptionStack=lastException=null,report.subscribe=function(handler){!0!==_onErrorHandlerInstalled&&(_oldOnerrorHandler=window.onerror,window.onerror=traceKitWindowOnError,_onErrorHandlerInstalled=!0),!0!==_onUnhandledRejectionHandlerInstalled&&(_oldOnunhandledrejectionHandler=window.onunhandledrejection,window.onunhandledrejection=traceKitWindowOnUnhandledRejection,_onUnhandledRejectionHandlerInstalled=!0),handlers.push(handler)},report.unsubscribe=function(handler){for(var i=handlers.length-1;0<=i;--i)handlers[i]===handler&&handlers.splice(i,1);0===handlers.length&&(_onErrorHandlerInstalled&&(window.onerror=_oldOnerrorHandler,_onErrorHandlerInstalled=!1),_onUnhandledRejectionHandlerInstalled)&&(window.onunhandledrejection=_oldOnunhandledrejectionHandler,_onUnhandledRejectionHandlerInstalled=!1)},report),TraceKit.computeStackTrace=(debug=!1,sourceCache={},computeStackTrace.augmentStackTraceWithInitialElement=augmentStackTraceWithInitialElement,computeStackTrace.computeStackTraceFromStackProp=computeStackTraceFromStackProp,computeStackTrace.guessFunctionName=guessFunctionName,computeStackTrace.gatherContext=gatherContext,computeStackTrace.ofCaller=function(depth){depth=1+(null==depth?0:+depth);try{throw new Error}catch(ex){return computeStackTrace(ex,depth+1)}},computeStackTrace.getSource=getSource,computeStackTrace),TraceKit.extendToAsynchronousCallbacks=function(){function _helper(fnName){var originalFn=window[fnName];window[fnName]=function(){var args=_slice.call(arguments),originalCallback=args[0];return"function"==typeof originalCallback&&(args[0]=TraceKit.wrap(originalCallback)),originalFn.apply?originalFn.apply(this,args):originalFn(args[0],args[1])}}_helper("setTimeout"),_helper("setInterval")},TraceKit.remoteFetching||(TraceKit.remoteFetching=!0),TraceKit.collectWindowErrors||(TraceKit.collectWindowErrors=!0),(!TraceKit.linesOfContext||TraceKit.linesOfContext<1)&&(TraceKit.linesOfContext=11),window.TraceKit=TraceKit)}(window),site24x7RumError.prototype.equals=function(otherError){return"object"==typeof otherError&&this.msg===otherError.msg&&this.fname===otherError.fname&&this.lno===otherError.lno&&this.cno===otherError.cno&&!!site24x7RumObjectEquals(this.trace,otherError.trace)&&this.type===otherError.type},site24x7RumError.subscribeToTraceKitError=function(errorData){var errTxnName,url;errorData.name&&(Array.isArray(errorData.stack)&&0<errorData.stack.length&&(errorData.functionName=errorData.stack[0].func,(url=null==errorData.stack[0].url?"?":"object"==typeof errorData.stack[0].url?null!=errorData.stack[0].url.ajax?errorData.stack[0].url.ajax:"?":errorData.stack[0].url)&&void 0!==url&&""!=url||(url=document.location.pathname,errorData.stack[0].url=url),url&&"string"==typeof url&&(errTxnName="<anonymous>"!=url?insightRUM.colHelpers.getErrTxnName(insightRUM,url):url,errorData.url=url,errorData.fname=insightRUM.colHelpers.getFileName(insightRUM,errTxnName)),(!errorData.fname||errorData.fname.length<=0)&&(errorData.fname=insightRUM.colHelpers.getFileName(insightRUM,location.hash)),errorData.stack.forEach(function(stack){stack.url="<anonymous>"!=stack.url?stack.url:"anonymous",stack.fname=insightRUM.colHelpers.getFileName(insightRUM,stack.url),stack.line&&(stack.lineno=stack.line),delete stack.line,stack.column&&(stack.colno=stack.column),delete stack.column,delete stack.args,delete stack.context})),!errorData.fname&&(errorData.fname=insightRUM.colHelpers.getFileName(insightRUM,location.hash),!errorData.fname||errorData.fname.length<1)&&(errorData.fname="unknown file"),errorData.page=insightRUM?insightRUM.colHelpers.getTxn(insightRUM):document.location.origin,errorData.fullpage=insightRUM.includeQueryParams?window.location.href:window.location.href.split("?")[0],errorData.colTime=(new Date).getTime(),errorData=new site24x7RumError(errorData),0<(url=insightRUM.rawErrors.length)&&!errorData.equals(insightRUM.rawErrors[url-1])||0==url)&&(insightRUM.rawErrors.push(errorData),insightRUM.colHelpers.addEvents(insightRUM,void 0,"error",errorData.msg))},TraceKit.report.subscribe(site24x7RumError.subscribeToTraceKitError);
var JSON,insightRUM={colHelpers:{getFileName:function(i,f){return(f=f&&"string"!=typeof f?f.ajax||"-":f)&&""!=f?f.substr(f.lastIndexOf("/")+1,f.length):""},addSPAEvents:function(a){return 1==a?["onpushstate","onreplacestate","onpopstate"]:["onhashchange"]},pushRoutes:function(i,loc,perfTime){var routechange;"undefined"!=typeof site24x7rum&&void 0!==site24x7rum.routeChanges&&((routechange={}).time=perfTime,routechange.url=-1<loc.hash.indexOf("#")?loc.hash.replace("#",""):loc.pathname,i.userTrace&&i.colHelpers.addUserTrace(i,"load",routechange.url),i.colHelpers.addEvents(i,void 0,"load",routechange.url,window.location.href),site24x7rum.routeChanges.push(routechange),i.isSPA)&&void 0!==window.insightPARUM&&window.insightPARUM.run()},getCurrentTime:function(){return"now"in window.performance==0?s247CommonModule.getCurrentMillis()-window.performance.timing.navigationStart:Math.round(window.performance.now())},getCurrentUrl:function(i){var currentUrl=""!=window.location.hash?window.location.hash.replace("#",""):window.location.pathname;return i.colHelpers.getFormatedTxnName(i,currentUrl)},getErrTxnName:function(i,txn){var tsi=txn&&-1<txn.indexOf(document.location.origin)?document.location.origin.length:0,tsi=txn?txn.substr(tsi,-1<txn.indexOf("?")?txn.indexOf("?")-tsi:txn.length):document.location.pathname;return tsi=-1<tsi.indexOf("https")||-1<tsi.indexOf("http")?tsi.replace(/(http|https):\/\//,""):tsi},addUserTrace:function(i,event,msg){var lastPercentIndex=(msg=150<(msg=encodeURI(msg)).length?msg.substring(0,150):msg).lastIndexOf("%");147<lastPercentIndex&&(msg=msg.substring(0,lastPercentIndex-1)),i.userTrace.push({action:event,name:msg,timestamp:s247CommonModule.getCurrentMillis()}),i.userTrace=i.userTrace.slice(Math.max(i.userTrace.length-10,0))},addToSession:function(i,n,t,dt,s,e){var prev,sE={},s=(sE.nm=n,sE[t]=dt,sE.st=Math.round(s),sE.et=Math.round(void 0!==e?e:i.colHelpers.getCurrentTime()),"scroll"==n||"typing"==n?n:"");i.userTrace&&"event"==t&&(e=dt.or,(prev=0<i.userTrace.length?i.userTrace[i.userTrace.length-1]:{}).action&&prev.action==s&&prev.name&&prev.name==e||i.colHelpers.addUserTrace(i,n,dt.or)),"undefined"!=typeof site24x7rum&&void 0!==site24x7rum.sessionTrace&&(0<site24x7rum.sessionTrace.length&&site24x7rum.sessionTrace[site24x7rum.sessionTrace.length-1].nm==s?((prev=site24x7rum.sessionTrace.pop()).et=sE.et,site24x7rum.sessionTrace.push(prev)):site24x7rum.sessionTrace.push(sE))},addAjaxToSession:function(i,name,type,d,st){var j,e;(e=window.performance.getEntriesByName?window.performance.getEntriesByName(name):e)&&0<e.length&&e[j=i.xhrCallTracker.hasOwnProperty(name)?i.xhrCallTracker[name]:0].duration&&(e[j].loadEventEnd=e[j].fetchStart+e[j].duration,e=i.colHelpers.getPerfStats(i,e[j]),i.colHelpers.addToSession(i,i.colHelpers.getFormatedTxnName(i,name),type,d,st,st+e.totalRT))},getObjAsArray:function(o){var key,obj,arr=new Array;for(key in o)o.hasOwnProperty(key)&&((obj=o[key]).loadTime=Math.round(obj.loadTime/obj.count),arr.push(obj));return arr},getAsArray:function(o,l,p){for(var obj,ret=Object.keys(o).sort(function(a,b){return o[b][p]-o[a][p]}),arr=new Array,j=0;j<ret.length;j++)o.hasOwnProperty(ret[j])&&(obj=o[ret[j]],arr.push(obj));return arr.slice(0,l)},getPerfStats:function(i,pe){var responseStart,requestStart,mD,tsi;if(void 0!==pe)return responseStart=!pe.responseStart||pe.responseStart<=0?pe.fetchStart:pe.responseStart,requestStart=0==pe.requestStart?pe.fetchStart:pe.requestStart,tsi=pe.name&&-1<pe.name.indexOf(document.location.origin)?document.location.origin.length:0,(mD={}).txnName=pe.name?pe.name.substr(tsi,-1<pe.name.indexOf("?")?pe.name.indexOf("?")-tsi:pe.name.length):document.location.pathname,mD.txnName=i.colHelpers.getFormatedTxnName(i,i.includeQueryParams?mD.txnName+document.location.search:mD.txnName),mD.fullName=pe.name?pe.name.substr(tsi,-1<pe.name.indexOf("?")?pe.name.indexOf("?")-tsi:pe.name.length):i.isSPA?document.location.pathname+document.location.hash:document.location.pathname,mD.fullName=i.colHelpers.getFormatedTxnName(i,i.includeQueryParams?mD.fullName+document.location.search:mD.fullName,!1),mD.rdT=Math.round(0<pe.fetchStart&&0<pe.domainLookupStart-pe.fetchStart?pe.domainLookupStart-pe.fetchStart:pe.redirectEnd-pe.redirectStart),mD.acT=Math.round(0<pe.fetchStart&&0<pe.domainLookupStart-pe.fetchStart?pe.domainLookupStart-pe.fetchStart:0),mD.dnsT=Math.round(pe.domainLookupEnd-pe.domainLookupStart),mD.conT=Math.round(0<pe.connectStart&&0<requestStart-pe.connectStart?requestStart-pe.connectStart:pe.connectEnd-pe.connectStart),mD.beT=Math.round(responseStart-requestStart),mD.dlT=0<responseStart&&0<pe.responseEnd-responseStart?Math.round(pe.responseEnd-responseStart):0,mD.nwT=Math.round(mD.rdT+mD.dnsT+mD.conT+mD.dlT),mD.fbT=0<pe.responseStart&&0<pe.fetchStart?Math.round(pe.responseStart-pe.fetchStart):Math.round(mD.beT+mD.nwT-mD.dlT),tsi=mD.beT+mD.nwT-mD.dlT-mD.fbT,Math.abs(tsi)<5&&(mD.fbT+=tsi),pe.domComplete&&pe.domLoading?(mD.dpT=Math.round(pe.domComplete-pe.domLoading),mD.prT=Math.round(0<pe.loadEventEnd&&0<pe.loadEventStart?pe.loadEventEnd-pe.loadEventStart:0)):mD.dpT=mD.prT=0,mD.drT=Math.round(mD.dpT),mD.feT=mD.drT+mD.prT,mD.totalRT=(i=mD.nwT+mD.beT+mD.feT)<mD.fbT?mD.fbT:i,mD},addToResInfo:function(i,a){var m=a.name.match(s247CommonModule.CONSTANTS.HOST_NAME_REGEX),nm=a.initiatorType&&-1!=s247CommonModule.CONSTANTS.INITIATOR_TYPES.toString().indexOf(a.initiatorType)?a.initiatorType:"Others",a=i.colHelpers.getPerfStats(i,a);m&&m[2]&&(i.domainInfo[m[2]]={count:i.domainInfo[m[2]]?i.domainInfo[m[2]].count+1:1,loadTime:i.domainInfo[m[2]]?i.domainInfo[m[2]].loadTime+a.totalRT:a.totalRT,name:m[2]}),i.resourcesTotal[nm]={loadTime:(i.resourcesTotal[nm]?i.resourcesTotal[nm].loadTime:0)+a.totalRT,count:(i.resourcesTotal[nm]?i.resourcesTotal[nm].count:0)+1,name:nm}},getTxn:function(i,url){var n="",l=window.location;return void 0!==url?n=url.substr(0,-1<url.indexOf("?")?+url.indexOf("?"):url.length):l.pathname&&void 0!==l.hash&&(n=""!=l.hash?l.hash:l.pathname),n=i.includeQueryParams?n+document.location.search:n,150<(n=i.colHelpers.getObfuscatedTxnName(i,n)).length?n.substring(0,149):n},getDomainFromTxn:function(i,txn){if(void 0!==txn){txn=txn.match(s247CommonModule.CONSTANTS.HOST_NAME_REGEX);if(txn&&txn[2])return txn[2]}return null},getFormatedTxnName:function(i,name,obfuscate){if(void 0!==name)return name=void 0===obfuscate?i.colHelpers.getObfuscatedTxnName(i,name):name,i.includeQueryParams||(name=(name=name.substr(0,-1<name.indexOf("?")?+name.indexOf("?"):name.length)).substr(0,-1<name.indexOf("&")?+name.indexOf("&"):name.length),name=void 0===obfuscate?name.substr(0,-1<name.indexOf("#")?+name.indexOf("#"):name.length):name),147<(i=(name=150<(name=encodeURI(name)).length?name.substring(0,150):name).lastIndexOf("%"))?name.substring(0,i-1):name},getObfuscatedTxnName:function(i,name){var replacement=name;if(void 0!==name){var paths=name.split("/"),total=paths.length,isFirstWordInPath=!0,words=(name.startsWith("/")&&total--,name.endsWith("/")&&total--,total>function(name){var re=i.webTxnsGroupingRegex||/\/([^\\/$]*[0-9]+[^\\/$]*)/g;return((name||"").match(re)||[]).length}(name));if(i.fullWebTxnsGroupingRegex)return i.colHelpers.getFullObfuscatedTxnName(i,name,paths,words);paths.forEach(function(path){if(0<path.length){var hasWebTxnsGroupingRegex=null!=i.webTxnsGroupingRegex;if(!isFirstWordInPath&&(hasWebTxnsGroupingRegex&&("/"+path).match(i.webTxnsGroupingRegex)||!hasWebTxnsGroupingRegex&&path.match(/.*\d/g)))if(words){if(i.exemptedKeywords&&path.match(i.exemptedKeywords))return;replacement=replacement.replace(path,"*")}else words=!0;isFirstWordInPath=isFirstWordInPath&&!1}})}return replacement},getFullObfuscatedTxnName:function(i,name,paths,words){if(void 0!==name&&null!=paths)for(var replacement="",isFirstWordInPath=!0,index=0;index<paths.length;index++){var path=paths[index];if(0<path.length){var hasFullWebTxnsGroupingRegex=null!=i.fullWebTxnsGroupingRegex;if(!isFirstWordInPath&&(hasFullWebTxnsGroupingRegex&&("/"+path).match(i.fullWebTxnsGroupingRegex)||!hasFullWebTxnsGroupingRegex&&path.match(/.*\d/g)))if(words){if(!i.exemptedKeywords||!path.match(i.exemptedKeywords)){replacement+="/*";break}}else words=!0;replacement+="/"+path,isFirstWordInPath=isFirstWordInPath&&!1}}return""!=replacement?replacement:name},addPerfStats:function(i,pe1,pe2,params){for(var metricData={},j=0;j<params.length;j++)metricData[params[j]]=pe1[params[j]]+pe2[params[j]];return pe1.totalCT&&pe2.totalCT&&(metricData.totalCT=pe1.totalCT+pe2.totalCT),pe1.status&&pe2.status&&(metricData.status=i.colHelpers.addStatusCode(pe1.status,pe2.status)),metricData},getAverageStats:function(metricData,len,params){for(var i=0;i<params.length;i++)metricData[params[i]]=Math.round(metricData[params[i]]/len);return metricData},getPerfObject:function(){var p={};return p.rdT=p.acT=p.dnsT=p.conT=p.nwT=p.sendT=p.fbT=p.beT=p.dlT=p.dpT=p.drT=p.prT=p.feT=p.totalRT=0,p},getSimpleUrl:function(){return window.location.hash&&-1<window.location.hash.indexOf("#")?window.location.hash.replace("#",""):window.location.pathname},isDomainAllowed:function(i,pDomain){for(var d=0;d<i.excludedDomains.length;d++)if(""!=i.excludedDomains[d]&&0<=pDomain.indexOf(i.excludedDomains[d]))return!1;return!0},isNetworkDetailsAllowed:function(i,url){if(i.collectNetworkDetails&&s247ConfigModule.getConfig("recordSession")){for(const pattern of i.excludedNetworkUrls){if("string"==typeof pattern&&url.includes(pattern))return!1;if(pattern instanceof RegExp&&pattern.test(url))return!1}for(const pattern of i.allowedNetworkUrls){if("string"==typeof pattern&&url.includes(pattern))return!0;if(pattern instanceof RegExp&&pattern.test(url))return!0}return!1}},startMutationObserver:function(i){i.collectMutations=!1,void 0===i.observerV&&(i.observerV=new MutationObserver(function(e){i.lastMutation=s247CommonModule.getCurrentMillis(),e.forEach(function(){var t=i.colHelpers.getCurrentTime(),loc=i.colHelpers.getSimpleUrl(),obj={};i.urls.mut!=loc&&(i.collectMutations=!0,obj.url=loc,obj.start=t,i.colHelpers.spaController(i,obj,"dom","start"),i.urls.mut=loc,i.mutArray=[]),(i.collectMutations||i.nwkTracker[loc]&&Math.abs(t-i.nwkTracker[loc].end)<100)&&i.mutArray&&(0<i.mutArray.length&&100<t-i.mutArray[i.mutArray.length-1]&&i.urls.mut==loc?(loc=window.location,obj.url=-1<loc.hash.indexOf("#")?loc.hash.replace("#",""):loc.pathname,obj.end=i.mutArray[i.mutArray.length-1],i.nwkTracker[loc]&&Math.abs(t-i.nwkTracker[loc].end)<100&&(obj.end=t),i.colHelpers.spaController(i,obj,"dom","end"),i.collectMutations=!1):i.urls.mut==loc&&(i.spa.end=t,i.mutArray.push(t),5<i.mutArray.length)&&(i.mutArray=i.mutArray.slice(-5)))})}),i.observerV.observe(document,{childList:!0,subtree:!0,characterData:!0,characterDataOldValue:!0}))},spaController:function(i,obs,type,prompt){var obj;"start"==prompt?"dom"==type&&(""==i.spa.state||i.spa.state==obs.url?(i.spa.state=obs.url,i.spa.start=(0!=i.spa.start&&obs.start>i.spa.start?i.spa:obs).start,i.spa.end=(obs.end&&obs.end>i.spa.start?obs:i.spa).end):i.spa.sent!=i.spa.state&&(i.spa.sent=i.spa.state,""!=i.spa.state&&0!=i.spa.start&&0!=i.spa.end&&i.spa.end>=i.spa.start&&i.spa.end<i.colHelpers.getCurrentTime()&&(obj={url:i.spa.state,start:i.spa.start,end:i.spa.end},i.spaTracker.push(obj),i.storeLastAjax("spa")),i.spa.state=obs.url,i.spa.start=obs.start)):"end"==prompt&&"dom"==type&&""!=i.spa.state&&0<i.spa.start&&(i.spa.end=(obs.end>i.spa.end?obs:i.spa).end)},observeNetwork:function(i,o){var loc,nst;i.isSPA&&!i.ignoreNetworkForSPA&&(loc=i.colHelpers.getSimpleUrl(),i.urls.nwk!=loc?(i.urls.nwk=loc,i.nwkTracker[loc]={start:o.st,end:o.end},i.xhrt=i.nwkTracker[loc].end):i.xhrt&&i.xhrt+100>o.st&&(nst=i.nwkTracker[loc])&&nst.start&&(nst.start<o.st||Math.abs(nst.start-o.st)<100)&&(i.nwkTracker[loc].start=nst.start<o.st?nst.start:o.st,i.nwkTracker[loc].end=(nst.end<o.end?o:nst).end))},getSPTPerformance:function(i){try{if(window.performance.getEntries){for(var m=Number(i.spa.resourceStart),n=Number(i.colHelpers.getPerformanceEntriesLen()),l=0,aggregatedStats=i.colHelpers.getPerfObject();m<n;m++){var rPerf,res=window.performance.getEntries()[m];if("xmlhttprequest"!=(res.initiatorType&&-1!=s247CommonModule.CONSTANTS.INITIATOR_TYPES.toString().indexOf(res.initiatorType)?res.initiatorType:"Others")&&res.startTime&&res.startTime>i.spa.start&&res.startTime<i.spa.end&&(rPerf=i.colHelpers.getPerfStats(i,res),aggregatedStats=i.colHelpers.addPerfStats(i,rPerf,aggregatedStats,s247CommonModule.CONSTANTS.TIMING_METRICS),l++),res.startTime>i.spa.end){i.spa.resourceStart=m;break}}return{perfStats:aggregatedStats,len:l}}return null}catch(e){return null}},resetSPA:function(i){i.spa={state:"",start:0,end:0,resourceStart:i.spa.resourceStart,nwkEnd:0}},bootRUMSPA:function(i){window.MutationObserver&&i.colHelpers.startMutationObserver(i)},initialiseSPA:function(i,type){i.isSPA&&i.colHelpers.bootRUMSPA(i),void 0===window.site24x7rum&&(window.site24x7rum={}),site24x7rum.routeChanges=new Array,i.storeLastAjax(type),setInterval(function(){i.metricsDispatcher(i,"regular"),i.dispatchWaterfall(i,"regular"),s247ConfigModule.getConfig("recordSession")&&i.dispatchRecordings(i,"regular")},s247CommonModule.CONSTANTS.PAYLOAD_DISPATCHER_INTERVAL)},getStatusCode:function(s){var st="Others";return st=null!=s&&""!=s?"0"!=(st=s.substring(0,1))?st+"xx":"0":st},addStatusCode:function(a,b){for(var sa=Object.keys(a),sb=Object.keys(b),sObj=a;sa[0];){var sts=sa.pop(),ind=sb.indexOf(sts);-1<ind&&(sObj[sts]+=b[sts],sb.splice(ind,1))}for(;sb[0];)sObj[sts=sb.pop()]=b[sts];return sObj},getUniqueID:function(){var nav=window.navigator,screen=window.screen,g=nav.mimeTypes.length,n=nav.userAgent.replace(/\D+/g,"");return(g+=30<n.length?n.substring(0,30):n)+nav.plugins.length+(screen.height||"")+(screen.width||"")+(screen.pixelDepth||"")},getClientID:function(){function chr(){return Math.floor(1e4*Math.random()).toString()}return chr()+chr()+chr()+chr()},getHost:function(location){location=location.match(/^(https|http)?:\/\/(?:www\.)?([^/:?#]+)(?:[/:?#]|$)/i);return void 0!==location&&location[2]?location[2]:null},getPerformanceEntriesLen:function(){return window.performance.getEntries?window.performance.getEntries().length:0},getDataMetrics:function(i,type){try{var key,m,metrics={};for(key in i.metricsCollector)i.metricsCollector.hasOwnProperty(key)&&"sessionInfo"!=key&&null!=(m=i.metricsCollector[key](i,type))&&(metrics[key]=m);return null!=metrics.dataList||null!=metrics.errorList||null!=metrics.eventsList?(metrics.sessionInfo=i.metricsCollector.sessionInfo(i,type),metrics):null}catch(e){return null}},processEventDetails:function(i,event,type){var target="",event={or:target=void 0!==(target=event&&(event=event.target||event.srcElement)?(event.tagName&&""!=event.tagName?event.tagName:"-")+"|"+(event.className&&""!=event.className?event.className:"-")+"|"+(event.id&&""!=event.id?event.id:"-"):target)&&""!=target&&"-|-|-"!=target?target:"body"};i.colHelpers.addToSession(i,type,"event",event,i.colHelpers.getCurrentTime())},addDeadClicks:function(i,eventMetrics){i.lastMutation<s247CommonModule.getCurrentMillis()-s247CommonModule.CONSTANTS.DEADCLICK_WAIT_TIME&&(eventMetrics.meta_info=eventMetrics.meta_info?eventMetrics.meta_info+"-dead":"dead"),i.events.push(eventMetrics)},addEvents:function(i,event,type,data,metaInfo){try{if(i.trackEvents){var closestEventObj,navigationEntries,now=s247CommonModule.getCurrentMillis(),eventMetrics={ct:now,type:type,metric:data?data.substring(0,s247CommonModule.CONSTANTS.MAX_EVENTS_METRIC_LENGTH):"-"};if("XHR"!=type&&"fetch"!=type||(s247CommonModule.eventIdObj[data]?null==(closestEventObj=s247CommonModule.getClosestStartTime(s247CommonModule.eventIdObj[data],metaInfo.st,"event"))?(eventMetrics.event_metric_id=s247CommonModule.simpleHash(data)+"_"+Math.round(metaInfo.st),s247CommonModule.eventIdObj[data].push({txnName:data,st:Math.round(metaInfo.st),ct:eventMetrics.ct,source:"event"})):eventMetrics.event_metric_id=s247CommonModule.simpleHash(closestEventObj.txnName)+"_"+Math.round(closestEventObj.st):(eventMetrics.event_metric_id=s247CommonModule.simpleHash(data)+"_"+Math.round(metaInfo.st),s247CommonModule.eventIdObj[data]=[{txnName:data,st:Math.round(metaInfo.st),ct:eventMetrics.ct,source:"event"}]),s247CommonModule.eventIdObj=s247CommonModule.deleteLongLastingEvents(s247CommonModule.eventIdObj)),metaInfo&&(metaInfo="string"==typeof metaInfo?metaInfo:JSON.stringify(metaInfo),eventMetrics.meta_info=metaInfo.substring(0,s247CommonModule.CONSTANTS.MAX_EVENTS_META_INFO_LENGTH)),"click"==type){i.lastActivityTime=s247CommonModule.getCurrentMillis();var buttonText,customName=(target=event.target||event.srcElement).getAttribute("s247-custom-name"),clickEvents=(customName&&(eventMetrics.name=customName.substring(0,s247CommonModule.CONSTANTS.MAX_EVENTS_CLICK_CUSTOMNAME_LENGTH),eventMetrics.type="custom"),eventMetrics.metric=s247CommonModule.getSelector(target),eventMetrics.xpath=s247CommonModule.getXPath(target),eventMetrics.x=event.clientX,eventMetrics.y=event.clientY,i.events.filter(function(event){return"click"==event.type})),rageClicks=0;if(clickEvents.filter(function(currentEvent){var eucledianDistance=Math.hypot(eventMetrics.x-currentEvent.x,eventMetrics.y-currentEvent.y);now-currentEvent.ct<s247CommonModule.CONSTANTS.MAX_CLICK_INTERVAL&&eucledianDistance<s247CommonModule.CONSTANTS.CLICK_DISTANCE?rageClicks++:rageClicks=0,rageClicks>s247CommonModule.CONSTANTS.CLICK_THRESHOLD&&(currentEvent.meta_info="rage")}),"A"===event.target.tagName||"BUTTON"===event.target.tagName||event.target.closest("button"))return eventMetrics.name||(buttonText=event.target.innerText||event.target.textContent,eventMetrics.name=buttonText.substring(0,s247CommonModule.CONSTANTS.MAX_BUTTON_CLICK_TEXT_LENGTH)),void("A"!==event.target.tagName||event.target.href||"BUTTON"!==event.target.tagName||event.target.onclick?setTimeout(i.colHelpers.addDeadClicks,s247CommonModule.CONSTANTS.DEADCLICK_WAIT_TIME,i,eventMetrics):eventMetrics.meta_info=eventMetrics.meta_info?eventMetrics.meta_info+"-dead":"dead")}else if("scroll"==type){if(i.lastActivityTime=s247CommonModule.getCurrentMillis(),now-s247CommonModule.SCROLL_EVENTS.LAST_SCROLLED?s247CommonModule.SCROLL_EVENTS.COUNT++:s247CommonModule.SCROLL_EVENTS.COUNT=0,setTimeout(()=>{s247CommonModule.SCROLL_EVENTS.COUNT=0},s247CommonModule.SCROLL_EVENTS.SCROLL_IDLE_TIMEOUT),s247CommonModule.SCROLL_EVENTS.LAST_SCROLLED=now,s247CommonModule.SCROLL_EVENTS.COUNT>=s247CommonModule.CONSTANTS.EXCESSIVE_SCROLL_THRESHOLD&&"excessive_scroll"!=i.events[i.events.length-1].meta_info)"scroll"==i.events[i.events.length-1].type?i.events[i.events.length-1].meta_info="excessive_scroll":eventMetrics.meta_info="excessive_scroll";else if("scroll"==i.events[i.events.length-1].type)return}else if("typing"==type){i.lastActivityTime=s247CommonModule.getCurrentMillis();var target=event.target||event.srcElement;eventMetrics.metric=s247CommonModule.getSelector(target);try{if("typing"==i.events[i.events.length-1].type||i.events[i.events.length-1].metric==eventMetrics.metric)return;eventMetrics.xpath=s247CommonModule.getXPath(target)}catch(e){}}else"unload"==type&&(0<(navigationEntries=window.performance.getEntriesByType("navigation")).length?"back_forward"===navigationEntries[0].type&&s247CommonModule.getCurrentMillis()-i.pageLoadTimeStamp<s247CommonModule.CONSTANTS.QUICK_BACK_TIME&&(eventMetrics.meta_info="quick_back"):window.performance.navigation&&2===window.performance.navigation.type&&s247CommonModule.getCurrentMillis()-i.pageLoadTimeStamp<s247CommonModule.CONSTANTS.QUICK_BACK_TIME&&(eventMetrics.meta_info="quick_back"));i.events.length<s247CommonModule.CONSTANTS.MAX_EVENTS_LENGTH&&i.events.push(eventMetrics)}}catch(e){}},isUserAgentBlocked:function(i){if(window.navigator&&window.navigator.userAgent){var u,ua=window.navigator.userAgent;for(u in i)if(""!=i[u]&&-1<ua.indexOf(i[u]))return!0;return!1}return!0},isAjaxCallAllowed:function(i,aC){var txi=aC&&-1<aC.indexOf(document.location.origin)?document.location.origin.length:0,txi=aC?aC.substr(txi,-1<aC.indexOf("?")?aC.indexOf("?")-txi:aC.length):document.location.pathname,txi=i.colHelpers.getFormatedTxnName(i,txi);return null==i.excludedAjaxCallsRegex||null==txi.match(i.excludedAjaxCallsRegex)},isTxnAllowed:function(i,tN){return null==tN||null==i.excludedWebTxnsRegex||null==tN.match(i.excludedWebTxnsRegex)},setCookie:function(name,value,days){var date=new Date,days=(days=void 0===days||days<0?parseInt(new Date(date.getFullYear(),date.getMonth()+1,0).getDate())-parseInt(date.getDate()):days,date.setTime(date.getTime()+24*(365+Number(days))*60*60*1e3),"; expires="+date.toGMTString());return document.cookie=name+"="+value+days+";Secure;SameSite=Strict; path=/",!0},getCookie:function(i,cookieName){var nss,sST,pTime,value="",isSet=!1,timeOut=i.sessionTimeout||s247CommonModule.CONSTANTS.MAX_SESSION_TIME,ns=i.isSPA?s247CommonModule.getCurrentMillis():performance.timing.navigationStart,curT=s247CommonModule.getCurrentMillis(),sMatch=(" "+document.cookie).match(new RegExp("[; ]"+cookieName+"=([^\\s;]*)"));return"site24x7RUMSnapshotId"==cookieName?sMatch&&-1<(value=unescape(sMatch[1])).indexOf(".")?value.split("."):value:"site24x7rumID"==cookieName&&sMatch?(nss=!1,sST=ns,pTime=0,""!==(value=unescape(sMatch[1]))&&3==value.split(".").length?(value=value.split("."),sMatch=""!=document.referrer?i.colHelpers.getHost(document.referrer):"",i.colHelpers.getDomainFromTxn(window.location.href)!==sMatch?nss=Number(value[1])+timeOut<ns:pTime=Number(ns)-Number(value[2]),nss||(sST=value[1]),void 0===value[0]&&(value[0]=i.colHelpers.getClientID()),value=value[0]+"."+sST+"."+ns,isSet=i.colHelpers.setCookie(cookieName,value)&&!1,{guid:(value=value.split("."))[0],ss_time:value[1],colT:curT,new_user:isSet,new_ss:nss,p_view_time:pTime}):(sMatch=i.colHelpers.getClientID()+"."+ns+"."+ns,isSet=i.colHelpers.setCookie(cookieName,sMatch,365),{guid:(sMatch=sMatch.split("."))[0],ss_time:sMatch[1],colT:curT,new_user:2!=value.length&&isSet,new_ss:!0,p_view_time:pTime})):(value=i.colHelpers.getClientID()+"."+ns+"."+ns,isSet=i.colHelpers.setCookie(cookieName,value,365),{guid:(value=value.split("."))[0],ss_time:value[1],colT:curT,new_user:isSet,new_ss:!0,p_view_time:0})},wrapWithHandler:function(method){return function(){try{return method.apply(this,arguments)}catch(ex){}}},shouldCollectMetrics:function(i){return Math.random()<i.samplingRate}},initialize:function(i){i.xhrCalls=[],i.xhrCallTracker={},i.metrics=new Array,i.rawErrors=new Array,i.perfStats={},i.curUrl="",i.initialSent=!1,i.collectTrace=!1,i.isCorsSupported="withCredentials"in new XMLHttpRequest||"undefined"!=typeof XDomainRequest,i.nwkTracker={},i.domainInfo={},i.resourcesTotal={},i.onPageLoadEntriesLen=0,i.appKey=s247CommonModule.getAppKey(),i.collector="undefined"!=typeof s247RUM&&s247RUM.collectorURL?s247RUM.collectorURL:"//col.site24x7rum.eu",i.sendAjaxCalls="undefined"!=typeof site24x7rumProp&&"boolean"==typeof site24x7rumProp.sendAjaxCalls?site24x7rumProp.sendAjaxCalls:!("undefined"==typeof s247RUM||!s247RUM.ajax_enabled)&&s247RUM.ajax_enabled,i.includeCrossDomainAjaxCalls="undefined"!=typeof site24x7rumProp&&"boolean"==typeof site24x7rumProp.includeCrossDomainAjaxCalls?site24x7rumProp.includeCrossDomainAjaxCalls:!("undefined"==typeof s247RUM||!s247RUM.cx_ajax_enabled)&&s247RUM.cx_ajax_enabled,i.excludedUserAgents="undefined"!=typeof site24x7rumProp&&void 0!==site24x7rumProp.userAgentsToBlock?site24x7rumProp.userAgentsToBlock:"undefined"!=typeof s247RUM&&s247RUM.excluded_useragents?s247RUM.excluded_useragents:[""],i.excludedDomains="undefined"!=typeof site24x7rumProp&&site24x7rumProp.excludedDomains?site24x7rumProp.excludedDomains:"undefined"!=typeof s247RUM&&s247RUM.excluded_domains?s247RUM.excluded_domains:[""],i.domainsToExclude="static.site24x7rum(.*)|col.site24x7rum(.*)",i.excludedDomainsRegex=void 0===i.excludedDomains[0]||""==i.excludedDomains[0]?new RegExp(i.domainsToExclude,"g"):new RegExp(i.domainsToExclude+"|"+i.excludedDomains.join("|"),"g"),i.excludedAjaxCalls="undefined"!=typeof site24x7rumProp&&site24x7rumProp.excludedAjaxCalls?site24x7rumProp.excludedAjaxCalls:"undefined"!=typeof s247RUM&&s247RUM.excludedAjaxCalls?s247RUM.excludedAjaxCalls:[""],i.excludedAjaxCallsRegex=i.excludedAjaxCalls&&""!=i.excludedAjaxCalls[0]?new RegExp(i.excludedAjaxCalls.join("|"),"g"):null,i.excludedWebTxns="undefined"!=typeof site24x7rumProp&&site24x7rumProp.excludedWebTxns?site24x7rumProp.excludedWebTxns:"undefined"!=typeof s247RUM&&s247RUM.excludedWebTxns?s247RUM.excludedWebTxns:[""],i.excludedWebTxnsRegex=i.excludedWebTxns&&""!=i.excludedWebTxns[0]?new RegExp(i.excludedWebTxns.join("|"),"g"):null,i.includeQueryParams="undefined"!=typeof site24x7rumProp&&site24x7rumProp.includeQueryParams?site24x7rumProp.includeQueryParams:!("undefined"==typeof s247RUM||!s247RUM.includeQueryParams)&&s247RUM.includeQueryParams,i.trackResources="undefined"!=typeof site24x7rumProp&&"boolean"==typeof site24x7rumProp.track_resources?site24x7rumProp.track_resources:"undefined"!=typeof s247RUM&&"boolean"==typeof s247RUM.track_resources&&s247RUM.track_resources,i.rumMonType="undefined"!=typeof site24x7rumProp&&"number"==typeof site24x7rumProp.rumMonType?site24x7rumProp.rumMonType:"undefined"!=typeof s247RUM&&s247RUM.beaconType?s247RUM.beaconType:0,i.isSPA=!(!("undefined"!=typeof s247RUM&&0<Number(s247RUM.beaconType)||0<i.rumMonType)||!window.performance.getEntries),i.considerAllResources="undefined"!=typeof site24x7rumProp&&"boolean"==typeof site24x7rumProp.considerAllResources&&site24x7rumProp.considerAllResources,i.version=3.1,i.samplingRate=1,i.trackEvents=!1,i.resourceTracker={s:0,e:i.onPageLoadEntriesLen},i.spa={state:"",start:0,end:0,resourceStart:i.onPageLoadEntriesLen,sent:"",nwkStart:0,nwkEnd:0},i.urls={},i.urls.mut=i.urls.nwk=-1<window.location.hash.indexOf("#")?window.location.hash.replace("#",""):window.location.pathname,i.userTrace=[],i.spaTracker=[],i.events=[],i.excludedNetworkUrls=[],i.allowedNetworkUrls=[],i.lastMutation=s247CommonModule.getCurrentMillis(),i.recordingsinfo={firstRecording:s247CommonModule.getCurrentMillis(),currentSessionStartTime:void 0},i.pageLoadTimeStamp=s247CommonModule.getCurrentMillis(),i.sessionInfo={},void 0===window.site24x7rum&&(window.site24x7rum={}),i.mutArray=[],i.nwkArray=[],site24x7rum.sessionTrace=new Array,site24x7rum.routeChanges=new Array,i.storeLastAjax=function(type){i.xhrCallsLast=i.xhrCalls,i.xhrCalls=new Array,!i.initialSent&&"initial"!=type||i.metricsDispatcher(i,type)},i.eventHandlers={initializeOnloadModules:function(i){i.pageLoadTimeStamp=s247CommonModule.getCurrentMillis(),window.performance.getEntries&&(i.onPageLoadEntriesLen=window.performance.getEntries().length),setTimeout(function(){i.colHelpers.initialiseSPA(i,"initial"),i.dispatchWaterfall(i,"initial")},0)},onload:function(){document.readyState&&"complete"==document.readyState?i.eventHandlers.initializeOnloadModules(i):window.addEventListener?window.addEventListener("load",function(){i.eventHandlers.initializeOnloadModules(i)},!1):window.attachEvent&&window.attachEvent("onload",function(){i.eventHandlers.initializeOnloadModules(i)},!1)},onpagehide:function(e){i.colHelpers.addEvents(i,void 0,"unload",i.colHelpers.getCurrentUrl(i)),i.metricsDispatcher(i,"unload"),i.dispatchWaterfall(i,"unload"),s247ConfigModule.getConfig("recordSession")&&i.dispatchRecordings(i,"unload"),s247WebvitalsModule.flushWcvData(i)},onkeypress:function(event){i.colHelpers.processEventDetails(i,event,"typing"),i.colHelpers.addEvents(i,event,"typing")},onclick:function(event){i.colHelpers.processEventDetails(i,event,"click"),i.colHelpers.addEvents(i,event,"click")},onscroll:function(event){i.colHelpers.processEventDetails(i,event,"scroll"),i.colHelpers.addEvents(i,event,"scroll",i.colHelpers.getCurrentUrl(i))},onhashchange:function(){i.colHelpers.pushRoutes(i,window.location,i.colHelpers.getCurrentTime())},onpopstate:function(event){i.colHelpers.pushRoutes(i,window.location,i.colHelpers.getCurrentTime())},ajax_open:function(){XMLHttpRequest.prototype.open=(open=XMLHttpRequest.prototype.open,function(method,url,async,user,password){try{this._url=-1<url.indexOf("http")?url:0==url.indexOf("/")?document.location.origin+url:document.location.origin+/(.*)\//.exec(document.location.pathname)[0]+url;var originalSetRequestHeader,originalSend,captureNetworkDetails=i.colHelpers.isNetworkDetailsAllowed(i,this._url),xhrCall={name:this._url,st:i.colHelpers.getCurrentTime(),method:method,requestHeaders:{},requestPayload:null};captureNetworkDetails&&(originalSetRequestHeader=this.setRequestHeader,this.setRequestHeader=function(header,value){return xhrCall.requestHeaders[header]=value,originalSetRequestHeader.apply(this,arguments)},originalSend=this.send,this.send=function(data){return xhrCall.requestPayload=data,originalSend.apply(this,arguments)}),-1==this._url.indexOf(insightRUM.collector)&&(window.addEventListener&&(this.addEventListener("loadstart",function(){xhrCall.name=this._url,xhrCall.st=i.colHelpers.getCurrentTime()},!1),this.addEventListener("loadend",function(){var endTime=i.colHelpers.getCurrentTime(),obj={name:xhrCall.name,st:xhrCall.st,end:endTime,status:this.status,event_metric_id:xhrCall.event_metric_id};if(captureNetworkDetails){var responseHeaders={},headerPairs=this.getAllResponseHeaders().split("\r\n");for(let j=0;j<headerPairs.length;j++){var key,headerPair=headerPairs[j],index=headerPair.indexOf(": ");0<index&&(key=headerPair.substring(0,index),headerPair=headerPair.substring(index+2),responseHeaders[key]=headerPair)}endTime={name:xhrCall.name,st:xhrCall.st,end:endTime,duration:endTime-xhrCall.st,status:this.status,method:xhrCall.method,size:parseInt(this.getResponseHeader("Content-Length")||"0"),responseType:this.responseType,responseHeaders:s247CommonModule.filterHeaders(responseHeaders,i.allowedResponseHeaders),responseBody:s247CommonModule.parseJsonWithLimit(this.responseText),requestHeaders:s247CommonModule.filterHeaders(xhrCall.requestHeaders,i.allowedRequestHeaders),requestPayload:s247CommonModule.parseJsonWithLimit(xhrCall.requestPayload)};i.colHelpers.addEvents(i,void 0,"XHR",this._url,endTime)}else i.colHelpers.addEvents(i,void 0,"XHR",this._url,obj);i.isSPA&&setTimeout(function(){i.colHelpers.observeNetwork(i,obj)},100),i.xhrCalls.push(obj);endTime={or:i.colHelpers.getFormatedTxnName(i,document.location.origin)};i.collectTrace&&i.colHelpers.addAjaxToSession(i,xhrCall.name,"ajax",endTime,xhrCall.st)},!1)),i.userTrace)&&void 0!==this._url&&i.colHelpers.addUserTrace(i,"xhr",this._url)}catch(e){}return open.apply(this,arguments)});var open,originalFetch=window.fetch;try{"function"==typeof originalFetch&&void 0===originalFetch.polyfill&&(window.fetch=function(){var fetchInput=arguments[0],options=arguments[1]||{};let method,headers,body,startTime=i.colHelpers.getCurrentTime();"string"==typeof fetchInput?this._url=-1<fetchInput.indexOf("http")?fetchInput:document.location.origin+fetchInput:void 0!==window.Request&&fetchInput instanceof window.Request?(this._url=fetchInput.url,method=fetchInput.method,headers=fetchInput.headers,body=fetchInput.body):this._url=String(fetchInput);var captureNetworkDetails=i.colHelpers.isNetworkDetailsAllowed(i,this._url),fetchInput=originalFetch.apply(this,arguments);const requestHeaders={};if(captureNetworkDetails&&(method=method||options.method||"GET",headers=headers||options.headers||{},body=body||options.body,-1==this._url.indexOf(i.collector)))if(headers instanceof Headers)for(var[key,value]of headers)requestHeaders[key]=value;else Object.assign(requestHeaders,headers);return fetchInput.then(i.colHelpers.wrapWithHandler(function(response){try{var meta_info_obj,responseHeaders={},endTime=i.colHelpers.getCurrentTime(),obj={name:this._url,st:startTime,end:i.colHelpers.getCurrentTime(),status:response.status};if(captureNetworkDetails){for(var[key,value]of response.headers)responseHeaders[key]=value;meta_info_obj={name:this._url,st:startTime,end:endTime,duration:endTime-startTime,status:response.status,method:method,size:parseInt(response.headers.get("Content-Length")||"0"),responseType:response.type,requestHeaders:s247CommonModule.filterHeaders(requestHeaders,i.allowedRequestHeaders),requestPayload:s247CommonModule.parseJsonWithLimit(body),responseHeaders:s247CommonModule.filterHeaders(responseHeaders,i.allowedResponseHeaders)}}return response.clone().text().then(text=>{captureNetworkDetails&&(meta_info_obj.responseBody=captureNetworkDetails?s247CommonModule.parseJsonWithLimit(text):{}),i.isSPA&&setTimeout(()=>i.colHelpers.observeNetwork(i,obj),100),i.xhrCalls.push(obj);text={or:i.colHelpers.getFormatedTxnName(i,document.location.origin)};return i.collectTrace&&i.colHelpers.addAjaxToSession(i,url,"fetch",text,startTime),this._url&&i.colHelpers.addEvents(i,void 0,"fetch",this._url,captureNetworkDetails?meta_info_obj:obj),response})}catch(e){}return response}),function(err){throw err}),fetchInput})}catch(e){}},onpushstate:function(){var history,pushState;history=window.history,pushState=history.pushState,history.pushState=function(state){var t=i.colHelpers.getCurrentTime(),res=pushState.apply(history,arguments);return i.colHelpers.pushRoutes(i,window.location,t),res}},onreplacestate:function(){var history,replaceState;history=window.history,replaceState=history.replaceState,history.replaceState=function(state){var t=i.colHelpers.getCurrentTime(),res=replaceState.apply(history,arguments);return i.colHelpers.pushRoutes(i,window.location,t),res}},console:function(){void 0!==window.console&&"undefined"!=typeof console&&["log","debug","warn","info","error"].forEach(function(level){var oldLog;void 0!==console[level]&&(oldLog=console[level],console[level]=function(message){try{i.colHelpers.addUserTrace(i,"console-"+level,message),i.colHelpers.addEvents(i,void 0,"console",message,level)}catch(e){}oldLog.apply(this,arguments)})})},visibilitychange:function(){document.addEventListener&&document.visibilityState&&document.addEventListener("visibilitychange",function(){"hidden"===document.visibilityState&&(i.metricsDispatcher(i,"regular"),i.dispatchWaterfall(i,"unload"),s247ConfigModule.getConfig("recordSession")&&i.dispatchRecordings(i,"unload"),s247WebvitalsModule.flushWcvData(i))})}}},metricsCollector:{configInfo:function(i,type){return{appKey:i.appKey,version:i.version}},sessionInfo:function(i){var freeHeap,sInfo=window._s247rumc&&!i.initialSent?window._s247rumc:i.colHelpers.getCookie(i,"site24x7rumID"),sInfo={useragent:200<navigator.userAgent.length?navigator.userAgent.substring(0,200):navigator.userAgent,scH:window.screen.height,scW:window.screen.width,sstime:Number(sInfo.ss_time),colT:sInfo.colT,session_time:s247CommonModule.getCurrentMillis()-Number(sInfo.ss_time),replay_available:s247ConfigModule.getConfig("recordSession")?1:0,usrInfo:{uniqVisitor:sInfo.new_user,guid:sInfo.guid,uid:void 0===i.uid?sInfo.guid:i.uid,nSes:sInfo.new_ss}};return navigator.connection&&navigator.connection.effectiveType&&(sInfo.conTy=navigator.connection.effectiveType),navigator.deviceMemory&&(sInfo.dM=navigator.deviceMemory<1?1:navigator.deviceMemory),i.environment&&(sInfo.environment=i.environment),i.releaseVersion&&(sInfo.release=i.releaseVersion),performance.memory&&(sInfo.usedHeapSize=performance.memory.usedJSHeapSize,freeHeap=performance.memory.totalJSHeapSize-performance.memory.usedJSHeapSize,sInfo.freeHeapSize=0<freeHeap?freeHeap:0),i.sessionInfo=sInfo},dataList:function(i,type){if("regular"!=type&&"unload"!=type||i.isSPA){var ajaxCalls={},ajaxCallsMap={},dataList=[];if(1<site24x7rum.routeChanges.length||"initial"==type||"spa"==type&&0<i.spaTracker.length){for(var spaObj="spa"==type&&0<i.spaTracker.length?i.spaTracker.shift():{url:"",start:0,end:0},spaurl=spaObj.url,nwkObj=""!=spaurl&&i.nwkTracker[spaurl]?{start:i.nwkTracker[spaurl].start,end:i.nwkTracker[spaurl].end}:{start:0,end:0},end=(delete i.nwkTracker[spaurl],spaObj.start=(nwkObj.start<spaObj.start?nwkObj:spaObj).start,spaObj.end=(nwkObj.end<spaObj.end&&nwkObj.start<spaObj.end?spaObj:nwkObj).end,0),ajax_call="initial"!=type&&0<site24x7rum.routeChanges.length?site24x7rum.routeChanges.shift():{time:0},perfStats=(spaObj.start=0!=ajax_call.time&&ajax_call.time<spaObj.start?ajax_call.time:spaObj.start,{}),xhrLen=("initial"==type?(i.perfStats=perfStats=i.colHelpers.getPerfStats(i,window.performance.timing),i.curUrl=perfStats.txnName,i.colHelpers.addUserTrace(i,"load",i.curUrl),i.colHelpers.addEvents(i,void 0,"load",i.curUrl,window.location.href)):perfStats=i.colHelpers.getPerfObject(),0),parentDomain=(spaurl=document.location.host.match(/^(?:www\.)?([^/:?#]+)(?:[/:?#]|$)/i))&&spaurl[1]?spaurl[1]:document.location.host;0<i.xhrCallsLast.length&&(ajax_call.url||""!=spaObj.url||i.sendAjaxCalls);){var xhr=i.xhrCallsLast.shift(),considerForPerf="spa"==type&&xhr.st>=spaObj.start-100&&xhr.end<=spaObj.end+100;if(0!=spaObj.end&&xhr.st>=spaObj.end){if(i.trackSpaNonRouteAjax&&(e=window.performance.getEntriesByName?window.performance.getEntriesByName(xhr.name):e)&&0<e.length){for(var ajPerfStats,j=i.xhrCallTracker.hasOwnProperty(xhr.name)?i.xhrCallTracker[xhr.name]:0;j<e.length;j++)e[j].duration&&(e[j].loadEventEnd=e[j].fetchStart+e[j].duration,rSize=e[j].transferSize||0,0<(ajPerfStats=i.colHelpers.getPerfStats(i,e[j])).totalRT)&&ajPerfStats.totalRT<=3e5&&ajPerfStats.totalRT>=ajPerfStats.fbT&&0<=ajPerfStats.fbT&&((status={})[i.colHelpers.getStatusCode(xhr.status+"")]=1,ajPerfStats.type="ajax",ajPerfStats.status=status,ajPerfStats.http_status=xhr.status||0,ajPerfStats.totalCT=1,ajaxCalls[ajPerfStats.txnName]?(totalSZ=ajaxCalls[ajPerfStats.txnName].totalSZ,totalSCT=ajaxCalls[ajPerfStats.txnName].totalSCT,ajaxCalls[ajPerfStats.txnName]=i.colHelpers.addPerfStats(i,ajaxCalls[ajPerfStats.txnName],ajPerfStats,s247CommonModule.CONSTANTS.TIMING_METRICS),ajaxCalls[ajPerfStats.txnName].txnName=ajPerfStats.txnName,ajaxCalls[ajPerfStats.txnName].totalSZ=totalSZ+rSize,ajaxCalls[ajPerfStats.txnName].totalSCT=totalSCT+(0<Number(rSize)?1:0),ajaxCalls[ajPerfStats.txnName].type="ajax"):(ajaxCalls[ajPerfStats.txnName]=ajPerfStats,ajaxCalls[ajPerfStats.txnName].totalSZ=rSize,ajaxCalls[ajPerfStats.txnName].totalSCT=0<Number(rSize)?1:0));i.xhrCallTracker[xhr.name]=j}i.xhrCalls.push(xhr)}else{var ajax_perfStats,txname,pAjax,xhrDomain=i.colHelpers.getDomainFromTxn(i,xhr.name);xhr&&(0!=ajax_call.time&&xhr.st>=ajax_call.time||xhr.st>=spaObj.start-100)&&xhr.name&&null!=xhrDomain&&i.colHelpers.isDomainAllowed(i,xhrDomain)&&i.colHelpers.isAjaxCallAllowed(i,xhr.name)&&(-1<xhr.name.indexOf(parentDomain)||i.includeCrossDomainAjaxCalls)&&(e=window.performance.getEntriesByName?window.performance.getEntriesByName(xhr.name):e)&&0<e.length&&(e[j=i.xhrCallTracker.hasOwnProperty(xhr.name)?i.xhrCallTracker[xhr.name]:0].duration&&(e[j].loadEventEnd=e[j].fetchStart+e[j].duration,rSize=e[j].transferSize||0,i.colHelpers.addToResInfo(i,e[j]),(ajax_perfStats=i.colHelpers.getPerfStats(i,e[j])).totalRT<=15e4)&&ajax_perfStats.totalRT>=ajax_perfStats.fbT&&0<=ajax_perfStats.fbT&&((status={})[i.colHelpers.getStatusCode(xhr.status+"")]=1,ajax_perfStats.status=status,ajax_perfStats.http_status=xhr.status||0,"spa"==type&&considerForPerf&&(xhr.end>end&&(end=xhr.end),perfStats=i.colHelpers.addPerfStats(i,perfStats,ajax_perfStats,s247CommonModule.CONSTANTS.TIMING_METRICS),xhrLen++),ajax_perfStats.totalCT=1,ajaxCalls[txname=ajax_perfStats.txnName]?(totalSZ=ajaxCalls[txname].totalSZ,totalSCT=ajaxCalls[txname].totalSCT,ajaxCalls[txname]=i.colHelpers.addPerfStats(i,ajaxCalls[txname],ajax_perfStats,s247CommonModule.CONSTANTS.TIMING_METRICS),ajaxCalls[txname].txnName=txname,ajaxCalls[txname].totalSZ=totalSZ+rSize,ajaxCalls[txname].totalSCT=totalSCT+(0<Number(rSize)?1:0),considerForPerf&&ajaxCallsMap[txname]&&(pAjax=ajaxCallsMap[txname],ajaxCallsMap[txname]={totalRT:pAjax.totalRT+ajax_perfStats.totalRT,totalCT:pAjax.totalCT+1,status:i.colHelpers.addStatusCode(pAjax.status,status)})):(ajaxCalls[txname]=ajax_perfStats,ajaxCalls[txname].totalSZ=rSize,ajaxCalls[txname].totalSCT=0<Number(rSize)?1:0,considerForPerf&&((pAjax={})[i.colHelpers.getStatusCode(xhr.status+"")]=1,ajaxCallsMap[txname]={totalRT:ajax_perfStats.totalRT,totalCT:1,status:pAjax}))),i.xhrCallTracker[xhr.name]=j)}}"spa"!=type||!ajax_call.url&&""==spaObj.url||(i.considerAllResources&&null!=(nwkObj=i.colHelpers.getSPTPerformance(i))&&(perfStats=i.colHelpers.addPerfStats(i,perfStats,nwkObj.perfStats,s247CommonModule.CONSTANTS.TIMING_METRICS),xhrLen+=nwkObj.len),perfStats.ajaxCallsMap=ajaxCallsMap,nwkObj=ajax_call.time&&!(spaObj.start<ajax_call.time&&0!=spaObj.start)&&0!=ajax_call.time?ajax_call.time:spaObj.start,0<(nwkObj=(end=spaObj.end>end?spaObj.end:end)-nwkObj-(perfStats=0<perfStats.totalRT&&0<xhrLen?i.colHelpers.getAverageStats(perfStats,xhrLen,s247CommonModule.CONSTANTS.TIMING_METRICS):perfStats).totalRT)&&(perfStats.drT=perfStats.dpT=perfStats.dpT+nwkObj,perfStats.feT+=nwkObj,perfStats.totalRT+=nwkObj),nwkObj=(""!=spaObj.url?spaObj:ajax_call).url,perfStats.fullName=i.colHelpers.getFormatedTxnName(i,nwkObj,!1),perfStats.txnName=i.colHelpers.getFormatedTxnName(i,nwkObj),i.curUrl=perfStats.txnName),perfStats.type=type,0<perfStats.totalRT&&perfStats.totalRT<15e4&&(i.perfStats=perfStats,"initial"==type&&(perfStats.totalSZ=document.documentElement.innerHTML.length),dataList.push(perfStats),dataList=dataList.concat(i.colHelpers.getAsArray(ajaxCalls,25,"totalRT")))}}else{var dataList=[],uAjax={};if(i.sendAjaxCalls||i.includeCrossDomainAjaxCalls){for(var parentDomain=(spaurl=document.location.host.match(/^(?:www\.)?([^/:?#]+)(?:[/:?#]|$)/i))&&spaurl[1]?spaurl[1]:document.location.host;0<i.xhrCalls.length;){var e,xhr=i.xhrCalls.pop(),xhrDomain=i.colHelpers.getDomainFromTxn(i,xhr.name);if(xhr&&xhr.name&&null!=xhrDomain&&i.colHelpers.isDomainAllowed(i,xhrDomain)&&i.colHelpers.isAjaxCallAllowed(i,xhr.name)&&(-1<xhr.name.indexOf(parentDomain)&&i.sendAjaxCalls||xhr.name.indexOf(parentDomain)<0&&i.includeCrossDomainAjaxCalls))if((e=window.performance.getEntriesByName?window.performance.getEntriesByName(xhr.name):e)&&0<e.length){for(var rSize,perfStats,status,totalSZ,totalSCT,j=i.xhrCallTracker.hasOwnProperty(xhr.name)?i.xhrCallTracker[xhr.name]:0;j<e.length;j++)e[j].duration&&(e[j].loadEventEnd=e[j].fetchStart+e[j].duration,rSize=e[j].transferSize||0,0<(perfStats=i.colHelpers.getPerfStats(i,e[j])).totalRT)&&perfStats.totalRT<=3e5&&perfStats.totalRT>=perfStats.fbT&&0<=perfStats.fbT&&((status={})[i.colHelpers.getStatusCode(xhr.status+"")]=1,perfStats.type="ajax",perfStats.status=status,perfStats.http_status=xhr.status||0,perfStats.totalCT=1,uAjax[perfStats.txnName]?(totalSZ=uAjax[perfStats.txnName].totalSZ,totalSCT=uAjax[perfStats.txnName].totalSCT,uAjax[perfStats.txnName]=i.colHelpers.addPerfStats(i,uAjax[perfStats.txnName],perfStats,s247CommonModule.CONSTANTS.TIMING_METRICS),uAjax[perfStats.txnName].txnName=perfStats.txnName,uAjax[perfStats.txnName].totalSZ=totalSZ+rSize,uAjax[perfStats.txnName].totalSCT=totalSCT+(0<Number(rSize)?1:0),uAjax[perfStats.txnName].type="ajax"):(uAjax[perfStats.txnName]=perfStats,uAjax[perfStats.txnName].totalSZ=rSize,uAjax[perfStats.txnName].totalSCT=0<Number(rSize)?1:0));i.xhrCallTracker[xhr.name]=j}}dataList=dataList.concat(i.colHelpers.getAsArray(uAjax,25,"totalRT"))}}return 0<dataList.length?dataList:null},errorList:function(i,type){if("initial"==type)return null;for(var errorsPerSend=0,errorList=[];0<i.rawErrors.length&&errorsPerSend<s247CommonModule.CONSTANTS.MAX_ERROR_PER_REQUEST;){var err=i.rawErrors.pop();err&&(errorList.push(err),errorsPerSend++)}return 0<errorList.length?errorList:null},eventsList:function(i){var events;return 0<i.events.length?(events=i.events,i.events=[],events):null}},dispatchWaterfall:function(i,type){try{var sessionInfo,sessionId,resources,resourcedata;("initial"==type||i.captureAllWaterfallsResources)&&(sessionId=(sessionInfo=i.sessionInfo||i.metricsCollector.sessionInfo(i)).sstime+"."+sessionInfo.usrInfo.guid,resources=s247ResourcesModule.collect(sessionId,type))&&0<resources.length&&((resourcedata={}).resource_list=resources,resourcedata.configInfo=i.metricsCollector.configInfo(i),resourcedata.txn=i.colHelpers.getFormatedTxnName(i,""!=window.location.hash?window.location.hash.replace("#",""):window.location.pathname),resourcedata.full_txn=i.colHelpers.getFormatedTxnName(i,document.location.href,!1),i.dispatchMetrics(i,i.collector+"/rum/resource",JSON.stringify(resourcedata),!0))}catch(e){}},dispatchRecordingsRaw:function(i,events){var eventsList=[];for(let j=0;j<events.length;j++){var event=events[j],eventDataString=JSON.stringify(event.metric);let timeStampIncrementer=0;if(eventDataString.length>=s247CommonModule.CONSTANTS.MAX_RECORDING_SIZE)for(let i=0;i<eventDataString.length;i+=s247CommonModule.CONSTANTS.MAX_RECORDING_SIZE){var eventCopy=Object.assign({},event),chunk=eventDataString.slice(i,i+s247CommonModule.CONSTANTS.MAX_RECORDING_SIZE);eventCopy.metric=chunk,eventCopy.meta_info="chunk",eventCopy._zl_timestamp=Number(eventCopy._zl_timestamp)+ ++timeStampIncrementer,eventsList.push(eventCopy)}else event.metric=eventDataString,eventsList.push(event)}i.dispatchMetrics(i,i.collector+"/rum/record?appKey="+s247CommonModule.getAppKey()+"&gzip=false",JSON.stringify(eventsList),!0)},dispatchRecordings:function(i,type){try{var sessionInfo=i.sessionInfo||i.metricsCollector.sessionInfo(i),currentTime=s247CommonModule.getCurrentMillis(),currentPageTime=currentTime-i.recordingsinfo.firstRecording,sessionTime=currentTime-sessionInfo.sstime;if(i.recordingsinfo.currentSessionStartTime||(i.recordingsinfo.currentSessionStartTime=sessionInfo.sstime),!(currentPageTime>s247CommonModule.CONSTANTS.MAX_SESSION_TIME||sessionTime>s247CommonModule.CONSTANTS.MAX_SESSION_TIME)){var events=s247RecorderModule.collect();if("regular"==type)try{s247worker.postMessage(events),s247worker.onmessage=function(e){e=e.data;0<e.length&&i.dispatchMetrics(i,i.collector+"/rum/record?appKey="+s247CommonModule.getAppKey()+"&gzip=true",e,!0)}}catch(e){i.dispatchRecordingsRaw(i,events)}else i.dispatchRecordingsRaw(i,events)}}catch(e){}},metricsDispatcher:function(i,type){try{var txn,url="",url=i.customCollectorUrl?i.customCollectorUrl+("initial"==type?"/rum/proxydata":"/rum/proxytrace"):i.collector+("initial"==type?"/rum/data":"/rum/trace"),metrics=i.colHelpers.getDataMetrics(i,type);null!=metrics&&0<Object.keys(metrics).length&&(""!=(txn=i.colHelpers.getFormatedTxnName(i,i.colHelpers.getTxn(i),!1))&&(metrics.txnName="spa"==type&&""!=i.spa.state?i.colHelpers.getFormatedTxnName(i,i.spa.state):txn),void 0!==window.location.origin&&(metrics.domain=window.location.origin),i.colHelpers.isTxnAllowed(i,metrics.txnName))&&(metrics=JSON.stringify(metrics),i.dispatchMetrics(i,url,metrics),"initial"==type)&&(i.initialSent=!0)}catch(e){}},dispatchMetrics:function(i,url,metrics,useXhr){try{if((!i.onBeforeSend||"function"!=typeof i.onBeforeSend||(metrics=i.onBeforeSend(metrics)))&&!i.checkInactivity(i))if(navigator.sendBeacon&&!useXhr)navigator.sendBeacon(url,metrics);else{var xhr="withCredentials"in new XMLHttpRequest?new XMLHttpRequest:"undefined"!=typeof XDomainRequest?new XDomainRequest:null;if(!xhr)return!1;xhr.open("POST",url,!0),xhr.send(metrics)}}catch(e){}},checkInactivity:function(i){return s247CommonModule.getCurrentMillis()-i.lastActivityTime>s247CommonModule.CONSTANTS.INACTIVITY_LIMIT}},S247RUMConfigManager=(Object.keys=Object.keys||function(o,k,r){for(k in r=[],o)r.hasOwnProperty.call(o,k)&&r.push(k);return r},function(i){void 0!==window.s247r&&(s247ConfigModule.processQueue(window.s247r.q,i),window.s247r=s247ConfigModule)}),initInsightEvent=function(i,w,a){var p=w[a];"onload"==a||"console"==a||"visibilitychange"==a||"onpagehide"==a||"unload"==a?i.eventHandlers[a]():w[a]=function(arg){try{arg=arg||window.event,i.eventHandlers["on"+arg.type](arg)}catch(e){}if("function"==typeof p)return p.apply(this,arguments)},void 0!==window.insightMeRUM&&window.insightMeRUM.initMetricsFunction()};!function(i,a){S247RUMConfigManager(i);var pDomain,isAllowed=!0,m=window.location.href.match(s247CommonModule.CONSTANTS.HOST_NAME_WITH_PORT_REGEX);m&&m[2]&&(pDomain=m[2]);for(var d=0;d<i.excludedDomains.length;d++)""!=i.excludedDomains[d]&&0<=pDomain.indexOf(i.excludedDomains[d])&&(isAllowed=!1);if(i.isCorsSupported&&isAllowed&&!i.colHelpers.isUserAgentBlocked(i.excludedUserAgents)&&i.colHelpers.shouldCollectMetrics(i)){for(var j=0;j<a.length;j++)void 0!==window[a[j]]?initInsightEvent(i,window,a[j]):void 0!==document[a[j]]?initInsightEvent(i,document,a[j]):i.eventHandlers[a[j]](arguments);s247WebvitalsModule.init()}}(insightRUM,function(){insightRUM.initialize(insightRUM);var usePushState,arr=s247CommonModule.CONSTANTS.EVENT_LISTENERS;return window.performance&&window.performance.getEntries&&(insightRUM.sendAjaxCalls||insightRUM.isSPA||insightRUM.includeCrossDomainAjaxCalls)&&arr.push("ajax_open"),insightRUM.isSPA&&(usePushState=!!window.history&&!!window.history.pushState,arr=arr.concat(insightRUM.colHelpers.addSPAEvents(usePushState))),arr}()),JSON||(JSON={},function(){"use strict";var gap,indent,rep,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};function quote(string){return escapable.lastIndex=0,escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return"string"==typeof c?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}"function"!=typeof JSON.stringify&&(JSON.stringify=function(value,replacer,space){var i;if(indent=gap="","number"==typeof space)for(i=0;i<space;i+=1)indent+=" ";else"string"==typeof space&&(indent=space);if(!(rep=replacer)||"function"==typeof replacer||"object"==typeof replacer&&"number"==typeof replacer.length)return function str(key,holder){var i,k,v,length,partial,mind=gap,value=holder[key];switch(value&&"object"==typeof value&&"function"==typeof value.toJSON&&(value=value.toJSON(key)),typeof(value="function"==typeof rep?rep.call(holder,key,value):value)){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value)return"null";if(gap+=indent,partial=[],"[object Array]"===Object.prototype.toString.apply(value)){for(length=value.length,i=0;i<length;i+=1)partial[i]=str(i,value)||"null";v=0===partial.length?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]"}else{if(rep&&"object"==typeof rep)for(length=rep.length,i=0;i<length;i+=1)"string"==typeof rep[i]&&(v=str(k=rep[i],value))&&partial.push(quote(k)+(gap?": ":":")+v);else for(k in value)Object.prototype.hasOwnProperty.call(value,k)&&(v=str(k,value))&&partial.push(quote(k)+(gap?": ":":")+v);v=0===partial.length?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}"}return gap=mind,v}}("",{"":value});throw new Error("JSON.stringify")})}());
}
